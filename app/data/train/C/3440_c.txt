#include "TCS3200.h"
#include "HMC.h"
#define	tl0	0x00
#define	th0	0xB8   //Timer0 

void ColorInt()
{
	AUXR&=	0x00;
	TMOD =	0xE0;
	AUXR = 0x14;                //T2Îª1TÄ£Ê½, ²¢Æô¶¯¶¨Ê±Æ÷2	 page 470
  AUXR |= 0x01; 
}
unsigned int CheckRed()
{
	unsigned int Red;
	TL0=	tl0;
	TH0=	th0;
	TH1=	0;
	TL1=	0;
	TCS_S2=	0;
	TCS_S3=	0;//Select Red Filter
	Delay5ms();
	TR0=	1;//Timer 0 Start 10ms
	TR1=	1;//Counter 1 Start
	while(TF0==0)
		;//Waitng for Timer0 overflow
	TF0=	0;//Clean Timer0 overflow flag
	TR0=	0;//Timer0 stop
	TR1=	0;//Counter0 stop
	Red=	(unsigned long)(TH1*256+TL1);//*255/k_Red;
	return	Red;
}
unsigned int CheckGreen()
{
	unsigned int Green;
	TL0=	tl0;
	TH0=	th0;
	TH1=	0;
	TL1=	0;
	TCS_S2=	1;
	TCS_S3=	1;//Select Green Filter
	Delay5ms();
	TR0=	1;//Timer 0 Start 10ms
	TR1=	1;//Counter 1 Start
	while(TF0==0)
		;//Waitng for Timer0 overflow
	TF0=	0;//Clean Timer0 overflow flag
	TR0=	0;//Timer0 stop
	TR1=	0;//Counter0 stop
	Green=	(unsigned long)(TH1*256+TL1);//*255/k_Green;
	return	Green;
}
unsigned int CheckBlue()
{
	unsigned int Blue;
	TL0=	tl0;
	TH0=	th0;
	TH1=	0;
	TL1=	0;
	TCS_S2=	0;
	TCS_S3=	1;//Select Blue Filter
	Delay5ms();
	TR0=	1;//Timer 0 Start 10ms
	TR1=	1;//Counter 1 Start
	while(TF0==0)
		;//Waitng for Timer0 overflow
	TF0=	0;//Clean Timer0 overflow flag
	TR0=	0;//Timer0 stop
	TR1=	0;//Counter0 stop
	Blue=	(unsigned long)(TH1*256+TL1);//*255/k_Blue;
	return	Blue;
}