//////////////////////////////////////////////////////////////////////////
// Name:	    plate_detect Header
// Version:		1.2
// Date:	    2014-09-28
// MDate:	    2015-03-13
// Author:	    liuruoze
// Copyright:   liuruoze
// Reference:	Mastering OpenCV with Practical Computer Vision Projects
// Reference:	CSDN Bloger taotao1233
// Desciption:
// Defines CPlateDetect
//////////////////////////////////////////////////////////////////////////
#ifndef EASYPR_CORE_PLATEDETECT_H_
#define EASYPR_CORE_PLATEDETECT_H_

#include "easypr/core/plate_locate.h"
#include "easypr/core/plate_judge.h"

/*! \namespace easypr
    Namespace where all the C++ EasyPR functionality resides
*/
namespace easypr {

class CPlateDetect {
 public:
  CPlateDetect();

  ~CPlateDetect();

  //! Éî¶È³µÅÆ¼ì²â£¬Ê¹ÓÃÑÕÉ«Óë¶þ´ÎSobel·¨×ÛºÏ
  int plateDetect(Mat src, std::vector<CPlate>& resultVec,
                  bool showDetectArea = true, int index = 0);

  //! Õ¹Ê¾ÖÐ¼äµÄ½á¹û
  int showResult(const Mat& result);

  //! ×°ÔØSVMÄ£ÐÍ
  void LoadSVM(std::string s);

  //! Éú»îÄ£Ê½Óë¹¤ÒµÄ£Ê½ÇÐ»»
  inline void setPDLifemode(bool param) { m_plateLocate->setLifemode(param); }

  //! ÊÇ·ñ¿ªÆôµ÷ÊÔÄ£Ê½
  inline void setPDDebug(bool param) { m_plateLocate->setDebug(param); }

  //! »ñÈ¡µ÷ÊÔÄ£Ê½×´Ì¬
  inline bool getPDDebug() { return m_plateLocate->getDebug(); }

  //! ÉèÖÃÓë¶ÁÈ¡±äÁ¿
  inline void setGaussianBlurSize(int param) {
    m_plateLocate->setGaussianBlurSize(param);
  }
  inline int getGaussianBlurSize() const {
    return m_plateLocate->getGaussianBlurSize();
  }

  inline void setMorphSizeWidth(int param) {
    m_plateLocate->setMorphSizeWidth(param);
  }
  inline int getMorphSizeWidth() const {
    return m_plateLocate->getMorphSizeWidth();
  }

  inline void setMorphSizeHeight(int param) {
    m_plateLocate->setMorphSizeHeight(param);
  }
  inline int getMorphSizeHeight() const {
    return m_plateLocate->getMorphSizeHeight();
  }

  inline void setVerifyError(float param) {
    m_plateLocate->setVerifyError(param);
  }
  inline float getVerifyError() const {
    return m_plateLocate->getVerifyError();
  }
  inline void setVerifyAspect(float param) {
    m_plateLocate->setVerifyAspect(param);
  }
  inline float getVerifyAspect() const {
    return m_plateLocate->getVerifyAspect();
  }

  inline void setVerifyMin(int param) { m_plateLocate->setVerifyMin(param); }
  inline void setVerifyMax(int param) { m_plateLocate->setVerifyMax(param); }

  inline void setJudgeAngle(int param) { m_plateLocate->setJudgeAngle(param); }

  inline void setMaxPlates(int param) { m_maxPlates = param; }
  inline int getMaxPlates() const { return m_maxPlates; }

 private:
  //! ÉèÖÃÒ»·ùÍ¼ÖÐ×î¶àÓÐ¶àÉÙ³µÅÆ
  int m_maxPlates;

  //! ³µÅÆ¶¨Î»
  CPlateLocate* m_plateLocate;
};

} /*! \namespace easypr*/

#endif  // EASYPR_CORE_PLATEDETECT_H_