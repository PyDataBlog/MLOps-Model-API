import { exec } from "child_process"
import test from "tape"
import cliBin from "./utils/cliBin"

test("--watch error if no input files", (t) => {
  exec(
    `${ cliBin }/testBin --watch`,
    (err, stdout, stderr) => {
      t.ok(
        err,
        "should return an error when <input> or <output> are missing when " +
          "`--watch` option passed"
      )
      t.ok(
        stderr.includes("--watch requires"),
        "should show an explanation when <input> or <output> are missing when" +
          " `--watch` option passed"
      )

      t.end()
    }
  )
})
