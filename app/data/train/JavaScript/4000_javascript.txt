/* eslint-disable */
// not run locally - here for reference

function pageFunction(context) {
  // called on every page the crawler visits, use it to extract data from it
  var $ = context.jQuery;
  var result = {
      constituency: $('#commons-constituency').text(),
      fullName: $('#commons-biography-header h1').text(),
      party: $('#commons-party').text(),
      email: $('#ctl00_ctl00_FormContent_SiteSpecificPlaceholder_PageContent_addParliamentaryAddress_rptAddresses_ctl00_hypEmailAddress').text(),
      parlTel: $('#ctl00_ctl00_FormContent_SiteSpecificPlaceholder_PageContent_addParliamentaryAddress_rptAddresses_ctl00_pnlTelephone').text(),
      conAddress: $('#ctl00_ctl00_FormContent_SiteSpecificPlaceholder_PageContent_addConstituencyAddress_rptAddresses_ctl00_pnlAddress').text(),
      conTel: $('#ctl00_ctl00_FormContent_SiteSpecificPlaceholder_PageContent_addConstituencyAddress_rptAddresses_ctl00_pnlTelephone').text().slice(5)
  };
  $('.social-media li').each(function() {
      const type = $(this).find('span').text().slice(0,-1).toLowerCase();
      console.log(type);
      const link = $(this).find('a').attr('href');
      console.log(link);
      result[type] = link;
  });
  
  
  return result;
}