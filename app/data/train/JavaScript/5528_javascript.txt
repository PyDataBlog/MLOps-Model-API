casper.test.begin('BAS GeoMap Features site shows a home page and has 1 or more Features', 5, function suite(test) {
    casper.start("https://geomap-features.web.bas.ac.uk", function() {
        // Basic checks
        test.assertTitle("BAS GeoMap Features", "homepage title is the one expected");
        test.assertExists('.page-header h1', "there is a main header on the homepage");

        // View Features button
        test.assertExists('.page-header h1', "there is a main header on the homepage");
        var featreButtonText = casper.fetchText('.btn.btn-primary.btn-lg.btn-bsk.btn-bsk-primary');
        test.assertMatch(featreButtonText, /^View all [1-9]\d* Features/, 'the view features button has a count of one or more features');

        // Click button to do next tests
        casper.click('.btn.btn-primary.btn-lg.btn-bsk.btn-bsk-primary')
    });

    casper.then(function() {
        test.assertTitle("Index of Features", "features index title is the one expected");
    });

    casper.run(function() {
        test.done();
    });
});
