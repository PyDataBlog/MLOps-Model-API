require "src/module/json_util"
require "src/util/random"
require "src/util/table_util"

local class = require "lib/middleclass"
Enviroment = class("Enviroment")

function Enviroment:initialize(climate, biome, temperature, relief, atmosphere, fauna, flora, ores)
     self._climate = climate -- "tropical", "temperate", "polar", "desert"
     self._biome = biome -- "aquatic", "tundra", "forests", "grasslands", "deserts"
     self._temperature = temperature -- range

     self._relief = relief -- list
     --[[
          relief.amount = percentage
          relief.adaptationBonus = (+/-)value
     ]]
     self._atmosphere = atmosphere -- list
     --[[
          gas.amount = percentage
          gas.adaptationBonus = (+/-)value
     ]]
     self._fauna = fauna --list
     --[[
          animal.aggressiveness = "few", "much", "very much"
          animal.amount = percentage
          animal.resourceType = "food", "feedstock", "nothing"
          animal.adaptationBonus = (+/-)value
     ]]
     self._flora = flora --list
     --[[
          plant.amount = percentage
          plant.resourceType = "feedstock", "food", "nothing"
          plant.adaptationBonus = (+/-)value
     ]]
     self._ores = ores --list
     --[[
          ore.amount = percentage
          ore.moneyValue = value
          ore.dangerToExtract = "high", "medium", "low"
          ore.adaptationBonus = (+/-)value
     ]]
end

function Enviroment.static:load(table)
	local climate = table["enviromentClimate"]
     local biome = table["enviromentBiome"]
     local temperature = table["enviromentTemperature"]
     local relief = table["enviromentRelief"]
     local atmosphere = table["enviromentAtmosphere"]
     local fauna = table["enviromentFauna"]
     local flora = table["enviromentFlora"]
     local ores = table["enviromentOres"]

	return Enviroment:new(climate, biome, temperature, relief, atmosphere, fauna, flora, ores)
end

function Enviroment:save()
	local out = {}
	out["enviromentClimate"] = self._climate
     out["enviromentBiome"] = self._biome
     out["enviromentTemperature"] = self._temperature
     out["enviromentRelief"] = self._relief
     out["enviromentAtmosphere"] = self._atmosphere
     out["enviromentFauna"] = self._fauna
     out["enviromentFlora"] = self._flora
     out["enviromentOres"] = self._ores

	return out
end
