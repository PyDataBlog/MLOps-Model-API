-- vars
resetAfterSeconds = 1800
logging=false 
function timedifference(s)
   year = string.sub(s, 1, 4)
   month = string.sub(s, 6, 7)
   day = string.sub(s, 9, 10)
   hour = string.sub(s, 12, 13)
   minutes = string.sub(s, 15, 16)
   seconds = string.sub(s, 18, 19)
   t1 = os.time()
   t2 = os.time{year=year, month=month, day=day, hour=hour, min=minutes, sec=seconds}
   difference = os.difftime (t1, t2)
   return difference
end
commandArray = {}
time=os.time()
minutes=tonumber(os.date('%M',time))
if( (minutes==15) or (minutes==0) or (minutes==30) or (minutes==45) ) then
s = otherdevices_lastupdate['Temperature Salon']

differenceS1=timedifference(s)

 if (logging) then print("diff1: " .. differenceS1 .. "") end
 
 
if (differenceS1 > resetAfterSeconds) then
   commandArray['SendNotification']='Sensor timeout, no data received for: Temperature Salon !'  
end 
end 
return commandArray
