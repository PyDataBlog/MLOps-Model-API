--BT2-084_SPR Perfect Force Cell
local ds=require "expansions.utility_dbscg"
local scard,sid=ds.GetID()
function scard.initial_effect(c)
	ds.EnableBattleAttribute(c)
	ds.AddSetcode(c,CHARACTER_CELL,SPECIAL_TRAIT_ANDROID)
	ds.AddPlayProcedure(c,COLOR_GREEN,2,5)
	--evolve
	ds.EnableEvolve(c,aux.FilterBoolFunction(Card.IsCharacter,CHARACTER_CELL),COLOR_GREEN,2,4)
	--double strike
	ds.EnableDoubleStrike(c)
	--to drop
	ds.AddSingleAutoPlay(c,0,nil,scard.tgtg,scard.tgop,DS_EFFECT_FLAG_CARD_CHOOSE,scard.tgcon)
end
scard.dragon_ball_super_card=true
scard.combo_cost=1
function scard.tgcon(e,tp,eg,ep,ev,re,r,rp)
	return ds.ldscon(aux.FilterBoolFunction(Card.IsSpecialTrait,SPECIAL_TRAIT_ANDROID))(e,tp,eg,ep,ev,re,r,rp)
		and Duel.GetMatchingGroupCount(aux.NOT(Card.IsCombo),tp,0,LOCATION_HAND,nil)>=4
end
function scard.tgtg(e,tp,eg,ep,ev,re,r,rp,chk,chkc)
	if chkc then return chkc:IsLocation(LOCATION_HAND) and chkc:IsControler(1-tp) end
	if chk==0 then return true end
	Duel.Hint(HINT_OPSELECTED,1-tp,e:GetDescription())
	local ct=Duel.GetMatchingGroupCount(aux.NOT(Card.IsCombo),tp,0,LOCATION_HAND,nil)
	Duel.Hint(HINT_SELECTMSG,1-tp,DS_HINTMSG_TODROP)
	Duel.SelectTarget(1-tp,nil,1-tp,LOCATION_HAND,0,ct-3,ct-3,nil)
end
scard.tgop=ds.ChooseSendtoDropOperation
