/*
 * Copyright (c) 2016 by Alexander Schroeder
 */
#include <agge/graphics/render_context.hpp>
#include "agge/graphics/index_buffer.hpp"

#include "directxtest_test.hpp"

using agge::graphics::index_buffer;
using agge::graphics::index_type;

namespace agge {
    namespace directx {
        class index_buffer_test : public agge::directx::directxtest_with_context
        {
        };

        TEST_F(index_buffer_test, create_and_destroy)
        {
            auto buffer = context->create_index_buffer(
                            agge::graphics::index_type::UINT32,
                            100 * sizeof(uint32_t));
            void *ptr = buffer->lock();
            ASSERT_EQ(100 * sizeof(uint32_t), buffer->size());
            memset(ptr, 0, buffer->size());
            buffer->unlock();
        }
    }
}
