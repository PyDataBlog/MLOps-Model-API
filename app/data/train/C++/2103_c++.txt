#include "vector_plot_2d.h"
#include "../graph/vector_graph_2d.h"

namespace Gnuplot {

Vector_plot_2d::Vector_plot_2d()
    // Default constructor
    : Plot_2d {Representation::TwoDVector}
{
    // Add default graph:
    this->graphs.push_back(std::make_shared<Vector_graph_2d>());
}

Vector_plot_2d::Vector_plot_2d(const std::string& file_name)
    // Specify file name of output gnuplot script
    : Plot_2d {Representation::TwoDVector, file_name}
{
    this->graphs.push_back(std::make_shared<Vector_graph_2d>(file_name));
}

void Vector_plot_2d::add_data_point(const double& x, const double& y,
                                    const double& vec_x, const double& vec_y)
{
    auto* ptr = dynamic_cast<Vector_graph_2d*>(this->graphs.front().get());
    if (ptr == nullptr) {
        throw std::runtime_error("In Vector_plot_2d::add_data_point: No graph accessible");
    }
    ptr->add_data_point(x, y, vec_x, vec_y);  // Have Graph handle Data_point construction
}

}
