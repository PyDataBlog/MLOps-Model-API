;Read several character strings from the stardard input. Print a message on the screen if the first string appears as sequence in all the other strings. 

assume cs:code, ds:data, es:data
data segment public
	maxLenStr db 200
	lenStr db ?
	s db 200 dup (?)
	S2 db 100 dup (?)
	len_s2 dw ?
	printMsg db "Enter the strings: $"
	finalMsg db "First string not in every other strings$"
	gasitMsg db "First string appears in every string$"
	linieN db 10,13,'$'
data ends

code segment public
extrn compara:proc

print proc
	mov ah,09h
	int 21h
	ret
print endp

start:
	mov ax,data
	mov ds,ax
	mov es,ax 
	
	; print prompt
	lea dx, printMsg
	call print
	
	; read strings
	lea dx,maxLenStr
	mov ah,0Ah
	int 21h
	
	;add a last space to fix an ugly bug later, heh
	lea bx,s
	add bl,lenStr
	mov byte ptr [bx],32
	
	lea si,s
	lea di, s2
	cld ; go increasingly
	mov cx,0 ; get len of first string
	loop1:
		lodsb
		stosb 
		inc cx
		cmp byte ptr [si],32		;stop at first space
	jne loop1
	mov len_s2,cx
	
	cauta:
		inc si
		mov cx,len_s2	;get len
		lea di,s2
		; SI is at first chatacter already
		call compara	
		cmp al,1
		je final
		
		; didn't find it
		cmp al,0
		je mai_departe
		
		; found it
		cmp al,2
		je urm_cuvant
		
		urm_cuvant:
			inc si
			cmp byte ptr [si],32
			jne urm_cuvant
		
		
	mai_departe:
		
		mov ax, si
		sub ax,offset s	; get current index
		cmp al,lenStr
	jb cauta
	
	;print newline
	lea dx,linieN
	call print
	
	;show result
	lea dx,gasitMsg
	call print
	jmp done
	
	;not appearing in every string
	final:
		lea dx,linieN
		call print
		lea dx,finalMsg
		call print
		
	done:
	mov ax,4c00h
	int 21h
code ends
end start