.CODE
ultra_add PROC
	; RCX, RDX - a, b
	; R8 - &result (8 bytes)
	; R9 - &sign (1 byte)
	
	add rcx, rdx
	jo overflow
	mov [r8], rcx
	mov al, 1
	ret

overflow:
	cmp rdx, 0
	jl b_is_neg
	mov al, 1
	jmp return
b_is_neg:
	neg rcx
	mov al, 0
return:
	mov [r8], rcx
	mov [r9], al
	mov al, 0
	ret

ultra_add ENDP
END
