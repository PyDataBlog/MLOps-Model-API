#make_bin#    
; set entry point:
#CS=8000h#
#IP=0000h#	
#DS=0000h#  

;Este programa realiza un Hola Mundo utilizando la 
;interrupcion de Enviado del puerto UART, cada vez
;que se realiza un envio exitoso, se esperan 2ms
;y se envia el siguiente dato, cuando los datos 
;estan completos, el programa termina.
          
;Tamano de Bloque
    Tamano dw 0097H  
    
;Variables:  
    Vector0 dw 0   ;Variable de Vector0 de INTR
    Vector1 dw 0,0 ;Variable de Vector1 de INTR
    Vector2 dw 0,0 ;Variable de Vector2 de INTR
    Vector3 dw 0,0 ;Variable de Vector3 de INTR
    Vector4 dw 0,0 ;Variable de Vector4 de INTR
    Vector5 dw 0,0 ;Variable de Vector5 de INTR
    Vector6 dw 0,0 ;Variable de Vector6 de INTR
    
;Variable de Mensaje
    Mensaje db 0,0,0,0,0,0,0,0,0,0,0 

;Escribe los Vectores de Interrupcion  
    sti                  ;Se activan las INTR
    mov Vector5[0],00082h;Dir. de Salto, Vector5
    mov Vector5[2],00040h;Dir. de Salto, Vector5

;Escribe el Mensaje   
    mov Mensaje[0],'H'    
    mov Mensaje[1],'o'
    mov Mensaje[2],'l'
    mov Mensaje[3],'a'
    mov Mensaje[4],' '
    mov Mensaje[5],'M'
    mov Mensaje[6],'u'
    mov Mensaje[7],'n'
    mov Mensaje[8],'d'
    mov Mensaje[9],'o'
    mov Mensaje[10],'!'
         
;inicializacion de registros
    mov AX,00H
    mov DS,AX     ;Inicializacion de Seg DS
    mov SS,AX     ;Inicializacion de Seg SS
    mov SP,03FFH  ;Inicializacion de SP                        

;Mensajes de Inicio  
    mov CX,00AH   ;Cuenta de Datos a Enviar
    mov BX,000H   ;Base de Destino
    mov AL,Mensaje[BX];Carga el dato en AL
    out 0,AL      ;Escritura en el Puerto UART

espera:  
    jmp espera    ;Ciclo de Espera
    
;Interrupcion de FIN de escritura
    mov AL,02H    
    out 1,AL      ;Escritura en Contador
    pusha         ;WAIT
       
    inc BX        ;Incrementa la Base
    mov AL,Mensaje[BX];Carga el dato en AL
    out 0,AL      ;Escritura en el Puerto UART
    dec CX        ;Disminuye la cuenta de datos
    jcxz Final
    iret
    
              
Final: 
    mov AL,0AH   
    out 2,AL      ;Coloca 0Ah en LEDS
    hlt    
    
;Inicio de Bloque    
    Inicio dw 0027H
          