alone

macro err_ name, [msg] {
  common
  err_#name:
  call err_common
  db msg, 0
}

err_prompt:
  mov esi, .1
  call print
  mov eax, [pargc]
  mov esi, [eax+4]
  call print
  mov esi, .2
  call print
  mov eax, [pargc]
  mov esi, [eax+4]
  call print
  call err_common
  db ' --help', 10, 0
  .1 db 'Usage: ', 0
  .2 db ' [options] <source>', 10, 'for more info type ', 0
err_op:
  mov [buf], al
  mov word [buf+1], 10
  mov esi, .1
  call print
  pushd buf
  jmp err_common
  .1 db 'Undefined option -', 0
  
err_ badin, 'Error: can', "'", 't open input file', 10, 0

err_common:
  pop esi
  call print
  mov al, 1
  call exit
