#make_bin#

; set entry point:
#CS=8000h#	; same as loading segment
#IP=0000h#	; same as loading offset

;El siguiente programa genera un desplazamiento
;en el registro de leds, este se desplaza
;infinitamente con un solo led encendido de 
;izquierda a derecha.

;Tamano de Bloque
    Tamano dw 0052H 
    
;Variables: 
    Vector0 dw 0   ;Variable de Vector0 de INTR
    Vector1 dw 0,0 ;Variable de Vector1 de INTR
    Vector2 dw 0,0 ;Variable de Vector2 de INTR
    Vector3 dw 0,0 ;Variable de Vector3 de INTR
    Vector4 dw 0,0 ;Variable de Vector4 de INTR
    Vector5 dw 0,0 ;Variable de Vector5 de INTR
    Vector6 dw 0,0 ;Variable de Vector6 de INTR
    Cuenta db 0    ;Variable de Tiempo de Cuenta

;Inicializacion 
    mov AX,00H
    mov DS,AX      ;Inicializacion de Seg DS
    mov SS,AX      ;Inicializacion de Seg SS
    mov SP,03FFH   ;Inicializacion de SP
    mov Vector6[0],004BH ;Dir. de Salto, Vector6
    mov Vector6[2],0040H ;Dir. de Salto, Vector6
    mov Cuenta,0FFH      ;Velocidad de Cuenta 
    mov DX,001H    ;Valor Escrito en los LEDS
    
;Programa        
Programa:  
    cli            ;Se desactiva INTR
    ror DX,1       ;Rotacion de DX a la derecha
    mov AL,Cuenta
    out 1,AL       ;Escritura en el Contador
    pusha          ;WAIT
    mov AX,DX      
    out 2,AL       ;Escritura en registro LEDS
    sti            ;Se activa INTR
    jmp Programa   ;Salto a programa

;Rutina de Interrupcion de recepcion de DatoUART    
    in AL,0        ;Se lee el puerto UART
    mov Cuenta,AL  ;Se almacena en la variable
    iret           ;Retorno de Interrupcion
    
;Inicio de Bloque
    Inicio dw 001DH
    
    
    

