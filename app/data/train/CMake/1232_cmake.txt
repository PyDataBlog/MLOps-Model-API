# setup CPack
INCLUDE(InstallRequiredSystemLibraries)
SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "AutoCAD DWG and DXF convert to ANSYS input file")
SET(CPACK_PACKAGE_VENDOR "Nasztanovics Ferenc")
SET(CPACK_PACKAGE_VERSION_MAJOR "${dwg2ansys_MAJOR_VERSION}")
SET(CPACK_PACKAGE_VERSION_MINOR "${dwg2ansys_MINOR_VERSION}")
SET(CPACK_PACKAGE_VERSION_PATCH "${dwg2ansys_BUILD_VERSION}")
SET(CPACK_PACKAGE_INSTALL_DIRECTORY "dwg2ansys ${dwg2ansys_MAJOR_VERSION}.${dwg2ansys_MINOR_VERSION}.${dwg2ansys_BUILD_VERSION}")
SET(CPACK_SOURCE_PACKAGE_FILE_NAME
  "dwg2ansys-${dwg2ansys_MAJOR_VERSION}.${dwg2ansys_MINOR_VERSION}.${dwg2ansys_BUILD_VERSION}")
SET(CPACK_PACKAGE_DESCRIPTION_FILE "${dwg2ansys_SOURCE_DIR}/README")
SET(CPACK_RESOURCE_FILE_LICENSE "${dwg2ansys_SOURCE_DIR}/License.txt")
IF (CMAKE_SYSTEM_PROCESSOR MATCHES "unknown")
  SET (CMAKE_SYSTEM_PROCESSOR "x86")
ENDIF (CMAKE_SYSTEM_PROCESSOR MATCHES "unknown")
IF(NOT DEFINED CPACK_SYSTEM_NAME)
  SET(CPACK_SYSTEM_NAME ${CMAKE_SYSTEM_NAME}-${CMAKE_SYSTEM_PROCESSOR})
ENDIF(NOT DEFINED CPACK_SYSTEM_NAME)
IF(${CPACK_SYSTEM_NAME} MATCHES Windows)
  IF(CMAKE_CL_64)
    SET(CPACK_SYSTEM_NAME win64-${CMAKE_SYSTEM_PROCESSOR})
  ELSE(CMAKE_CL_64)
    SET(CPACK_SYSTEM_NAME win32-${CMAKE_SYSTEM_PROCESSOR})
  ENDIF(CMAKE_CL_64)
ENDIF(${CPACK_SYSTEM_NAME} MATCHES Windows)
IF(NOT DEFINED CPACK_PACKAGE_FILE_NAME)
  SET(CPACK_PACKAGE_FILE_NAME "${CPACK_SOURCE_PACKAGE_FILE_NAME}-${CPACK_SYSTEM_NAME}")
ENDIF(NOT DEFINED CPACK_PACKAGE_FILE_NAME)
SET(CPACK_PACKAGE_EXECUTABLES "dwg2ansysGui" "dwg2ansysGui")

IF(WIN32 AND NOT UNIX)
  # There is a bug in NSI that does not handle full unix paths properly. Make
  # sure there is at least one set of four (4) backlasshes.
  SET(CPACK_PACKAGE_ICON "${dwg2ansys_BINARY_DIR}\\\\icon.ico")
  SET(CPACK_NSIS_INSTALLED_ICON_NAME "bin\\\\dwg2ansysGui.exe")
  SET(CPACK_NSIS_DISPLAY_NAME "${CPACK_PACKAGE_INSTALL_DIRECTORY} an AutoCAD DWG and DXF convert tool to ANSYS")
  SET(CPACK_NSIS_HELP_LINK "http:\\\\\\\\naszta.hu\\\\dwg2ansys.html")
  SET(CPACK_NSIS_URL_INFO_ABOUT "http:\\\\\\\\naszta.hu\\\\dwg2ansys.html")
  SET(CPACK_NSIS_CONTACT "naszta@naszta.hu")
  SET(CPACK_NSIS_MODIFY_PATH OFF)
ELSE(WIN32 AND NOT UNIX)
  SET(CPACK_STRIP_FILES "")
  SET(CPACK_SOURCE_STRIP_FILES "")
  IF (NOT APPLE)
    SET(CPACK_GENERATOR TGZ)
  ENDIF (NOT APPLE)
ENDIF(WIN32 AND NOT UNIX)
INCLUDE(CPack)


