file(MAKE_DIRECTORY ${CMAKE_BINARY_DIR}/thirdparty)

ExternalProject_Add(
    OpenSSL
    URL https://github.com/openssl/openssl/archive/OpenSSL_1_0_2l.tar.gz

    CONFIGURE_COMMAND ./config
        --prefix=${CMAKE_BINARY_DIR}/thirdparty
        --openssldir=${CMAKE_BINARY_DIR}/thirdparty
        no-shared
        no-unit-test
        -fPIC
    BUILD_COMMAND make
    INSTALL_COMMAND make install
    BUILD_IN_SOURCE 1
)

list(APPEND CMAKE_PREFIX_PATH ${CMAKE_BINARY_DIR}/thirdparty)
