#
# External build for GLEW
#
if(NOT DEFINED GLEW_TARGET)
    set(GLEW_TARGET ${3RDPARTY_INSTALL_PREFIX}/glew)
endif()

ExternalProject_Add(GLEW
    URL http://downloads.sourceforge.net/project/glew/glew/${GLEW_VERSION}/glew-${GLEW_VERSION}.tgz
    URL_HASH MD5=${GLEW_HASH}
    PREFIX ${3RDPARTY_BUILD_PREFIX}/GLEW
    CONFIGURE_COMMAND cp -pR ../GLEW/. .
    BUILD_COMMAND make all ${3RDPARTY_GLOBAL_MAKE_ARGS}
    UPDATE_COMMAND ""
    INSTALL_COMMAND GLEW_DEST=${GLEW_TARGET} make install
)


list(APPEND GLEW_CMAKE_ARGS
    "-DGLEW_ROOT:PATH=${GLEW_TARGET}"
    "-DGLEW_INCLUDE_DIR:PATH=${GLEW_TARGET}/include"
    "-DGLEW_LIBRARY_DIR:PATH=${GLEW_TARGET}/lib64"
)
list(APPEND EXT_CMAKE_ARGS "${GLEW_CMAKE_ARGS}")

# This will export the above variables to a file as 'set()' statements

WRITE_ARGS_TO_FILE("glew" ${3RDPARTY_VARIABLE_EXPORT_DIR} "${GLEW_CMAKE_ARGS}")