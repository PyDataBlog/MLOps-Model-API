function mysum(A,d)
    newsize = Base.reduced_dims(A,d)
    B = similar(A, newsize)
    step = stride(A,d)

    for i = 1:length(B)
        lower = 1 + ((i-1) % step) + div(i-1,step) * stride(A,d+1)
        upper = lower + step * (size(A,d)-1)
        B[i] = sum(A[lower:step:upper])
    end

    return B
end

A = reshape(collect(1:720), 6,5,4,3,2)

for k=1:ndims(A)
    @assert isapprox(mysum(A,k), sum(A,k))
end
