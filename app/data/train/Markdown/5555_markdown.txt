---
author: admin
comments: true
date: 2011-03-22 14:16:57+00:00
layout: post
slug: objectivec_callback
title: Objective-CでCallback
categories: プログラミング
tags: Objective-C
---

イベントディスパッチャーを使ってイベント処理する方法について。
今までプロパティやセッターやらで処理してたけど、
イベント処理の方がセンスがよさそうなのでそっちでやる。

Callbackの受け取り側では以下を定義
{% highlight objectivec %}
//ViewDidLoadなりの中で初期化するときに呼んでやる
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(recvCallback:) name:@"MyEvent" object:nil]; 

//実際にコールバックを受け取る部分
- (void) recvCallback: (NSNotification*) note{
   NSLog(@"recvCallback");  
    NSLog(@"%@", [note object]);
    NSLog(@"recvCallback end");    
}
{% endhighlight %}

Callbackの送り側では以下を実行する
{% highlight objectivec %}
    NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    // イベントをポスト。argはイベントハンドラに渡す引数
    [center postNotificationName:@"MyEvent" object: @"hoge"];
{% endhighlight %}

[サンプル](/img/2011/03/SimpleCallback.zip)
