FROM sumpfgottheitlocal/centos7
MAINTAINER Florian Sachs "florian.sachs@gmx.at"

RUN yum -y localinstall http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm
RUN yum install openssl -y
RUN yum install --disablerepo="*" --enablerepo=nginx install nginx -y
RUN yum clean all

ADD logstash.conf /etc/logstash.conf
ADD logstash.pattern /etc/logstash.pattern

ADD nginx.conf /etc/nginx/nginx.conf

EXPOSE 80 443

VOLUME ["/logs", "/var/cache/nginx", "/etc/nginx/conf.d"]
CMD ["/usr/sbin/nginx", "-g", "daemon off;"]

