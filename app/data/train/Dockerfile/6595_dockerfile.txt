FROM php:5.6-apache

RUN apt-get update && \
    apt-get install -y git nodejs npm php-pclzip libzip2 zlib1g-dev php5-xdebug debhelper \
    php5-dev binutils dh-apparmor dpkg dpkg-dev file html2text man-db perl po-debconf dh-make \
    autoconf automake libssl-dev libtool php5-common shtool ucf libc6 php5-cli

RUN npm install -g gulp gulp-cli typescript typings bower && \
    a2enmod rewrite && \
    curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/bin/ --filename=composer && \
    echo "zend_extension=/usr/lib/php5/20131226/xdebug.so" > /usr/local/etc/php/conf.d/xdebug.ini && \
    ln -s /usr/bin/nodejs /usr/bin/node

WORKDIR "/var/www/html"
EXPOSE 80

ADD "./" "/var/www/html"
