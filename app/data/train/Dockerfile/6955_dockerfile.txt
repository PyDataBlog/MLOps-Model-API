FROM ppmp-ubuntu

ARG VERSION
ARG RELEASE
# Add metadata about image
LABEL Name="MAC"
LABEL Version="${VERSION}"
LABEL Release="${RELEASE}"
LABEL Description="An integrative pipeline developed to correct potentially \
mis-annotated multi-nucleotide variants (MNVs)."

# Add dependencies
RUN apt-get update \
    && apt-get install -y --fix-missing \
       curl \
       perl \
       libipc-system-simple-perl \
       libbio-samtools-perl \
    && apt-get clean \
    && apt-get purge 

# Fetch & build
ENV SFORGE=https://sourceforge.net/projects/mnvannotationcorrector/files
RUN curl -SL ${SFORGE}/MAC_v${VERSION}.tar.gz | \ 
       tar -C /opt -xz \
    && mv /opt/mac1.2 /opt/mac

# Add to PATH
ENV PATH=${PATH}:/opt/mac

# Default command
ENTRYPOINT ["/opt/mac/MAC_v1.2.pl"]

