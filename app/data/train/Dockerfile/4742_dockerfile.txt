# install Squash-TM 1.14.2 on Alpine 
# use Java7 and H2 embedded database
# connect with http://<ipadress>:8080/squash, user admin/admin

FROM openjdk:7-alpine
MAINTAINER Jean-Paul Carmona "contact@jpca.fr"

LABEL RUN='docker run --name squash -d -p 8080:8080 $IMAGE'

RUN apk add --no-cache curl gzip tar

RUN cd /srv \ 
	&& curl -L http://www.squashtest.org/telechargements/send/13-version-stable/245-stm-1142-targz | gzip -d -c | tar x 
  
WORKDIR /srv/squash-tm/bin
EXPOSE 8080

VOLUME /srv/squash-tm/conf
VOLUME /srv/squash-tm/data
VOLUME /srv/squash-tm/plugins

VOLUME /srv/squash-tm/luceneindexes
VOLUME /srv/squash-tm/logs
VOLUME /srv/squash-tm/tomcat-home/logs/

CMD ["sh","./startup.sh"]
