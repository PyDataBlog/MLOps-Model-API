##9.3 - custom script - display folders with more than XXX MB total in them
#- input - path and look only first child folders
#        - size in MB to look for
#- ouput - directories with more then $SIZE in them

function DisplayFolderBySize($rootDir, $minimumSizeInMB){
   
}

$global:dir2SizeMap = @{}

function CalculatDirSize($dir, $log){
   #$dirPathNew = $dirPath.Replace('$','`$')
   #$dir = Get-Item $dirPathNew
   
   $totalSize = 0
   
   #files sizes
   $sizeOfFiles = $dir | Measure-Object -Property Length -sum -ErrorAction SilentlyContinue 
   $totalSize += $sizeOfFiles.Sum
 
   #subdir sizes
   if($log){Write-Host "$($dir.FullName)"}
   
   $childDirs = $dir.GetDirectories() | ?{($_.Attributes -notlike "*system*") -or ($_.Attributes -notlike "*hidden*")}
   if($childDirs -ne $null){ 
      foreach($childDir in $childDirs){
         $totalSize += CalculatDirSize $childDir #.FullName
      }
   }
   
   $global:dir2SizeMap[$dir.FullName] = $totalSize
   
   return $totalSize
}