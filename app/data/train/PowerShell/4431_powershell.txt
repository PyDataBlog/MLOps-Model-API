param (
)

Set-StrictMode -Version Latest
$ErrorActionPreference = "Stop"
$PSDefaultParameterValues['*:ErrorAction']='Stop'

$scriptDirectory = Split-Path -Path $MyInvocation.MyCommand.Definition -Parent

# Load libraries in "lib" folder
Get-ChildItem -Recurse "$($scriptDirectory)\BoxTurtlePs\Private" -Filter *.ps1 | 
Foreach-Object {
	if(-not ($($_.FullName) -match ".Tests.")) {
		#Write-Host "### Loading powershell $($_.FullName)"
		try {
			. ($_.FullName)
		}
		catch {
			Write-Host "Error while loading supporting PowerShell Scripts " $_ 
			exit
		}
	}
}

# Load libraries in "template" folder
Get-ChildItem -Recurse "$($scriptDirectory)\BoxTurtlePs\Public" -Filter *.ps1 | 
Foreach-Object {
	if(-not ($($_.FullName) -match ".Tests.")) {
		#Write-Host "### Loading powershell $($_.FullName)"
		try {
			. ($_.FullName)
		}
		catch {
			Write-Host "Error while loading supporting PowerShell Scripts " $_ 
			exit
		}
	}
}

