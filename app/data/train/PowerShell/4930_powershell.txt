
<#
=========================================================

Name: Abdul Hannan Ijaz
Date: 2019-07-23
Desc: ## Azure is case sensistive so make sure azure folder names have same casing
=========================================================
#>
function uploadToAzureBlob{
param (

[string]$AZ_UploadFilePath,

#azure configs
[string]$AZ_AccountName ,
[string]$AZ_ContainerName, ### this should be main folder name of azure
[string]$AZ_SASToken ,
[string]$AZ_DestinationFolder## this should be name of remaining hierarchy

)

$AZ_UploadFilePathDIR = get-item $AZ_UploadFilePath
### get azure stoage context using token and account name
$ctx = New-AzureStorageContext -sasToken $AZ_SASToken -StorageAccountName $AZ_AccountName

 
write-host "copying "$AZ_UploadFilePathDIR.FullName " to -> $AZ_ContainerName/$AZ_DestinationFolder/"$AZ_UploadFilePathDIR.name.ToLower()

Set-AzureStorageBlobContent -Context $ctx -Container $AZ_ContainerName -Blob ($AZ_DestinationFolder + "/"+ $AZ_UploadFilePathDIR.Name.ToLower()) -File $AZ_UploadFilePathDIR.FullName -Force -Verbose 


}