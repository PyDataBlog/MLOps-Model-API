APPNAME = emet

.PHONY: all;
all: $(APPNAME) test;

build/Makefile: build/CMakeLists.txt
	@cd build ; CXX=$(CXX) cmake . > /dev/null

$(APPNAME): build/Makefile
	@cmake --build build --config Release > /dev/null

build: $(APPNAME);

test: $(APPNAME)
	@build/release/$(APPNAME) test/general.em

clean:
	@cd build ; ls | grep -v -E 'CMakeLists.txt' | xargs rm -rf
