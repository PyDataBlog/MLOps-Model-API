SHELL=/bin/bash
init : clean
	composer -vv self-update
	composer -vv global update

version :
	php --version
	composer --version

validate:
	composer -vv validate --strict -vv --with-dependencies

clean:
	if [ -d "var/cache/test" ]; then rm -r var/cache/test; fi

stan:
	phpstan analyse src tests --level max

cs:
	php-cs-fixer fix

############################################
#               T R A V I S                #
############################################

# Release
# =======
std:
	composer remove symfony/lts --no-update
lts2:
	composer require symfony/lts:^2 --no-update
lts3:
	composer require symfony/lts:^3 --no-update
# dev or stable
# =============
dev:
	composer config minimum-stability dev
	composer require symfony/translation --no-update
stable:
	composer config minimum-stability stable
# lastest or lowest
# =================
lowest:
	composer require symfony/framework-bundle:^4.0 --no-update
	composer update
	composer update --prefer-lowest
lastest:
	composer update
# test
# ====
test:
	vendor/bin/simple-phpunit -v
cover-text:
	vendor/bin/simple-phpunit -v --coverage-text
cover: clean
	vendor/bin/simple-phpunit --coverage-html var/test-coverage
