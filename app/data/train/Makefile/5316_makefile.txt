# Makefile:
# 1. manages the dotfiles, `save` and `apply` changes
# 2. takes care of installing a new system's configuration

# without trailing slash
dotfilePath=$(shell pwd)

info:
	cat $(dotfilePath)/Makefile

apply: bash-apply vim-apply emacs-apply arch-apply i3-apply
save: bash-save vim-save emacs-save arch-save i3-save
update-mac:
	sudo softwareupdate -i -a
	brew update
	brew upgrade
	brew cleanup
	npm update npm -g
	npm update -g
	sudo gem update
install-mac: install-homebrew install-homebrew-packages install-ruby-gems apply update-mac

# apply change to local machine
bash-apply:
	cp .bash_profile ~/.bash_profile
	cp .inputrc ~/.inputrc
	cp .bashrc ~/.bashrc
	cp .bash_aliases ~/.bash_aliases
vim-apply:
	cp .vimrc ~/.vimrc
emacs-apply:
	cp -r .emacs.d ~/.emacs.d
arch-apply:
	cp .xinitrc ~/.xinitrc
	cp .xserverrc ~/.xserverrc
	cp .Xresources ~/.Xresources
	cp .xprofile ~/.xprofile
i3-apply:
	cp -r i3 ~/.config/

# save change to .dotfiles
bash-save:
	cp ~/.bash_profile $(dotfilePath)/.bash_profile
	cp ~/.inputrc $(dotfilePath)/.inputrc
	cp ~/.bashrc $(dotfilePath)/.bashrc
	cp ~/.bash_aliases $(dotfilePath)/.bash_aliases
vim-save:
	cp ~/.vimrc $(dotfilePath)/.vimrc
emacs-save:
	cp ~/.emacs.d/init.el $(dotfilePath)/.emacs.d/init.el
arch-save:
	cp ~/.xinitrc $(dotfilePath)/.xinitrc
	cp ~/.xserverrc $(dotfilePath)/.xserverrc
	cp ~/.Xresources $(dotfilePath)/.Xresources
	cp ~/.xprofile $(dotfilePath)/.xprofile
i3-save:
	cp -r ~/.config/i3 $(dotfilePath)

# installs (usually for a fresh new setup)
install-homebrew:
	ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
install-homebrew-packages:
	brew update
	brew upgrade --all
	brew install wget
	brew install git
	brew install bash-completion
	brew install node
	brew install tree
	brew cleanup
	brew doctor

install-ruby-gems:
	sudo gem update --syste
	sudo gem install bundler
	sudo gem install susy

# END of Makefile
