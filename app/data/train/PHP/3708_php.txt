<?php
function error($code, $msg, $file, $line) {
	//为了安全起见，不暴露出真实物理路径，下面两行过滤实际路径
	$file = str_replace(getcwd(), "", $file);
	$msg = str_replace(getcwd(), "", $msg);
	switch ($code) {
		case E_USER_ERROR :
			$msg = "自定义ERROR——".$msg;
			break;
		case E_USER_WARNING :
			$msg = "自定义WARNING——".$msg;
			break;
		case E_USER_NOTICE :
			$msg = "自定义NOTICE——".$msg;
			break;
		case E_ERROR :
			$msg = "致命错误——".$msg;
			break;
		case E_WARNING :
			$msg = "WARNING——".$msg;
			break;
		case E_NOTICE :
			$msg = "NOTICE——".$msg;
			break;
		default :
			$msg = "未知错误类型——".$msg;
			break;
	}
	echo '<div style="width:80%;border:1px solid red; margin:auto auto 15px auto; background:#FFFFFF;">';
	echo '<div style="background:orange;font-size:9.5pt;padding:0px 5px;border-bottom:1px dashed red;"><b>错误信息：</b>' . $msg . "</div>";
	echo '<div style="font-size:9.5pt;padding:0px 5px;border-bottom:1px dashed red;"><b>错误代码：</b>' . $code . "</div>";
	echo '<div style="font-size:9.5pt;padding:0px 5px;border-bottom:1px dashed red;"><b>报错文件：</b>' . $file . "</div>";
	echo '<div style="font-size:9.5pt;padding:0px 5px;"><b>报错行号：</b>' . $line . "</div></div>";
	/* Don't execute PHP internal error handler */
	return true;
}
