<?php
/**
 * ./app/yiic.php
 *
 * @author Jacob Morrison <jacob@infinitecascade.com>
 * @package cascade
 */
ini_set('display_errors', true);
define('YII_DEBUG', true);
// Load environment
$env = dirname(dirname(__FILE__)).DIRECTORY_SEPARATOR.'app'.DIRECTORY_SEPARATOR.'config'.DIRECTORY_SEPARATOR.'env.php';
if (!file_exists($env)) {
	throw new Exception("Environment file does not exist ($env).");
}
require_once $env;

// Find configuration file
$config =  INFINITE_APP_ENVIRONMENT_PATH . DIRECTORY_SEPARATOR . 'console.php';

if (!file_exists($config)) {
	throw new Exception("Environment is not set up correctly ($config).");
}

// Include Yii
if (!defined('YII_VERSION')) { define('YII_VERSION', 'yii-latest'); }
$yii = dirname(__FILE__).DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR.'yii'.DIRECTORY_SEPARATOR.YII_VERSION.DIRECTORY_SEPARATOR.'framework'.DIRECTORY_SEPARATOR.'yii.php';
require_once $yii;

Yii::setPathOfAlias('cascade', dirname(dirname(__FILE__)).DIRECTORY_SEPARATOR.'app');
Yii::setPathOfAlias('infiniteCore', INFINITE_CORE_PATH);

$yiic = dirname(__FILE__).DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR.'yii'.DIRECTORY_SEPARATOR.YII_VERSION.DIRECTORY_SEPARATOR.'framework'.DIRECTORY_SEPARATOR.'yiic.php';
require_once $yiic;


if (!class_exists('Yii')) {
	throw new Exception("Where is Yii? I thought it was at {$yii}");
}
