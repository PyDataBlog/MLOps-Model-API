
<?php
defined('BASEPATH') OR exit('No direct script access allowed');
$this->load->view('layout/header'); 
$fname = isset($cust[0])? $cust[0]->name : '';
$ntn = isset($cust[0])? $cust[0]->ntn : '';
$adress= isset($cust[0])? $cust[0]->adress : '';
$email = isset($cust[0])? $cust[0]->email : '';
$phone = isset($cust[0])? $cust[0]->phone : '';
$contact1 = isset($cust[0])? $cust[0]->contact1 : '';
$contact1_name = isset($cust[0])? $cust[0]->contact1_name: '';
$contact1_email = isset($cust[0])? $cust[0]->contact1_email : '';
$contact2 = isset($cust[0])? $cust[0]->contact2 : '';
$contact2_name = isset($cust[0])? $cust[0]->contact2_name : '';
$contact2_email = isset($cust[0])? $cust[0]->contact2_email : '';
$contact3 = isset($cust[0])? $cust[0]->contact3 : '';
$contact3_name= isset($cust[0])? $cust[0]->contact3_name : '';
$contact3_email = isset($cust[0])? $cust[0]->contact3_email : '';
$contact4 = isset($cust[0])? $cust[0]->contact4 : '';
$contact4_name = isset($cust[0])? $cust[0]->contact4_name : '';
$contact4_email = isset($cust[0])? $cust[0]->contact4_email : '';
$citySel= isset($desig[0])? $desig[0]->city : '';

//$cityId = array('id'=>'cityId','type'=>'text','class'=>'col-xs-10 col-sm-5','value'=>'','name'=>'cityId','placeholder'=>'City ID' );
$fname = array('id'=>'fname','type'=>'text','class'=>'col-xs-10 ','value'=>$fname,'name'=>'name','placeholder'=>'Company Name' );
$ntn = array('id'=>'lname','type'=>'text','class'=>'col-xs-10 ','value'=>$ntn,'name'=>'ntn','placeholder'=>'NTN' );
$adress= array('id'=>'adress','type'=>'text','class'=>'col-xs-10','value'=>$adress,'name'=>'adress','placeholder'=>'Home Address' );
$email= array('id'=>'email','type'=>'text','class'=>'col-xs-10','value'=>$email,'name'=>'email','placeholder'=>'Email Address' );
$phone = array('id'=>'phone','type'=>'text','class'=>'col-xs-10','value'=>$phone,'name'=>'phone','placeholder'=>'Mobile Number' );
$contact1 = array('id'=>'contact1 ','type'=>'text','class'=>'col-xs-10','value'=>$contact1,'name'=>'contact1','placeholder'=>'Contact Person' );
$contact1_name = array('id'=>'contact1_name ','type'=>'text','class'=>'col-xs-10','value'=>$contact1_name,'name'=>'contact1_name','placeholder'=>'Contact Person Name' );
$contact1_email = array('id'=>'contact1_email ','type'=>'text','class'=>'col-xs-10','value'=>$contact1_email,'name'=>'contact1_email','placeholder'=>'Contact Person Email' );
$cityName = array('id'=>'cityName','type'=>'text','class'=>'col-xs-10','value'=>$citySel,'name'=>'city','placeholder'=>'City Name' );

?>

<div id="container">
    <div class="main-content">
        <div class="main-content-inner">
            <div class="breadcrumbs" id="breadcrumbs">
                <script type="text/javascript">
                    try {
                        ace.settings.check('breadcrumbs', 'fixed')
                    } catch (e) {
                    }
                </script>

                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a>Home</a>
                    </li>

                    <li>
                        <a>Admin</a>
                    </li>
                    <li class="active">
                        <a href="<?php  echo site_url('Person/customerManage'); ?>">Create Customer</a>
                    </li>
                    <li class="active">Edit Customer</li>
                </ul><!-- /.breadcrumb -->

             
            </div>

            <div class="page-content">
                <div class="page-header">
                    <h1>
                        Customer Management
                        <small>
                            <i class="ace-icon fa fa-angle-double-right"></i>
                            Edit Customer
                        </small>

                    </h1>
                </div><!-- /.page-header -->
                <?php 
                if($this->session->flashdata('error_message'))
                {
                
                ?>

                    <div class="alert alert-danger">
                        <button data-dismiss="alert" class="close" type="button">
                            <i class="ace-icon fa fa-times"></i>
                        </button>

                        <strong>
                            <i class="ace-icon fa fa-times"></i>
                            <?php
                            echo $this->session->flashdata('error_message');
                            ?>
                        </strong>

                    </div>
                <?php 
                
                }
                else if($this->session->flashdata('sucess_message'))
                {
                ?>
                        <div class="alert alert-block alert-success">
                        <button data-dismiss="alert" class="close" type="button">
                            <i class="ace-icon fa fa-times"></i>
                        </button>

                        <p>
                            <strong>
                                <i class="ace-icon fa fa-check"></i>
                               <?php
                                echo $this->session->flashdata('sucess_message');
                              ?>
                            </strong>
                            
                        </p>
                    </div>
                <?php
                }
                ?>
                <div class="row">
                    <div class="col-xs-12">
                        
                        <!-- PAGE CONTENT BEGINS -->
                        
                        <?php
                       
//                        if(!isset($id))
//                        {
//                            $id = '';
//                        }

                        $hidden = array('class'=>'form-horizontal','role'=>'form','custid'=>$id);
                        echo form_open_multipart('Person/updateCustomer',$hidden ); 
                       
                        ?>
                        <input type="hidden" name="custid" value="<?php echo $id; ?>">
                           
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> Company Name </label>

                                <div class="col-sm-12">
                                    <?php echo form_input($fname); ?>
                                </div>
                            </div>
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> NTN </label>

                                <div class="col-sm-12">
                                    <?php echo form_input($ntn); ?>
                                </div>
                            </div>
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> Home Address </label>

                                <div class="col-sm-12">
                                    <?php echo form_input($adress); ?>
                                </div>
                            </div>
                            
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1">Company Phone </label>

                                <div class="col-sm-12">
                                    <?php echo form_input($phone); ?>
                                </div>
                            </div>

                           <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> Contact Person Name</label>

                                <div class="col-sm-12">
                                    <?php echo form_input($contact1_name); ?>
                                </div>
                            </div>
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> Contact Person Email</label>

                                <div class="col-sm-12">
                                    <?php echo form_input($contact1_email); ?>
                                </div>
                            </div>
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> Contact Person Number</label>

                                <div class="col-sm-12">
                                    <?php echo form_input($contact1); ?>
                                </div>
                            </div>
                          
                            <div class="form-group col-xs-4">
                                <label class="col-sm-12" for="form-field-1"> City </label>

                                <div class="col-sm-12">
                                    <?php echo form_dropdown($cityName,$cities,$citySel);?>
                                </div>
                            </div>
                            <div class="form-group col-lg-4">
                                <label class="col-sm-12" for="form-field-1"> Company Email Address </label>

                                <div class="col-sm-12">
                                    <?php echo form_input($email); ?>
                                </div>
                            </div>
                            <div class="form-group col-lg-12">
                                <h3 class="header smaller lighter">Contact Persons<small>(Optional )</small></h3>
                                <div class="input_fields_wrap col-lg-12">
                                    <div class="form-group col-lg-12">
                                        <button type="button" class="btn btn-primary add_field_button">Add Contacts</button>
                                    </div>
 <?php // foreach ($hidden as $value) { ?>
                                    <div class="form-group col-lg-12" >
                                        <label class="col-sm-4" for="form-field-1"> Contact Person </label>
                                        <label class="col-sm-4" for="form-field-1"> Email </label>
                                        <label class="col-sm-4" for="form-field-1"> Contact Person Number </label>
                                        <div class="col-sm-4">
                                            <input class="col-lg-12" type="text" value="<?php echo $contact2_name; ?>"  name="contact_name[]"/>
                                        </div>
                                        <div class="col-sm-4">
                                            <input class="col-lg-12 " type="text" value="<?php echo $contact2_email; ?>" name="contact_email[]"/>
                                        </div>
                                        <input class="col-lg-3 dynamic-field" type="text" value="<?php echo $contact2; ?>" name="contact[]"/>
                                        <a href="#" class="col-lg-1 btn fa fa-close btn-danger  remove_field"></a>
                                    </div>                         
                                    <div class="form-group col-lg-12" >
                                        <label class="col-sm-4" for="form-field-1"> Contact Person </label>
                                        <label class="col-sm-4" for="form-field-1"> Email </label>
                                        <label class="col-sm-4" for="form-field-1"> Contact Person Number </label>
                                        <div class="col-sm-4">
                                            <input class="col-lg-12" type="text" value="<?php echo $contact3_name; ?>"  name="contact_name[]"/>
                                        </div>
                                        <div class="col-sm-4">
                                            <input class="col-lg-12 " type="text" value="<?php echo $contact3_email; ?>" name="contact_email[]"/>
                                        </div>
                                        <input class="col-lg-3 dynamic-field" type="text" value="<?php echo $contact3; ?>" name="contact[]"/>
                                        <a href="#" class="col-lg-1 btn fa fa-close btn-danger  remove_field"></a>
                                    </div>                         
                                    <div class="form-group col-lg-12" >
                                        <label class="col-sm-4" for="form-field-1"> Contact Person </label>
                                        <label class="col-sm-4" for="form-field-1"> Email </label>
                                        <label class="col-sm-4" for="form-field-1"> Contact Person Number </label>
                                        <div class="col-sm-4">
                                            <input class="col-lg-12" type="text" value="<?php echo $contact4_name; ?>"  name="contact_name[]"/>
                                        </div>
                                        <div class="col-sm-4">
                                            <input class="col-lg-12 " type="text" value="<?php echo $contact4_email; ?>" name="contact_email[]"/>
                                        </div>
                                        <input class="col-lg-3 dynamic-field" type="text" value="<?php echo $contact4; ?>" name="contact[]"/>
                                        <a href="#" class="col-lg-1 btn fa fa-close btn-danger  remove_field"></a>
                                    </div>                         
                                    
                                     <?php //  } ?>
                                </div>
                            </div>
                            <div class="modal-footer col-lg-12">
                                 <a href="<?php echo site_url('Person/customerManage'); ?>" class="btn btn-sm btn-primary pull-left">
                                    <i class="ace-icon fa fa-chevron-left"></i>
                                    Back
                                </a>
                                <button type="submit" class="btn btn-sm btn-primary">
                                    <i class="ace-icon fa fa-pencil"></i>
                                    Update
                                </button>
                            </div>
                        
                        <?php echo form_close(); ?>
                    </div>
                </div>
                <!--USER DATA--->
                 <div class="row">
                    <div class="col-xs-12">
                        <h3 class="header smaller lighter blue">Customer Record</h3>

                        <div class="clearfix">
                            <div class="pull-right tableTools-container"></div>
                        </div>


                        <!-- div.table-responsive -->

                        <!-- div.dataTables_borderWrap -->
                        <div>
                            <table id="customer_table" class="display" cellspacing="0" width="100%" >
                                <thead>
                                    <tr>
                                      
                                        <th class="center">Sr. No.</th>
                                        <th class="center">Company Name</th>
                                        <th class="center">NTN</th>
                                        <th class="center">City</th>
                                        <th class="center">Email Address</th>
                                        <th class="center">Home Address</th>
                                        <th class="center">Company Phone</th>
                                        <th class="center">Contact Person Name</th>
                                        <th class="center">Contact Person Email</th>
                                        <th class="center">Contact Person Number</th>
                                        <th class="center">Action</th>
                                    </tr>
                                </thead>

                                <tbody>
                                <?php 
                                $count = 0;
                                foreach ($customers as $customer) 
                                {             
                                
                                ?>
                                    <tr>
                                        <td class="hidden-480 center">
                                            <?php echo $count++; ?>
                                        </td>
                                        <td class="hidden-480 center"><?php echo $customer->name; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->ntn; ?></td>
                                        <td class="hidden-480 center"><?php echo $cities[$customer->city]; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->email; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->adress; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->phone; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->contact1_name; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->contact1_email; ?></td>
                                        <td class="hidden-480 center"><?php echo $customer->contact1; ?></td>
                                        <td class="hidden-480 center">
                                            <div class="hidden-sm hidden-xs action-buttons">
                                            
                                                <a class="green" href="<?php echo base_url();?>Person/updateCustomer/<?php echo $customer->id; ?>" >
                                                    <i class="ace-icon fa fa-pencil bigger-130"></i>
                                                </a>

                                                <a class="red" href="<?php echo base_url();?>Person/deleteCustomer/<?php echo $customer->id; ?>">
                                                    <i class="ace-icon fa fa-trash-o bigger-130"></i>
                                                </a>
                                            </div>

                                            <div class="hidden-md hidden-lg">
                                                <div class="inline pos-rel">
                                                    <button class="btn btn-minier btn-yellow dropdown-toggle" data-toggle="dropdown" data-position="auto">
                                                        <i class="ace-icon fa fa-caret-down icon-only bigger-120"></i>
                                                    </button>

                                                    <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">
                                                        <li>
                                                            <a href="#" class="tooltip-info" data-rel="tooltip" title="View">
                                                                <span class="blue">
                                                                    <i class="ace-icon fa fa-search-plus bigger-120"></i>
                                                                </span>
                                                            </a>
                                                        </li>

                                                        <li>
                                                            <a href="#" class="tooltip-success" data-rel="tooltip" title="Edit">
                                                                <span class="green">
                                                                    <i class="ace-icon fa fa-pencil-square-o bigger-120"></i>
                                                                </span>
                                                            </a>
                                                        </li>

                                                        <li>
                                                            <a href="#" class="tooltip-error" data-rel="tooltip" title="Delete">
                                                                <span class="red">
                                                                    <i class="ace-icon fa fa-trash-o bigger-120"></i>
                                                                </span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                <?php } ?>
                                  

                                </tbody>
                            </table>
                        </div>
                    </div>

                        <!-- PAGE CONTENT ENDS -->
                    </div><!-- /.col -->
                 </div><!-- /.row -->
		</div><!-- PAGE CONTENT ENDS -->
        </div><!-- /.col -->
    </div><!-- /.row -->
</div><!-- /.page-content -->
</div>
</div><!-- /.main-content -->

</div>

<?php $this->load->view('layout/footer'); ?>
