import * as React from 'react';
import { Route, Redirect, RouteProps, RouteComponentProps } from 'react-router-dom';

export const PrivateRoute = ({ component, ...rest }: RouteProps) => {
    if (!component) {
        throw Error("component is undefined");
    }
    let session = localStorage.getItem('session');
    const Component = component;
    const render = (props: RouteComponentProps<any>): React.ReactNode => {
        return session != null && session != '' && session != undefined && session != '{}' ?
            <Component {...rest} {...props} /> :
            <Redirect {...rest} to={{ pathname: '/auth' }} />
    };

    return (<Route {...rest} render={render} />);
}