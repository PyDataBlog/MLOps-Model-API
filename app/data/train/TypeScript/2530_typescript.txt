//
// Copyright Â© Daniel T. Gorski <dtg [at] lengo [dot] org> et al.
//

export class SyntaxError {

    public name: string;
    public stack: string;

    public constructor(
        public message = "",
        public line    = 0,
        public column  = 0,
        public cursor  = 0
    ) {
        this.message = message.replace(
            /([\x00-\x1F]|\x7F)/g,
            String.fromCharCode(0xFFFD)
        );

        let proto = Object.getPrototypeOf(this);

        while (!proto.hasOwnProperty("constructor")) {
            proto = Object.getPrototypeOf(proto);
        }

        this.name = proto.name = "SyntaxError";
        this.stack = new Error(message).stack || "";
        this.stack = this.stack.replace(/\n[^\n]+/, "");
    }
}

SyntaxError.prototype = Object.create(Error.prototype);
