import { Component, OnInit }        from '@angular/core';

import { Character }                from './character';
import { CharacterDetailComponent } from './character-detail.component';
import { CharacterService }         from './character.service';

@Component({
  selector:                         'results-render',
  template:                         `
    <div class="header-area">
        <h3 class="pull-left">Results</h3>
        <div class="pull-right">
            Show only My Favorites <input type="checkbox">
        </div>
    </div>
    <div class="body-area" id="search_results">
        <ul class="nav nav-pills nav-stacked">
            <li *ngFor="let character of characters" [ngClass]="( character.name == 'Bubba')?'active':''">
                <a href="#"
                (click)="onSelect(selectedCharacter)">
                    <span>{{ character.Name }}</span> -
                    <small>{{ character.Location }}</small> 
                    <span [ngClass]="(character.Favorite==1)?'glyphicon-star':'glyphicon-star-empty'" class="pull-right glyphicon"></span>
                </a>
            </li>
        </ul>
    </div>
  `,
  providers:                        [CharacterService]
})
export class CharacterComponent implements OnInit {
  characters:                       Character[];
  selectedCharacter:                Character;
  constructor(private CharacterService: CharacterService) { }
  getCharacters(): void { 
    this.CharacterService.getCharacters().then(characters => this.characters = characters);
  }
  ngOnInit(): void {
    this.getCharacters();
  }
  onSelect(character: Character): void {
    this.selectedCharacter = character;
  }
}
