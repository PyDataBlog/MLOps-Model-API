/*
    2.4.6:
    a) S -> + S S | - S S | a

    $> rustc -o parser 2_4_1_a.rs
    $> ./parser
*/

static CODE: &'static str = "-+aa-aa";

pub fn sa(mut head: i32) -> i32 {
    match CODE.chars().nth(head as usize){
        None => {
            panic!("missing required element!");
        },
        Some('a') => {
            head += 1;
        },
        Some('+') | Some('-') => {
            head += 1;
            head = sa(head);
            head = sa(head);
        },
        _ => { panic!("undefind element!"); }
    }
    head
}

fn main() {
    let head = sa(0);
    if head as usize!= CODE.len() {
        panic!("parsed {} chars, but totally {} chars", head, CODE.len());
    }
}
