@echo off

REM : GLOBAL PATHS
set input_directory=.\src\corpus\by_day\clean
set import_model_path=.\src\corpus\by_day\mallet\import.model
set extra_stopwords_path=C:\Users\dmpas\thesis\data\text\scripts\mallet\globals\extra-stopwords.txt

REM : LEFT TO RIGHT.
set evaluator_model_path=.\src\corpus\by_day\mallet\evaluator.model
set import_model_path=.\src\corpus\by_day\mallet\import.model
set left_to_right_directory=.\src\corpus\by_day\mallet\estimates\left_to_right
python ../scripts/mallet/inference/left_to_right.py %import_model_path% %evaluator_model_path% %left_to_right_directory%

REM : CREATE GLOBAL VOCAB AND DISTRIBUTIONS.
set alpha=.01
set number_of_topics=20
set word_topics_file=.\src\corpus\by_day\mallet\topic-word-counts.csv
set output_directory=.\src\corpus\by_day\mallet
python ../scripts/mallet/distributions/global_counts.py %number_of_topics% %word_topics_file% %output_directory%

REM : CREATE LOCAL DISTRIBUTIONS.
set input_directory=.\src\corpus\by_day\clean
set output_directory=.\src\corpus\by_day\mallet\distributions
set distribution_file_path=.\src\corpus\by_day\mallet\global_distribution.csv
python ../scripts/mallet/distributions/local_distribution.py %alpha% %number_of_topics% %input_directory% %output_directory% %distribution_file_path% %extra_stopwords_path%

REM : PROCESS
REM : sort of would like to start up multiples...
set estimates_output_directory=.\src\corpus\by_day\mallet\estimates
python ../scripts/mallet/inference/process.py %alpha% %number_of_topics% %output_directory% %estimates_output_directory%

REM : CREATE FEATURES DOCUMENT.
set prices_path=C:\Users\dmpas\thesis\data\prices\btc.csv
set output_features_path=.\features.csv
set estimates=hm@.\src\corpus\by_day\mallet\estimates\hm;is@.\src\corpus\by_day\mallet\estimates\is;chibs@.\src\corpus\by_day\mallet\estimates\chibs;lengths@.\src\corpus\by_day\mallet\estimates\lengths
python ../scripts/mallet/inference/merge_inferences.py %prices_path% %output_features_path% %estimates%

REM : SPLIT FEATURES
set output_features_directory=.\
python ../scripts/mallet/split_features.py %output_features_directory% .20 25

