:: param 1: new dns ip
echo off
for /f "tokens=2 delims==" %%f in ('wmic nic where "NetConnectionStatus=2" get NetConnectionID /value ^| find "="') do set "interface_name=%%f"
if "%1"==0 (
	set /P addr="Input IPv4 Address of target DNS server"
) else (
	set addr=%1
)
echo Setting interface %interface_name% DNS IP to %addr% ...
@netsh interface ip set dns name="%interface_name%" static %addr%
echo Success, flushing dns cache...
@ipconfig /flushdns
if %errorlevel%==0 echo Done