@echo off
REM Set up the different paths

REM Visual studio (including VC subdirectory - which should contain vcvarsall.bat)
SET VS_VC_PATH=C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC

REM Compilation architecture: amd64 or x86
REM For more information, see https://msdn.microsoft.com/en-us/library/f2ccy3wt.aspx
SET ARCHITECTURE=amd64

REM JDK path
SET JDK_PATH=C:\Program Files\Java\jdk1.8.0_51

@echo on

REM Setting up command line build environment for target architecture
CALL "%VS_VC_PATH%\vcvarsall" %ARCHITECTURE%

REM Compiling
cl /c /I"%JDK_PATH%\include\win32" /I"%JDK_PATH%\include" /D _WINDLL /D _MBCS /EHsc /openmp "com_cnambot_parallelProcessingUnit_pathfinding_algorithm_PNBAStar.cpp" "PNBAStar.cpp"

REM Linking and generating dll
LINK.EXE /DLL /OUT:pnbastar.dll com_cnambot_parallelProcessingUnit_pathfinding_algorithm_PNBAStar.obj PNBAStar.obj

REM Cleaning up
DEL *.idb *.pdb *.obj *.exp *.lib
