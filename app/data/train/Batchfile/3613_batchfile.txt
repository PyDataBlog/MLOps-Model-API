REM ×¢ÊÍ
@echo off

set ocd=%cd%
cd /d %~dp0
cd ..

setlocal enabledelayedexpansion
call :GET_PATH_NAME %cd%
set project=%PATH_NAME%

if not exist proj.android md proj.android
cd proj.android

echo #####ÌáÊ¾£º¿ªÊ¼¹¹½¨#####
cmake -DDXM_CMAKE_PLATFORM=ANDROID -P ..\CMakeListsAndroid.cmake
if %errorlevel% neq 0 goto :cmEnd
rem cmake -DDXM_CMAKE_PLATFORM=ANDROID -P ..\CMakeListsAndroid.cmake
echo #####ÌáÊ¾£º¹¹½¨½áÊø#####

echo #####ÌáÊ¾£º¿ªÊ¼±àÒë#####
rem BuildConsole.exe %project%.sln /prj=ALL_BUILD /Silent /OpenMonitor /Cfg="Debug|WIN32,Release|WIN32" 
echo #####ÌáÊ¾£º±àÒë½áÊø#####

echo #####ÌáÊ¾£º¿ªÊ¼°²×°#####
rem cmake -DBUILD_TYPE="Debug" -P cmake_install.cmake
rem cmake -DBUILD_TYPE="Release" -P cmake_install.cmake
echo #####ÌáÊ¾£º°²×°½áÊø#####

goto cmDone
:cmEnd
echo setup failed
pause
exit

:cmDone
cmake -P dxm_cmake_compile_succeeded.cmake
cmake -P dxm_cmake_install_succeeded.cmake
cd /d %ocd%

@echo on

goto :eof
:GET_PATH_NAME
set PATH_NAME=%~n1