package database

import "database/sql"

var db *sql.DB

// OpenDB opens database connection
func OpenDB() {
	openSQLite()
}

// openSQLite opens SQLite connection
func openSQLite() {
	var err error
	db, err = sql.Open("sqlite3", "adnalerts.db?loc.auto")
	if err != nil {
		panic(err)
	}
	err = db.Ping()
	if err != nil {
		panic(err)
	}
}

// Query any given SQL
func Query(s string, args ...interface{}) (*sql.Rows, error) {
	rows, err := db.Query(s, args...)
	if err != nil {
		return nil, err
	}
	return rows, nil
}

// Exec any given SQL
func Exec(s string, args ...interface{}) (sql.Result, error) {
	res, err := db.Exec(s, args...)
	if err != nil {
		return nil, err
	}
	return res, nil
}
