package models

import (
	"log"

	"github.com/jinzhu/gorm"
	_ "github.com/lib/pq"
)

var db gorm.DB

func init() {
	database, err := gorm.Open("postgres", "user=postgres dbname=agile_metrics password=Test1234")
	if err != nil {
		log.Fatal("Cannot find database. Received error: " + err.Error())
	} else {
		// Store the handle
		db = database

		// Get database connection handle [*.sql.DB]
		db.DB()

		// Set params
		db.DB().SetMaxOpenConns(20)

		// Disable table name pluralization
		db.SingularTable(true)

		// Enable logger
		db.LogMode(true)
	}
}
