#!/usr/bin/env perl

use v5.020;
use strict;
use warnings FATAL => 'all';
use utf8;
binmode STDOUT, ":utf8";
binmode STDERR, ":utf8";
binmode STDIN,  ":encoding(UTF-8)";

use Data::Printer;
use FindBin;
use Getopt::Long;
use List::Util ( 'sum0', 'min' );
use POSIX qw(ceil);
use Term::ProgressBar;
use Time::ParseDate;

use Sheepsense::Extra::Util qw 'db';
use Sheepsense::Data::Dog;

use experimental 'signatures';
no warnings "experimental::signatures";

my $options = {
    id         => 0,
    identifier => '',
};

GetOptions(
    "id=i"         => \$options->{id},
    "identifier=s" => \$options->{identifier},
);

die unless $options->{id} || $options->{identifier};

my $dog = Sheepsense::Data::Dog->new(
    guessid => ( $options->{id} || $options->{identifier} ) );

p $dog;

my $mergeddogs = $dog->get_merged_into_this;

for (@$mergeddogs) {
    $_->unmerge;
}

