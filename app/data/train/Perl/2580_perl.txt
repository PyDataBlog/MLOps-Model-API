#!perl
# INPUT:
#	1: code path
use warnings;
use strict;
use File::Find();

# Get the code path
my $CODE_PATH=$ARGV[0];

# global enviroment
my %ENV_DIR;

# Scan all code file
opendir my $CODE_DIR, $CODE_PATH
	or die "Cannot open $CODE_PATH: $!";

foreach my $file (readdir $CODE_DIR) {
	print "file: $file\n";
}

# The file find function varible
use vars qw/*name *dir *prune/;
*name = *File::Find::name;
*dir = *File::Find::dir;
*prune = *File::Find::prune;

# find all file
File::Find::find({wanted => \&wanted}, $CODE_PATH);

# print global environment
while (my ($key, $value) = each %ENV_DIR) {
	print "$key=$value\n";
}

exit;

close $CODE_DIR;

sub wanted
{
	my $file_name;
	#print("$name\n");
	#print("dir:$dir\n");
	$file_name=$name;
	$file_name=~s#$dir##g;
	$ENV_DIR{$dir}=$file_name;
	#print("$prune\n");
}
