#!/usr/bin/env bash
# Loads the appropriate host file
set -e
set -o pipefail

POOL=${POOL:?"Need to set: POOL"}

source $POOL/host/all.sh

export CURRENT_HOSTNAME=$(hostname)
export HLRS_HOSTNAME=eslogin # HLRS fronend (Unix)
export AIA_HOSTNAME=aia #AIA (Linux)
export AIR_HOSTNAME=air #Air (MacOS)

case "${CURRENT_HOSTNAME}" in
    $AIA_HOSTNAME*)
        source $POOL/host/aia.sh
        ;;
    $HLRS_HOSTNAME*)
        source $POOL/host/hlrs.sh
        ;;
    $AIR_HOSTNAME*)
        source $POOL/host/air.sh
        ;;
    *)
        error "unknown host: ${CURRENT_HOSTNAME} => no config loaded"
        ;;
esac

TOOLCHAIN_POOL=${TOOLCHAIN_POOL:?"Hostfile needs to set TOOLCHAIN_POOL! host: ${CURRENT_HOSTNAME}"}

set +e
set +o pipefail
