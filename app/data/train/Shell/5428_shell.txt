#env bash
cdir=$(cd $(dirname $0) && pwd)
source $cdir/sh_log.sh

branch_pattern=$1


if [[ "x$branch_pattern" == "x" ]]
then
    echo -e "\033[32m Usage: $0 <branch_pattern> \033[0m"
    exit 1
fi

# remove the remote branch
git fetch --prune || err 'Fail to delete the remote branch.'

for i in $(git branch)
do
    if [[ $i =~ $branch_pattern ]]
    then
        info "Deleting branch $i"
        git branch -d $i || err "Fail to delete branch $i"
    fi
done
