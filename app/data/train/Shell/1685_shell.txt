#!/bin/bash

function terminal {
  gnome-terminal --title $1 -e "bash -c \"$2; exec bash\""
}

function run_cmd {
  bash -c "$1; exec bash"
}

# redis server
redisPath="/home/konsi/code/redis-2.8.6/"
cd "$redisPath"
terminal 'redis-server' 'src/redis-server'
sleep 1

path="/home/konsi/code/knignish/"

cd "$path""src/server"

terminal 'server-grunt' 'grunt'
sleep 1
terminal 'server-grunt-test' 'grunt test'
sleep 1
gvim Gruntfile.coffee
sleep 1
wmctrl -r :ACTIVE: -T 'gvim-server'
sleep 1


cd "$path"
terminal 'server-app-server' 'npm start'
sleep 1


cd "$path""src/client"

terminal 'client_grunt' 'grunt'
sleep 1
terminal 'client_grunt_test' 'grunt test'
sleep 1
gvim Gruntfile.coffee
sleep 1
wmctrl -r :ACTIVE: -T 'gvim-client'
sleep 1


cd "$path"

google-chrome http://localhost:3000 --new-window &
sleep 2
wmctrl -r :ACTIVE: -T 'browser-app'

./dev_scripts/move_win.sh
