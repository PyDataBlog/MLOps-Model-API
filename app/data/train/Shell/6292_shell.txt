#!/bin/bash

ipaddr=$(facter ipaddress_eth0)
curl -k -H "Content-Type: application/json" -X POST -d '{"id":1,"hostgroup":{"name":"Openstack","puppet_proxy_id":"1","puppet_ca_proxy_id":"1", "architecture_id":"1","environment_id":"1","domain_id":"1","operatingsystem_id":"1"}}' https://admin:admin@${ipaddr}/api/v2/hostgroups
curl -k -H "Content-Type: application/json" -X POST -d '{"id":"9bbf373797bf7cf7ba62c80023682e25","hostgroup":{"name":"Controller","parent_id":1}}' https://admin:admin@${ipaddr}/api/hostgroups
curl -k -H "Content-Type: application/json" -X POST -d '{"id":"a623a8d0366bf079411aa30be45b2d10","hostgroup":{"name":"Compute","parent_id":1}}' https://admin:admin@${ipaddr}/api/hostgroups
curl -k -H "Content-Type: application/json" -X POST -d '{"id":"8c4aa541ee911e8d80451ef8cc304806","hostgroup":{"name":"Storage","parent_id":1}}' https://admin:admin@${ipaddr}/api/hostgroups
curl -k -H "Content-Type: application/json" -X PUT -d '{"operatingsystem":{"medium_ids":"6"}}' https://admin:admin@${ipaddr}/api/v2/operatingsystems/1
curl -k -H "Content-Type: application/json" -X PUT -d '{"hostgroup":{"medium_id":"6"}}' https://admin:admin@${ipaddr}/api/v2/hostgroups/1
curl -k -H "Content-Type: application/json" -X PUT https://admin:admin@${ipaddr}/api/smart_proxies/1/refresh
curl -k -H "Content-Type: application/json" -X POST -d '{"subnet":{"name":"SIDO_INSTALL_NETWORK","network":"192.168.10.0","mask":"255.255.255.0","gateway":"192.168.10.1","dns_primary":"192.168.10.1","from":"192.168.10.200","to":"192.168.10.250","domain_ids":"1","dhcp_id":"1","tftp_id":"1","dns_id":"1","boot_mode":"DHCP"}}' https://admin:admin@${ipaddr}/api/subnets
curl -k -H "Content-Type: application/json" -X PUT -d '{"hostgroup":{"subnet_id":"1"}}' https://admin:admin@${ipaddr}/api/v2/hostgroups/1
curl -k -H "Content-Type: application/json" -X POST https://admin:admin@${ipaddr}/api/environments/1/smart_proxies/1/import_puppetclasses
