#!/bin/ash

pause()
{
   usleep 20000
}

sdi() 
{
   # SET SDI VALUE
   echo $1 > /sys/class/gpio/gpio5/value
   echo 'set to' $1
   pause
   # CLK UP
   echo 1 > /sys/class/gpio/gpio2/value
   pause
   # CLK DOWN                            
   echo 0 > /sys/class/gpio/gpio2/value
   pause
}

latch()
{
   # SET LATCH VALUE
   echo $1 > /sys/class/gpio/gpio3/value
   pause
}

red()
{
   echo 0 > /sys/class/gpio/gpio14/value
   pause
}

green()                                   
{                                       
   echo 1 > /sys/class/gpio/gpio15/value
   pause
}                                       
  
blue()                                   
{                                       
   echo 0 > /sys/class/gpio/gpio49/value
   pause
}                                       

register="1
0
0
0
0
0
0
0
0
0                                  
0                                   
0                                    
0                                   
0                                   
0                                   
0
0                                    
0                                    
0                                    
0                                    
0                                    
0
0"                                   
register_last=0

red
green
blue

latch 0
for value in $register; do 
   sdi $value
done
latch 1
   sdi $register_last
latch 0


