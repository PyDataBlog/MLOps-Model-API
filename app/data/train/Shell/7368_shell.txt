#!/bin/bash
SELECTED_FILES=$NAUTILUS_SCRIPT_SELECTED_FILE_PATHS
NL='
'
FIRST_LINE_ONLY=${SELECTED_FILES%%"$NL"*}
BASE_DIRECTORY=$(dirname "$FIRST_LINE_ONLY")

cd "$BASE_DIRECTORY"
for file in *;
do
if ! [[ "$file" == [0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]* ]]; # this line gives an error if sh is used instead of bash, because [[ is not implemented in sh
then
  file_date_modified=$(stat -c %y "$file" | cut -d ' ' -f1 | tr -d -);
  mv "$file" "$file_date_modified - $file";
fi
done

