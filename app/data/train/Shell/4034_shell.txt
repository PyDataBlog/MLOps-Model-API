#!/usr/bin/env bash
# Root Author: Lindsey Simon

YUI_COMPRESS='tools/yuicompressor/build/yuicompressor.jar'
# --CSS--
  CSS_FILES=$(ls -1 ./static/css/*css |grep -v compiled)  # All CSS files instead of compiled version
  TMP_CSS_FILE='/tmp/MY_GAE_APP.css.tmp'                  # Location for joined version of CSS_FILES
  OUT_CSS_FILE='static/css/yui_compiled.css'              # Output! YUI minified CSS_FILE location
# --JS--
  JS_FILES=$(ls  -1 ./static/js/*js   |grep -v compiled)  # All JS  files instead of compiled version
  TMP_JS_FILE='/tmp/MY_GAE_APP.js.tmp'                    # Location for joined version of JS_FILES
  OUT_JS_FILE='static/js/yui_compiled.js'                 # Output! YUI minified JS_FILE  location

# --CSS--  Join and then minify
  cat $CSS_FILES > $TMP_CSS_FILE
  java -jar $YUI_COMPRESS     \
     --type css $TMP_CSS_FILE \
     -o $OUT_CSS_FILE
  echo -e " \e[1;32m MINIFIED CSS! : \e[0m $OUT_CSS_FILE"
  head $OUT_CSS_FILE
  echo "-------------------------------"

# --JS--  Join and then minify
  cat $JS_FILES > $TMP_JS_FILE 
  java -jar $YUI_COMPRESS   \
     --type js $TMP_JS_FILE \
     -o $OUT_JS_FILE
  echo -e " \e[1;32m MINIFIED JS! : \e[0m $OUT_JS_FILE"
  head $OUT_JS_FILE
  echo "-------------------------------"


echo  -e " \e[1;32m ALL DONE! : \e[0m"
#echo "";
#echo "Now running svn commit...";
#svn commit;
#echo "DONE!";
#echo "";
#echo "-------------------------------"

#echo "Deploying to App Engine servers...";
#appcfg.py update ~/src/wuzhere;
#echo "DONE!"
#echo "";

