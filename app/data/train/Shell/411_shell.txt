#!/bin/bash

host='www.andreaciceri.altervista.org'
user='andreaciceri'

echo -n 'FTP password: '
read -s pass
echo 'Ok'

rm -R blog/output/*
rm -R static/blog/*

git add *
git commit -m 'Automatic push'
git push origin master

make html -C blog/
cp -R blog/output/* static/blog/

lftp -c "
    set ssl:verify-certificate no
    open $host
    user $user $pass
    lcd static/
    mirror -R --ignore-time -v
    bye
"
