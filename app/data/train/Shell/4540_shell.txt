#!/bin/bash
shopt -s extglob # +([[:digit:]]) trick
cd atom.kaeri.re.kr/cgi-bin
NATURALLY=$(grep -l Naturally *)

for i in $NATURALLY; #loop around naturally occuring elements
do
	html2text $i | head -n 1 | awk -F"-" '{print $1}' | awk -F" " '{print $1}' | tr -d '\n'; #Z
	echo ";" | tr -d '\n';
	html2text $i | head -n 1 | awk -F"-" '{print $2}' | awk -F" " '{print $1}' | tr -d '\n'; #ABBREV
	echo ";" | tr -d '\n';
	html2text $i | head -n 1 | awk -F" " '{print $2}' | awk -F"-" '{print $2}' | tr -d '\n'; #NAME
	echo ";" | tr -d '\n';
	for j in $(grep -l Abun $i+([[:digit:]])); #loop around each isotope of element i
	do 	grep "Atomic Mass" $j | awk -F " " '{print $3}' | sed s/\(// | tr -d '\n'; #MASS
		echo ";" | tr -d '\n';	
		grep Abun $j | awk -F" " '{print $NF}' | sed s/%// | sed s/\(// | tr -d '\n'; #ABUN
		echo ";" | tr -d '\n';	
	done
	echo ""; # | tr -d '\n';
done | sed 's/;$//' | sort -n
