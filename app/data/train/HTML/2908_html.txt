<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <!-- React -->
    <script src="https://npmcdn.com/react@15.3.1/dist/react.js"></script>
    <script src="https://npmcdn.com/react-dom@15.3.1/dist/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <!-- UU5 -->
     <!-- <link rel="stylesheet" href="../../uu5.css" /> -->
    <script type="application/javascript" src="../../uu5.js"></script>

    <title>Forms Select Demo</title>

    <style>
      .uu5-layout-flc {
        overflow: visible !important;
      }
    </style>
  </head>
  <body>
    <div id="renderHere"></div>

    <script type="text/babel">

      var CustomSelect = React.createClass({


        mixins: [UU5.Common.BaseMixin, UU5.Common.ElementaryMixin],

        statics: {
          tagName: 'UU5.CustomSelect',
          classNames: {
            main: 'uu5-custom-select'
          }
        },

        propTypes: {
          items: React.PropTypes.arrayOf(React.PropTypes.string)
        },

        getDefaultProps: function () {
          return {
            items: ['Value 1', 'Value 2', 'Value 3']
          };
        },

        getInitialState: function () {
          return {
            value: []
          };
        },

        _onChangeValue: function (opt) {
          this.setState(function (state) {
            var result = state.value;
            var index = result.indexOf(opt.value);

            if (index == -1) {
              result.push(opt.value);
            } else {
              result.splice(index, 1);
            }

            return {value: result};
          });
          return this;
        },

        _getOptions: function () {
          var select = this;

          return this.props.items.map(function (item, i) {
            return (
              <UU5.Forms.Select.Option value={item} selectedContent={item} key={i}>
                <UU5.Forms.Checkbox label={item} labelPosition="right" size="sm"
                                    value={select.state.value.indexOf(item) > -1} />
              </UU5.Forms.Select.Option>
            );
          });
        },

        render: function () {
          return (
            <UU5.Forms.Select
              {...this.props}
              name="seven"
              label={this.props.label}
              multiple
              value={this.state.value}
              onChange={this._onChangeValue}
              parent={this}
            >
              {this._getOptions()}
            </UU5.Forms.Select>
          );
        }
      });

      var Page = React.createClass({

        getInitialState: function() {
          return {value: 'Value 1'}
        },

        render: function () {
          return (
            <UU5.Layout.Root header="UU5.Forms.Select">
              <UU5.Forms.BasicForm submitLabel="Ok" onSubmit={function (form) {
                console.log(form.getValues());
                console.log(form.getInputByName('five').getSelectedValue())
              }}>
                <UU5.Forms.Number name="number" label="Year of manufacture" step={1}
                                  nanMessage="Please insert an number" value={1990} min={1900} isRequired={true}
                                  placeholder="dsadsa" />
                <UU5.Forms.Select name="one" label="Select" placeholder="Placeholder" isRequired
                                  onChange={function (opt) {
                                    console.log(opt);
                                    opt.component.setValue(opt.value)
                                  }}>
                  <UU5.Forms.Select.Option value="Value 1" />
                  <UU5.Forms.Select.Option value="Value 2" />
                </UU5.Forms.Select>
                <UU5.Forms.Select name="two" label="Select" feedback="error" message="test">
                  <UU5.Forms.Select.Option value="Value 1" />
                  <UU5.Forms.Select.Option value="Value 2" />
                </UU5.Forms.Select>
                <UU5.Forms.Select name="three" label="Select" size="sm" isButtonHidden isRequired>
                  <UU5.Forms.Select.Option value="Value 1" />
                  <UU5.Forms.Select.Option value="Value 2" />
                </UU5.Forms.Select>

                <UU5.Forms.Select name="four" label="Select" size="lg" isRequired value="Value 1">
                  <UU5.Forms.Select.Option value="Value 1" />
                  <UU5.Forms.Select.Option value="Value 2" />
                  <UU5.Forms.Select.Option value="Value 3"><b>some children 3</b><i>:-)</i></UU5.Forms.Select.Option>
                  <UU5.Forms.Select.Option value="Value 4"
                                           content="<i>some content 4 sa hdkjsa hdsjka hdskaj hdsajklh sakjl hdsajkl dhsajkhd asjkl dhsajkdh sajkd hsajkhdlsaj kdlhasj klsah jkdsahjk dsalhjklhd sa</i>" />
                  <UU5.Forms.Select.Option value="Value 5" content="<i>some content 5</i>"
                                           selectedContent="<u>some selected content 5</u>" />
                </UU5.Forms.Select>

                <UU5.Forms.Select name="four" label="Select" size="lg" isRequired placeholder="Value 1" value={this.state.value}>
                  <UU5.Forms.Select.Option value="Value 1" />
                  <UU5.Forms.Select.Option value="Value 2" />
                  <UU5.Forms.Select.Option value="Value 3"><b>some children 3</b><i>:-)</i></UU5.Forms.Select.Option>
                  <UU5.Forms.Select.Option value="Value 4"
                                           content="<i>some content 4 sa hdkjsa hdsjka hdskaj hdsajklh sakjl hdsajkl dhsajkhd asjkl dhsajkdh sajkd hsajkhdlsaj kdlhasj klsah jkdsahjk dsalhjklhd sa</i>" />
                  <UU5.Forms.Select.Option value="Value 5" content="<i>some content 5</i>"
                                           selectedContent="<u>some selected content 5</u>" />
                </UU5.Forms.Select>

                <UU5.Forms.Select name="five" label="Multiple" isRequired multiple placeholder="Value 1">
                  <UU5.Forms.Select.Option value="Value1" content="Value 1"/>
                  <UU5.Forms.Select.Option value="Value2" content="Value 2" />
                  <UU5.Forms.Select.Option value="Value3" content="Value 3"><b>some children 3</b><i>:-)</i></UU5.Forms.Select.Option>
                  <UU5.Forms.Select.Option value="Value4"
                                           content="<i>some content 4 sa hdkjsa hdsjka hdskaj hdsajklh sakjl hdsajkl dhsajkhd asjkl dhsajkdh sajkd hsajkhdlsaj kdlhasj klsah jkdsahjk dsalhjklhd sa</i>" />
                  <UU5.Forms.Select.Option value="Value 5" content="<i>some content 5</i>"
                                           selectedContent="<u>some selected content 5</u>" />
                </UU5.Forms.Select>

                <UU5.Forms.Select name="five" label="Multiple onChange" isRequired multiple placeholder="Value 1"
                                  onChange={function (opt) {
                                    console.log(opt);
                                    opt.component.setValue(opt.value);
                                  }}>
                  <UU5.Forms.Select.Option value="Value1" content="Value 1"/>
                  <UU5.Forms.Select.Option value="Value2" content="Value 2" />
                  <UU5.Forms.Select.Option value="Value3" content="Value 3"><b>some children 3</b><i>:-)</i></UU5.Forms.Select.Option>
                  <UU5.Forms.Select.Option value="Value4"
                                           content="<i>some content 4 sa hdkjsa hdsjka hdskaj hdsajklh sakjl hdsajkl dhsajkhd asjkl dhsajkdh sajkd hsajkhdlsaj kdlhasj klsah jkdsahjk dsalhjklhd sa</i>" />
                  <UU5.Forms.Select.Option value="Value 5" content="<i>some content 5</i>"
                                           selectedContent="<u>some selected content 5</u>" />
                </UU5.Forms.Select>

                <UU5.Forms.Text name="six" label="Text" />

                <CustomSelect label="Test"/>
              </UU5.Forms.BasicForm>
            </UU5.Layout.Root>
          );
        }
      });

      ReactDOM.render(React.createElement(Page, null), document.getElementById('renderHere'));
    </script>
  </body>
</html>
