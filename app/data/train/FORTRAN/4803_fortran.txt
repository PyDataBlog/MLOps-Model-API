subroutine testfortran(a, b, res)
implicit none

  integer :: a
  integer :: b
  integer :: res(2, 2)

  res(1, 1) = a + b
  res(1, 2) = a + 2 * b
  res(2, 1) = 2 * a + b
  res(2, 2) = a**2 + b**2

  res=matmul(res, res)
end subroutine testfortran


subroutine demo_1(a, b, res)
implicit none

  integer :: a
  integer :: b
  integer :: res

  res = a + b
end subroutine demo_1

function demo_2(a, b, res)

  integer :: a
  integer :: b
  integer, intent(out) :: res

  res = a + b
end function demo_2

module constants
implicit none

   DOUBLE PRECISION, parameter :: pi = 3.1415926536
   DOUBLE PRECISION, parameter :: e = 2.7182818285
   integer :: xxx = 5
contains
  subroutine add(a, b, res)
    integer :: a
    integer :: b
    integer :: res

    res = a + b
  end subroutine add
end module constants

function demo_3(a, b, res, pii)
  use constants
  integer :: a
  integer :: b
  integer :: res
  DOUBLE PRECISION :: pii

  pii = pi
  call add(a, b, res)
end function demo_3

function demo_4(a, b, res, pii)
  use constants
  integer :: a
  integer :: b
  integer :: res

  xxx = xxx + 5
  call add(xxx, b, res)
end function demo_4

