%                                                         -*- coding: utf-8 -*-
%! \file    ~/tests/base/test_005.tex
%! \author  Jiří Kučera, <sanczes@gmail.com>
%! \stamp   2016-09-24 22:18:39 +0200
%! \project JK-TeX: Document typesetting macros for TeX.
%! \license MIT
%! \version See \JKTeXVersion.
%! \fdesc   JK-TeX base tests of macro probing macros.
%
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Copyright (c) 2014 - 2019 Jiří Kučera.
%
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
%
% The above copyright notice and this permission notice shall be included in
% all copies or substantial portions of the Software.
%
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
% IN THE SOFTWARE.
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\isundefined{undefined}{
  \wterm{<\string\undefined\space is undefined>}
}{
  \wterm{<\string\undefined\space is defined>}
}

\isundefined{isundefined}{
  \wterm{<\string\isundefined\space is undefined>}
}{
  \wterm{<\string\isundefined\space is defined>}
}

\iscs\undefined{
  \wterm{<\string\undefined\space is control sequence>}
}{
  \wterm{<\string\undefined\space is not control sequence>}
}

\iscs{<\iscs>}{
  \wterm{<`<\string\iscs>' is control sequence>}
}{
  \wterm{<`<\string\iscs>' is not control sequence>}
}

\iscs{}{
  \wterm{<`' is control sequence>}
}{
  \wterm{<`' is not control sequence>}
}

\isundefined{undefined}{
  \wterm{<\string\undefined\space is undefined>}
}{
  \wterm{<\string\undefined\space is defined>}
}

\wterm{<\cstostr\cstostr>}
\def\x{ABC-.UVWXYZ?}
\wterm{<\macroname\x>}

\def\longprefix{\long}
\def\outerprefix{\outer}
\def\longouterprefix{\long\outer}

\def\ReportPrefix #1#2{
  \ifx#2\empty
    \wterm{<#1 has no prefix>}
  \else\ifx#2\longprefix
    \wterm{<#1 has \longname\space prefix>}
  \else\ifx#2\outerprefix
    \wterm{<#1 has \outername\space prefix>}
  \else\ifx#2\longouterprefix
    \wterm{<#1 has \longoutername\space prefix>}
  \else
    \wterm{<#1 has unknown prefix>}
  \fi\fi\fi\fi
}

\def\x{xf}
\mprefix{x}\tempZ
\ReportPrefix x\tempZ

\long\def\y{av}
\mprefix{y}\tempZ
\ReportPrefix y\tempZ

\outer\def\z{--}
\mprefix{z}\tempZ
\ReportPrefix z\tempZ

\long\outer\def\yz{-*-}
\mprefix{yz}\tempZ
\ReportPrefix{yz}\tempZ

\end
