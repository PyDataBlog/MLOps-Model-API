# This doesn't work- not updated with eventmaster.py updates
# TODO: Fix This :)

# Import Libraries
import eventmaster
import time
import random
import sys
import unittest
import sys


class InputsTestCase(unittest.TestCase):

    def setUp(self):
        self.s3 = E2S3.E2S3Switcher()
        self.s3.set_verbose(0)
        self.s3.set_CommsXML_IP("127.0.0.1")
        self.s3.set_CommsXML_Port(9876)
        if not self.s3.connect(): return -1
        while self.s3.is_ready() != 1: time.sleep(1)

    def test_set_valid_name_on_invalid_input(self):
        test_str = "PYTEST-{0!s}".format(random.randint(1,10))
        self.assertRaises(ValueError, lambda: self.s3.get_input(99).set_Name(test_str))

    def test_set_valid_name_on_valid_input(self):
        test_str = "PYTEST-{0!s}".format(random.randint(1,10))
        while(self.s3.has_been_processed(self.s3.get_input(0).set_Name(test_str))==0): time.sleep(1)
        time.sleep(1)
        self.assertEqual(test_str, self.s3.get_input(0).get_Name())

    def test_set_invalid_name_on_valid_input(self):
        MyObject = type('MyObject', (object,), {})
        self.assertEqual(self.s3.get_input(0).set_Name(MyObject), None)

print unittest.main()

sys.exit()
