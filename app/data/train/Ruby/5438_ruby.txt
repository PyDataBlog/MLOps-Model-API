require 'spec_helper'

describe Wimdu::Partner::Vacasol::Soap do

  class SoapTester
  include Wimdu::Partner::Vacasol::Soap
  end

  before(:each){
    Wimdu::Webservice.config.partners.vacasol.username = 'abc'
    Wimdu::Webservice.config.partners.vacasol.password = 'xyz'
  }

  let(:subject){SoapTester.new}

  it 'should not require ssl_verify_mode' do
    subject.savon_client.globals[:ssl_verify_mode].should == :none
  end

  it 'should have the configured basic_auth' do
    subject.savon_client.globals[:basic_auth].should == ['abc', 'xyz']
  end

  it 'should have the :soapenv soap namespace' do
    subject.savon_client.globals[:env_namespace].should == :soapenv
  end

  it 'should have the :ial namespace identifier' do
    subject.savon_client.globals[:namespace_identifier].should == :ial
  end

  it 'should have the ial and v1 namespaces' do
    subject.savon_client.globals[:namespaces].should == subject.namespaces
  end

end
