# spec/sleeping_king_studios/shinkansen/models/adaptable/querying_spec.rb

require 'rails_helper'

require 'sleeping_king_studios/shinkansen/models/adaptable/contexts'
require 'sleeping_king_studios/shinkansen/models/adaptable/examples/querying_examples'

RSpec.describe SleepingKingStudios::Shinkansen::Models::Adaptable::Querying do
  include Spec::Models::Adaptable::Contexts
  include Spec::Models::Adaptable::Examples::QueryingExamples

  mock_class Spec::Models, :AdaptableExample do |klass|
    klass.send :include, SleepingKingStudios::Shinkansen::Models::Adaptable::Core
    klass.send :include, SleepingKingStudios::Shinkansen::Models::Adaptable::Querying
  end # mock_class

  mock_class Spec::Models::Adapters, :ExampleAdapter, :base_class => SleepingKingStudios::Shinkansen::Models::Adapters::BaseAdapter

  let(:described_class) { Spec::Models::AdaptableExample }
  let(:instance)        { described_class.new }

  before(:example) do
    allow(SleepingKingStudios::Shinkansen.configuration.models).
      to receive(:default_adapter).and_return(nil)
  end # before example

  include_examples 'should implement querying methods'
end # describe
