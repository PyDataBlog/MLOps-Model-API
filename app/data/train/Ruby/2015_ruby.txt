module Maths
	class Brain
    
    # Public: Assigns data
    def self.assign(variable, value)
      data = read
      data[variable] = value
      write(data)
      
      value
    end
    
    # Public: Looks up data
    def self.lookup(variable)
      value = read[variable]
      
      if value.nil?
        nil
      else
        BigDecimal.new(read[variable])
      end
    end
    
    # Public: The file we're using to store our memories
    def self.brain_file
      File.join(ENV['HOME'], ".maths_brain")
    end
    
    # Public: Reads the data out of the brain
    def self.read
      if File.exist?(brain_file)
        JSON.parse(File.read(brain_file))
      else
        {}
      end
    end
    
    # Public: Reads the 
    def self.write(data)
      File.open(brain_file, "wb") do |file|
        file << JSON.generate(data)
      end
    end
	end
end