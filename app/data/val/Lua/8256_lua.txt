--Old Man Winter
local ka=require "expansions.utility_ktcg"
local scard,sid=ka.GetID()
function scard.initial_effect(c)
	ka.EnableCreatureAttribute(c)
	--double breaker
	ka.EnableBreaker(c,KA_ABILITY_DOUBLE_BREAKER)
	--draw & to battle
	ka.AddSingleComeIntoPlayAbility(c,0,nil,scard.drtg,scard.drop)
end
scard.kaijudo_card=true
scard.drtg=ka.DrawTarget(PLAYER_ALL)
function scard.tbfilter(c)
	return c:IsCreature() and not c:IsEvolutionCreature()
end
function scard.drop(e,tp,eg,ep,ev,re,r,rp)
	local ct1=Duel.GetFieldGroupCount(tp,LOCATION_DECK,0)
	local ct2=Duel.GetFieldGroupCount(1-tp,LOCATION_DECK,0)
	if ct1>3 then ct1=3 end
	if ct2>3 then ct2=3 end
	if Duel.IsPlayerCanDraw(tp,ct1) and Duel.SelectYesNo(tp,KA_QHINTMSG_DRAW) then
		Duel.Draw(tp,ct1,KA_REASON_ABILITY)
	end
	local d=0
	if Duel.IsPlayerCanDraw(1-tp,ct2) and Duel.SelectYesNo(1-tp,KA_QHINTMSG_DRAW) then
		d=Duel.Draw(1-tp,ct2,KA_REASON_ABILITY)
	end
	local g=Duel.GetMatchingGroup(scard.tbfilter,1-tp,LOCATION_HAND,0,nil)
	local ft=Duel.GetLocationCount(1-tp,KA_LOCATION_BATTLE)
	if g:GetCount()>0 and ft>0 and Duel.SelectYesNo(1-tp,KA_QHINTMSG_TOBATTLE) then
		if d>0 then Duel.ShuffleHand(1-tp) end
		Duel.Hint(HINT_SELECTMSG,1-tp,KA_HINTMSG_TOBATTLE)
		local sg=g:Select(1-tp,1,ft,nil)
		Duel.BreakEffect()
		Duel.PutIntoBattleZone(sg,0,1-tp,1-tp,false,false,POS_FACEUP_UNTAPPED)
	end
end
