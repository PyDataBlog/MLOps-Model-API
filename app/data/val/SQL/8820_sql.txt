
CREATE PROCEDURE [dbo].[bus_GetStopPosition]
	@code nvarchar(255) = null,
	@name nvarchar(255) = null
AS
BEGIN
	SET NOCOUNT ON;
	
	DECLARE @namewc nvarchar(255) = null;
	PRINT 'hello';
	IF NOT @name IS NULL
	BEGIN
	PRINT 'hi';
		SET @namewc = '%' + @name + '%';
	END

	SELECT
		sp.Code, 
		sp.Name, 
		sp.VIXname, 
		sp.Longitude, 
		sp.Latitude, 
		sp.Easting,
		sp.Northing
	FROM
		dbo.winter_StopPositions sp
	WHERE
		((NOT @code IS NULL) AND Code = @code) 
		OR
		((NOT @namewc IS NULL) AND Name LIKE @namewc)
		OR 1=2
						 
END