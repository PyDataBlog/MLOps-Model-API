//engine: JScript
//uname: scintilla
//dname: ÐÐ°ÑÑÑÐ¾Ð¹ÐºÐ° ÑÐµÐ´Ð°ÐºÑÐ¾ÑÐ° Scintilla
//debug: yes
//descr: Ð¡ÐºÑÐ¸Ð¿Ñ Ð´Ð»Ñ Ð½Ð°ÑÑÑÐ¾Ð¹ÐºÐ¸ ÑÐµÐ´Ð°ÐºÑÐ¾ÑÐ° Scintilla
//author: orefkov
//help: inplace
//addin: global
//addin: scintilla_int

/// <reference path="../snegopat.d.ts"/>
/// <reference path="../v8.d.ts"/>

import * as stdlib from "./std";
import * as stdcommands from "./commands";


type StyleTableRow = {Name: string, Underline: number, StyleName:string, StyleDescr: string, Font:any, FontColor:any, BgColor:any} & ValueTableRow;
type StyleTable = {Get(idx:number): StyleTableRow, Add(): StyleTableRow, ÐÐ¾Ð»ÑÑÐ¸ÑÑ(idx:number): StyleTableRow} & ValueTable;
type StylesTableBox = {Ð¢ÐµÐºÑÑÐ°ÑÐ¡ÑÑÐ¾ÐºÐ°: StyleTableRow} & TableBox;
type SetupFormControls = {ÐÐ°Ð´Ð¿Ð¸ÑÑÐÐµÐ½Ñ: string, Styles: StylesTableBox} & Controls;
type SetupForm = {Styles: StyleTable, Ð­Ð»ÐµÐ¼ÐµÐ½ÑÑÐ¤Ð¾ÑÐ¼Ñ: SetupFormControls, foldComment:any, foldCond:any, foldLoop:any, foldMultiString:any, foldPreproc:any, foldProc:any, foldTry:any} & Form;

global.connectGlobals(SelfScript)

var pflScintillaStyles = "Scintilla/Styles/";
var pflScintillaSettings = "Scintilla/Settings/";

class SetupFormObject {
    private static one: SetupFormObject;

    static get() {
        if (!SetupFormObject.one)
            SetupFormObject.one = new SetupFormObject;
        return SetupFormObject.one;
    }
    form: SetupForm;

    constructor() {
        this.form = loadScriptForm(env.pathes.core + 'forms\\scintilla.ssf', this);
		this.initForm();
    }

	initForm() {
		this.form.Styles.ÐÑÐ¸ÑÑÐ¸ÑÑ();
		for (var styleName in styleNames) {
		  var row = this.form.Styles.Add();
		  row.StyleName = styleName;
		  row.StyleDescr = styleNames[styleName];
		  this.fillStylesRow(row);
		}
		this.form.foldComment = profileRoot.getValue(pflScintillaSettings + "foldComment");
		this.form.foldCond = profileRoot.getValue(pflScintillaSettings + "foldCond");
		this.form.foldLoop = profileRoot.getValue(pflScintillaSettings + "foldLoop");
		this.form.foldMultiString = profileRoot.getValue(pflScintillaSettings + "foldMultiString");
		this.form.foldPreproc = profileRoot.getValue(pflScintillaSettings + "foldPreproc");
		this.form.foldProc = profileRoot.getValue(pflScintillaSettings + "foldProc");
		this.form.foldTry = profileRoot.getValue(pflScintillaSettings + "foldTry");
	}

	fillStylesRow(row){
		var style = loadStyleFromProfile(row.StyleName); //ÑÑÑÑÐºÑÑÑÐ° (Font,FontColor,BgColor)

		if(!style)
			style = defaultColorSheme[row.StyleName];

		row.Font = style.Font;
		row.FontColor = style.FontColor;
		row.BgColor = style.BgColor;
	};

    ÐÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°ÑÐÐ°Ð½ÐµÐ»ÑÐÑÐµÐ´Ð¿ÑÐ¾ÑÐ¼Ð¾ÑÑ(ÐÐ½Ð¾Ð¿ÐºÐ°) {
		for(var i=0;i<this.form.Styles.ÐÐ¾Ð»Ð¸ÑÐµÑÑÐ²Ð¾();i++){
			var row = this.form.Styles.ÐÐ¾Ð»ÑÑÐ¸ÑÑ(i);
			scintilla_int.setStyle(row.StyleName, row.Font.Name, row.Font.Size, row.Font.Bold, row.Font.Italic, row.Font.Underline,
								   Color1CToColor(row.FontColor), Color1CToColor(row.BgColor));
		}
		scintilla_int.Preview(true);
    };

    ÐÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°ÑÐÐ°Ð½ÐµÐ»ÑÐÐ(ÐÐ½Ð¾Ð¿ÐºÐ°) {
		for(var i=0;i<this.form.Styles.ÐÐ¾Ð»Ð¸ÑÐµÑÑÐ²Ð¾();i++){
			var row = this.form.Styles.ÐÐ¾Ð»ÑÑÐ¸ÑÑ(i);
			var style = v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor",row.Font,row.FontColor,row.BgColor);
            profileRoot.createValue(pflScintillaStyles + row.StyleName, style, pflSnegopat);
            profileRoot.setValue(pflScintillaStyles + row.StyleName, style);
        }
        profileRoot.createValue(pflScintillaSettings + "foldComment", false, pflSnegopat);
        profileRoot.createValue(pflScintillaSettings + "foldCond", false, pflSnegopat);
        profileRoot.createValue(pflScintillaSettings + "foldLoop", false, pflSnegopat);
        profileRoot.createValue(pflScintillaSettings + "foldMultiString", false, pflSnegopat);
        profileRoot.createValue(pflScintillaSettings + "foldPreproc", false, pflSnegopat);
        profileRoot.createValue(pflScintillaSettings + "foldProc", false, pflSnegopat);
        profileRoot.createValue(pflScintillaSettings + "foldTry", false, pflSnegopat);

        profileRoot.setValue(pflScintillaSettings + "foldComment", this.form.foldComment);
        profileRoot.setValue(pflScintillaSettings + "foldCond", this.form.foldCond);
        profileRoot.setValue(pflScintillaSettings + "foldLoop", this.form.foldLoop);
        profileRoot.setValue(pflScintillaSettings + "foldMultiString", this.form.foldMultiString);
        profileRoot.setValue(pflScintillaSettings + "foldPreproc", this.form.foldPreproc);
        profileRoot.setValue(pflScintillaSettings + "foldProc", this.form.foldProc);
        profileRoot.setValue(pflScintillaSettings + "foldTry", this.form.foldTry);
		macros_getSettings();
		this.form.ÐÐ°ÐºÑÑÑÑ();
    };

    ÐÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°ÑÐÐ°Ð½ÐµÐ»ÑÐÐ¾Ð£Ð¼Ð¾Ð»ÑÐ°Ð½Ð¸Ñ(ÐÐ½Ð¾Ð¿ÐºÐ°) {
		var list = v8New("Ð¡Ð¿Ð¸ÑÐ¾ÐºÐÐ½Ð°ÑÐµÐ½Ð¸Ð¹");
		list.ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ(0,"Ð¡ÑÐ°Ð½Ð´Ð°ÑÑÐ½Ð°Ñ ÑÐ²ÐµÑÐ¾Ð²Ð°Ñ ÑÑÐµÐ¼Ð°");
		list.ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ(1,"Ð¡ÑÐµÐ¼Ð° â1");
		var sel = this.form.ÐÑÐ±ÑÐ°ÑÑÐ?Ð·ÐÐµÐ½Ñ(list, this.form.Ð­Ð»ÐµÐ¼ÐµÐ½ÑÑÐ¤Ð¾ÑÐ¼Ñ.ÐÐ°Ð´Ð¿Ð¸ÑÑÐÐµÐ½Ñ);
		if (sel) {
			var colorSheme = getColorSheme(sel.ÐÐ½Ð°ÑÐµÐ½Ð¸Ðµ);
			this.form.Styles.ÐÑÐ¸ÑÑÐ¸ÑÑ();
			for (var styleName in styleNames) {
				var style = colorSheme[styleName];
				var row = this.form.Styles.Add();
				row.StyleName = styleName;
				row.StyleDescr = styleNames[styleName];
				row.Font = style.Font;
				row.FontColor = style.FontColor;
				row.BgColor = style.BgColor;
			}
		}
    };

	ÐÐ¾Ð¼Ð°Ð½Ð´Ð½Ð°ÑÐÐ°Ð½ÐµÐ»ÑÐÑÐ¼ÐµÐ½Ð°(ÐÐ½Ð¾Ð¿ÐºÐ°) {
		//Ð¿ÐµÑÐµÑÐ¸ÑÑÐ²Ð°ÐµÐ¼ Ð½Ð°ÑÑÑÐ¾Ð¹ÐºÐ¸ Ð¸Ð· ÑÐ¾ÑÑÐ°Ð½ÐµÐ½Ð½ÑÑ Ð² Ð¿ÑÐ¾ÑÐ¸Ð»Ðµ
		this.initForm();
		macros_getSettings();
		scintilla_int.Preview(false);
		this.form.ÐÐ°ÐºÑÑÑÑ();
	}

	StylesÐÑÐ¸ÐÑÐ²Ð¾Ð´ÐµÐ¡ÑÑÐ¾ÐºÐ¸(Ð­Ð»ÐµÐ¼ÐµÐ½Ñ, ÐÑÐ¾ÑÐ¼Ð»ÐµÐ½Ð¸ÐµÐ¡ÑÑÐ¾ÐºÐ¸, ÐÐ°Ð½Ð½ÑÐµÐ¡ÑÑÐ¾ÐºÐ¸) {
		if (ÐÐ°Ð½Ð½ÑÐµÐ¡ÑÑÐ¾ÐºÐ¸){
			if ((ÐÐ°Ð½Ð½ÑÐµÐ¡ÑÑÐ¾ÐºÐ¸.val.StyleName == "currentline") || (ÐÐ°Ð½Ð½ÑÐµÐ¡ÑÑÐ¾ÐºÐ¸.val.StyleName == "selectionhighlight")){
				ÐÑÐ¾ÑÐ¼Ð»ÐµÐ½Ð¸ÐµÐ¡ÑÑÐ¾ÐºÐ¸.val.Ð¯ÑÐµÐ¹ÐºÐ¸.Font.Ð£ÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÑÐ¢ÐµÐºÑÑ("");
				ÐÑÐ¾ÑÐ¼Ð»ÐµÐ½Ð¸ÐµÐ¡ÑÑÐ¾ÐºÐ¸.val.Ð¯ÑÐµÐ¹ÐºÐ¸.FontColor.Ð£ÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÑÐ¢ÐµÐºÑÑ("");
			}
		}
	}

	StylesFontÐÑÐ¸Ð?Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸(Ð­Ð»ÐµÐ¼ÐµÐ½Ñ){
		if (this.form.Ð­Ð»ÐµÐ¼ÐµÐ½ÑÑÐ¤Ð¾ÑÐ¼Ñ.Styles.Ð¢ÐµÐºÑÑÐ°ÑÐ¡ÑÑÐ¾ÐºÐ°.StyleName == "default"){
			var currFont = Ð­Ð»ÐµÐ¼ÐµÐ½Ñ.val.ÐÐ½Ð°ÑÐµÐ½Ð¸Ðµ;
			if (ÐÐ¾Ð¿ÑÐ¾Ñ("Ð£ÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÑ ÑÑÐ¾Ñ ÑÑÐ¸ÑÑ Ð´Ð»Ñ Ð¾ÑÑÐ°Ð»ÑÐ½ÑÑ ÑÑÐ¸Ð»ÐµÐ¹?", Ð ÐµÐ¶Ð¸Ð¼ÐÐ¸Ð°Ð»Ð¾Ð³Ð°ÐÐ¾Ð¿ÑÐ¾Ñ.ÐÐ°ÐÐµÑ, 0) == ÐÐ¾Ð´ÐÐ¾Ð·Ð²ÑÐ°ÑÐ°ÐÐ¸Ð°Ð»Ð¾Ð³Ð°.ÐÐµÑ)
				return;

			for(var i=0;i<this.form.Styles.ÐÐ¾Ð»Ð¸ÑÐµÑÑÐ²Ð¾();i++){
				var row = this.form.Styles.ÐÐ¾Ð»ÑÑÐ¸ÑÑ(i);
				row.Font = currFont;
			}
		}
	}

	StylesBgColorÐÑÐ¸Ð?Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸(Ð­Ð»ÐµÐ¼ÐµÐ½Ñ) {
		if (this.form.Ð­Ð»ÐµÐ¼ÐµÐ½ÑÑÐ¤Ð¾ÑÐ¼Ñ.Styles.Ð¢ÐµÐºÑÑÐ°ÑÐ¡ÑÑÐ¾ÐºÐ°.StyleName == "default"){
			var currColor = Ð­Ð»ÐµÐ¼ÐµÐ½Ñ.val.ÐÐ½Ð°ÑÐµÐ½Ð¸Ðµ;
			if (ÐÐ¾Ð¿ÑÐ¾Ñ("Ð£ÑÑÐ°Ð½Ð¾Ð²Ð¸ÑÑ ÑÑÐ¾Ñ ÑÐ²ÐµÑ ÑÐ¾Ð½Ð° Ð´Ð»Ñ Ð¾ÑÑÐ°Ð»ÑÐ½ÑÑ ÑÑÐ¸Ð»ÐµÐ¹?", Ð ÐµÐ¶Ð¸Ð¼ÐÐ¸Ð°Ð»Ð¾Ð³Ð°ÐÐ¾Ð¿ÑÐ¾Ñ.ÐÐ°ÐÐµÑ, 0) == ÐÐ¾Ð´ÐÐ¾Ð·Ð²ÑÐ°ÑÐ°ÐÐ¸Ð°Ð»Ð¾Ð³Ð°.ÐÐµÑ)
				return;

			for(var i=0;i<this.form.Styles.ÐÐ¾Ð»Ð¸ÑÐµÑÑÐ²Ð¾();i++){
				var row = this.form.Styles.ÐÐ¾Ð»ÑÑÐ¸ÑÑ(i);
				row.BgColor = currColor;
				if (row.StyleName == "directive") break;
			}
		}
	}
};

function macros_setup() {
    SetupFormObject.get().form.Open();
}

function loadStyleFromProfile(styleName){
    return profileRoot.getValue(pflScintillaStyles + styleName);
};

function macros_getSettings() {
	for (var styleName in styleNames) {
		var style = loadStyleFromProfile(styleName);
		if (!style)
			style = defaultColorSheme[styleName];

		scintilla_int.setStyle(styleName, style.Font.Name, style.Font.Size, style.Font.Bold, style.Font.Italic, style.Font.Underline,
							   Color1CToColor(style.FontColor), Color1CToColor(style.BgColor));
	}
    scintilla_int.foldComment = profileRoot.getValue(pflScintillaSettings + "foldComment");
    scintilla_int.foldCond = profileRoot.getValue(pflScintillaSettings + "foldCond");
    scintilla_int.foldLoop = profileRoot.getValue(pflScintillaSettings + "foldLoop");
    scintilla_int.foldMultiString = profileRoot.getValue(pflScintillaSettings + "foldMultiString");
    scintilla_int.foldPreproc = profileRoot.getValue(pflScintillaSettings + "foldPreproc");
    scintilla_int.foldProc = profileRoot.getValue(pflScintillaSettings + "foldProc");
    scintilla_int.foldTry = profileRoot.getValue(pflScintillaSettings + "foldTry");
}

function getColorSheme(num){
	switch (num) {
		case 0: //ÑÑÐ°Ð½Ð´Ð°ÑÑÐ½Ð°Ñ ÑÐ²ÐµÑÐ¾Ð²Ð°Ñ ÑÑÐµÐ¼Ð°
			var defaultFont = v8New("Ð¨ÑÐ¸ÑÑ","Courier New",10,false,false,false);
			var defaultBGColor = v8New("Ð¦Ð²ÐµÑ",255,255,255);

			return { //                                                      ÑÑÐ¸ÑÑ        ÑÐ²ÐµÑ ÑÑÐ¸ÑÑÐ°,         ÑÐ²ÐµÑ ÑÐ¾Ð½Ð°
				"default"      : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"keyword"      : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",255,0,0), defaultBGColor),
				"comment"      : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,128,0), defaultBGColor),
				"number"       : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"string"       : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"date"         : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"identifier"   : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,255), defaultBGColor),
				"operator"     : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",255,0,0), defaultBGColor),
				"preprocessor" : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",150,50,0), defaultBGColor),
				"label"        : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"directive"    : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",150,50,0), defaultBGColor),
				"brace"        : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", v8New("Ð¨ÑÐ¸ÑÑ",defaultFont,undefined,undefined,true), v8New("Ð¦Ð²ÐµÑ",128,0,0), v8New("Ð¦Ð²ÐµÑ",236,233,216)),
				"linenumber"   : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", v8New("Ð¨ÑÐ¸ÑÑ",defaultFont,undefined,9), ColorToColor1C(0xBBBBBB), v8New("Ð¦Ð²ÐµÑ",236,233,216)),
				"indentguide"  : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",192,192,192), defaultBGColor),
				"currentline"  : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), v8New("Ð¦Ð²ÐµÑ",236,233,216)),
				"selectionhighlight"  : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), v8New("Ð¦Ð²ÐµÑ",0,0,255))
			}
		case 1:
			var defaultFont = v8New("Ð¨ÑÐ¸ÑÑ","Consolas",11,false,false,false);
			var defaultBGColor = ColorToColor1C(0xF0FBFF);

			return {
				"default"      : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"keyword"      : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0xA55104), defaultBGColor),
				"comment"      : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0x008000), defaultBGColor),
				"number"       : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0x5a8809), defaultBGColor),
				"string"       : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0x1515a3), defaultBGColor),
				"date"         : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0x5a8809), defaultBGColor),
				"identifier"   : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0x033E6B), defaultBGColor),
				"operator"     : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), defaultBGColor),
				"preprocessor" : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", v8New("Ð¨ÑÐ¸ÑÑ",defaultFont,undefined,undefined,true), ColorToColor1C(0x0E4AAB), defaultBGColor),
				"label"        : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0x09885a), defaultBGColor),
				"directive"    : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", v8New("Ð¨ÑÐ¸ÑÑ",defaultFont,undefined,undefined,true), ColorToColor1C(0x2E75D9), defaultBGColor),
				"brace"        : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", v8New("Ð¨ÑÐ¸ÑÑ",defaultFont,undefined,undefined,true), v8New("Ð¦Ð²ÐµÑ",0,0,0), ColorToColor1C(0xF7E8D7)),
				"linenumber"   : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", v8New("Ð¨ÑÐ¸ÑÑ",defaultFont,undefined,9), ColorToColor1C(0xBBBBBB), v8New("Ð¦Ð²ÐµÑ",241,239,226)),
				"indentguide"  : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, ColorToColor1C(0xCCCCCC), defaultBGColor),
				"currentline"  : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), ColorToColor1C(0xF7E8D7)),
				"selectionhighlight"  : v8New("Ð¡ÑÑÑÐºÑÑÑÐ°","Font,FontColor,BgColor", defaultFont, v8New("Ð¦Ð²ÐµÑ",0,0,0), v8New("Ð¦Ð²ÐµÑ",0,0,255))
			}
		case 2:
			return {}
	}
}

function ColorToColor1C(clr){
	return v8New("Ð¦Ð²ÐµÑ",clr & 255,clr >> 8 & 255,clr >> 16);
}

function Color1CToColor(clr){
	return clr.r | (clr.g << 8) | (clr.b << 16);
}

function rgb(r, g, b) {
	return r | (g << 8) | (b << 16);
}

var styleNames = {
	"default" : "ÐÐ°Ð·Ð¾Ð²ÑÐ¹ ÑÑÐ¸Ð»Ñ",
	"keyword" : "ÐÐ»ÑÑÐµÐ²Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾",
	"comment" : "ÐÐ¾Ð¼Ð¼ÐµÐ½ÑÐ°ÑÐ¸Ð¹",
	"number" : "Ð§Ð¸ÑÐ»Ð¾",
	"string" : "Ð¡ÑÑÐ¾ÐºÐ°",
	"date" : "ÐÐ°ÑÐ°",
	"identifier" : "Ð?Ð´ÐµÐ½ÑÐ¸ÑÐ¸ÐºÐ°ÑÐ¾Ñ",
	"operator" : "ÐÐ¿ÐµÑÐ°ÑÐ¾Ñ",
	"preprocessor" : "ÐÑÐµÐ¿ÑÐ¾ÑÐµÑÑÐ¾Ñ",
	"label" : "ÐÐµÑÐºÐ°",
	"directive" : "ÐÐ¸ÑÐµÐºÑÐ¸Ð²Ð°",
	"brace" : "ÐÐ°ÑÐ½Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ°",
	"linenumber" : "ÐÐ¾Ð¼ÐµÑÐ° ÑÑÑÐ¾Ðº",
	"indentguide" : "ÐÐ¸Ð½Ð¸Ð¸ Ð²ÑÑÐ°Ð²Ð½Ð¸Ð²Ð°Ð½Ð¸Ñ",
	"currentline" : "Ð¦Ð²ÐµÑ ÑÐ¾Ð½Ð° ÑÐµÐºÑÑÐµÐ¹ ÑÑÑÐ¾ÐºÐ¸",
	"selectionhighlight" : "Ð¦Ð²ÐµÑ ÑÐ¾Ð½Ð° Ð¿Ð¾Ð´ÑÐ²ÐµÑÐºÐ¸ Ð²ÑÐ´ÐµÐ»ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ»Ð¾Ð²Ð°"
}

var defaultColorSheme = getColorSheme(0);
