/**
 * This file is part of the TEKKL core package
 *
 * (c) Alexander Bachmann <email.bachmann@gmail.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
**/

import { createSelector } from '@ngrx/store';
import { selectAccountState } from './account.selectors';
import { selectCurrentAccountId } from './loaded-account.selectors';
import { AccountState } from '../states/account.state';
import { accountAdapter } from '../entity-adapter/account.entity-adapter';

export const selectMembershipAccountsState = createSelector(
	selectAccountState,
	(state: AccountState) => state.memberships
);

export const {
	selectIds: selectMembershipAccountIds,
	selectEntities: selectMembeshipAccountEntities,
	selectAll: selectAllMembershipAccounts,
	selectTotal: selectMembershipAccountTotal
} = accountAdapter.getSelectors(selectMembershipAccountsState);

export const selectUserAccount = createSelector(
	selectAllMembershipAccounts,
	(accounts) => {
		var filtered = accounts.filter((account) => account.type === 'USER');
		if(filtered && filtered.length){
			return filtered[0];
		}
		return null;
	}
);