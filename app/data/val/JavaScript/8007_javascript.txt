/**
 * An ES6 screeps game engine.
 *
 * An attempt to conquer screeps, the first MMO strategy sandbox
 * game for programmers!
 *
 * @author    Geert Hauwaerts <geert@hauwaerts.be>
 * @copyright Copyright (c) Geert Hauwaerts
 * @license   MIT License
 */

/**
 * Cache for static function results.
 */
export default class Cache {
  /**
   * Cache for static function results.
   *
   * @returns {void}
   */
  constructor() {
    this.cache = {};
  }

  /**
   * Store or retrieve an entry from cache.
   *
   * @param   {string} table   The cache table.
   * @param   {string} key     The entry to store or retrieve.
   * @param   {*}      value   The callback function.
   * @param   {*}      ...args The callback function arguments.
   * @returns {*}
   */
  remember(table, key, callback, ...args) {
    if (this.cache[table] === undefined) {
      this.cache[table] = {};
    }

    let value = this.cache[table][key];

    if (value === undefined) {
      value = callback(args);
      this.cache[table][key] = value;
    }

    return value;
  }

  /**
   * Remove an entry from cache.
   *
   * @param   {string} table The cache table.
   * @param   {string} key   The entry to remove.
   * @returns {void}
   */
  forget(table, key) {
    delete this.cache[table][key];
  }
}
