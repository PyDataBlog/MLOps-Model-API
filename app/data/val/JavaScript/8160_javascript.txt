/**
 * Created by eirikskogland on 24.09.15.
 */
angular.module('ExamApp').directive('solutionTableCell', function() {
    return {
        restrict: 'E',
        templateUrl: 'templates/directives/solution-table-cell.html',
        scope: {
            tableIndex: '@',
            hasSolution: '@'
        },
        controller: function($scope) {
            console.log("Solution Table Cell Controller");
            
            $scope.showingSolutionRow = false;

            $scope.showSolutionForm = function(index) {
                $(document.getElementById("solutionForm"+index)).toggle();

            };

            $scope.showSolutionPDF = function(index) {
                $(document.getElementById("solutionPDF"+index)).toggle();
            };

            $scope.showSolutionClicked = function(index) {

                $scope.showingSolutionRow = !$scope.showingSolutionRow;

                if($scope.hasSolution) {
                  // show solution
                    $scope.showSolutionPDF(index);
                } else {
                    // if logged in
                        // show solution form
                        $scope.showSolutionForm(index);
                    // else
                        // show login message
                }

            };
        },
        controllerAs: 'ctrl'

    }
});