"use strict";

$(function() {
    $(document).ajaxError((event, xhr) => {
        console.error(xhr.responseJSON.error_message);
    });
});

function basename(str) {
    let base;

    base = str.substring(str.lastIndexOf("\/") + 1);
    base = str.substring(str.lastIndexOf("\\") + 1);

    return base;
}

function go_home() {
    window.location.replace("/");
}

function update_upload_text() {
    let upload_filename = basename($("#file-upload").val());
    $("#file-upload-text").val(upload_filename);
}

function show_file_contents(element) {
    window.location.replace(window.location.pathname + "/" + $(element).text());
}

function analyze(element) {
    let filename = $(element).prev().text();

    $.when($.ajax(`analyze/${filename}`)).then(data => {
        console.log(data);
    });
}
