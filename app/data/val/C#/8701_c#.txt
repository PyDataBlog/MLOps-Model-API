using System.Collections;

public class ReloadState : AnimatedState
{	
	private bool reloading = false;

	public ReloadState(FiniteStateMachine controller) : base(controller)
	{
		stateID = (int)WeaponController.State.Reloading;
	}
	
	public override void Transition()
	{
		if (!animationPlaying)
		{
			controller.PerformTransition((int)WeaponController.Transition.FinishedReloading);
		}
	}
	
	public override void Execute()
	{
        reloading = animationPlaying;
		if (reloading == false)
		{
			base.Execute();
		}
	}
	
	protected override IEnumerator StateCoroutine()
	{
        animationPlaying = true;
		yield return controller.StartCoroutine(((WeaponController)controller).currentWeapon.Reload());
        animationPlaying = false;
	}
}
