% The MIT License (MIT)
%
% Copyright (c) 2014 Alexandre Jablon <alex@jablon.me>
%
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the "Software"), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
%
% The above copyright notice and this permission notice shall be included in
% all copies or substantial portions of the Software.
%
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
% THE SOFTWARE.

\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[margin=1cm]{geometry}
\usepackage{url}
\usepackage{graphicx}
\usepackage{cprotect}

\begin{document}
\pagenumbering{gobble}

\author{Alexandre Jablon}
\title{Architecture générique d'indexation Open Data avec Node.js et Redis}

\maketitle

\paragraph{}
Tuteur : Stéphane Frénot

\paragraph{}
Département télécommunications, services et usages, INSA de Lyon.


\paragraph{}

\fbox{\begin{minipage}{0.9\textwidth}
\paragraph{}
Le projet Odin vise à créer une plateforme d'intermédiation Open Source à destination des chercheurs, à la manière de ResearchGate (\url{http://www.researchgate.net/}). Il est composé de deux parties très distinctes mais complémentaires: une partie \emph{front} basée sur la couche logiciel MEAN (\emph{MongoDB, Express, Angular.js, Node.js}) et une partie \emph{back} basée sur \emph{Redis}. Tout le projet est codé en Javascript avec Node.js.

\paragraph{}
Le projet est disponible à l'adresse suivante: \url{https://github.com/odin-platform}
\end{minipage}}

\paragraph{}

\cprotect\fbox{
    \begin{minipage}[t]{0.45\textwidth}
        \includegraphics[scale=0.3]{schema.pdf}
    \end{minipage}

    \begin{minipage}[t]{0.40\textwidth}
        \includegraphics[scale=0.5]{plugins.pdf}
    \end{minipage}
}

\paragraph{}

\fbox{\begin{minipage}{0.9\textwidth}
\paragraph{}
Odin-core est un système de chargement et de scheduling de plugins. Le plugin \textbf{hal} présenté ici permet de \emph{crawler} et d'\emph{indexer} les publications sur site \url{http://hal.archives-ouvertes.fr/}. Il utilise \textbf{Redis}, un serveur de base de données clé/valeurs, pour sauvegarder via un \textbf{ORM} les objets définis en Javascript. Le crawler est un plugin indépendant, basé sur \textbf{request}, une librairie de requêtes pour Node.js et \textbf{cheerio}, une implémentation pour Node.js de jQuery. 
\end{minipage}}

\paragraph{}
\cprotect\fbox{
\begin{minipage}[t]{0.42\textwidth}
\paragraph{Développement d'un plugin odin}:
\paragraph{}
\begin{verbatim}
module.exports = function(node){

  /* stuff here */

  node.on('plugin-task', function(data){
    console.log(data);
  });

};




\end{verbatim}
\end{minipage}
}
\cprotect\fbox{
\begin{minipage}[t]{0.44\textwidth}
\paragraph{Envoi et réception de messages externes}:
\paragraph{}
\begin{verbatim}
var sub = redis.createClient();
sub.subscribe('odin:front2back');
var publi = redis.createClient();
 
publi.publish('odin:back2front',
  JSON.stringify({foo: bar})
);

sub.on('message', function(channel, data){
  if(channel === 'odin:front2back'){
    console.log(JSON.parse (data));
  }
});
\end{verbatim}
\end{minipage}
}


\end{document}
