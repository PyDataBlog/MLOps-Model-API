%!TEX root = MC_SS17.tex
% Author: Florian Küpper, f.k@wwu.de
% Vorlage: Phil Steinhorst, p.st@wwu.de
\documentclass[%
	paper=a4,
	fontsize=10,
	DIV=13,
	BCOR=9mm,
	chapterprefix=false,
	headinclude,
	footinclude,
	headheight=20.7pt,
	footheight=18pt,
	headings=optiontohead,
	toc=bibliography,
	toc=listof,
	ngerman,
	final=true,
	twoside,
	index=totoc,
	cleardoublepage=empty,
	twopage
]{scrartcl}

% Basics für Codierung und Sprache
% ===========================================================
	\usepackage{scrtime}
	\usepackage{etex}
	\usepackage{shellesc}
	\usepackage[final]{graphicx}
	\usepackage[utf8]{inputenc}
	\usepackage{babel}
	\usepackage[german=quotes]{csquotes}
% ===========================================================

% Fonts und Typographie
% ===========================================================
	\usepackage{sourcecodepro}
	\usepackage[default]{sourcesanspro}
	
	\usepackage[babel=true,final,tracking=smallcaps]{microtype}
	\DisableLigatures{encoding = T1, family = tt* } % keine Ligaturen für Monospace-Fonts
	\usepackage{ellipsis}
	\newcommand{\bet}[1]{\textbf{#1}}
% ===========================================================

% Farben
% ===========================================================
	\usepackage[usenames,x11names,final]{xcolor}
	\definecolor{fbblau}{HTML}{3078AB}
	\definecolor{mediumgray}{gray}{.65}
	\definecolor{blackberry}{rgb}{0.53, 0.0, 0.25}
% ===========================================================

% Mathe-Pakete und -Einstellungen
% ===========================================================
	\usepackage{mathtools}
	\usepackage{amssymb}
	\usepackage{wasysym}
	\usepackage[bigdelims]{newtxmath}		% moderne Mathe-Font
	\allowdisplaybreaks						% seitenübergreifende Rechnungen
	\input{MathCmds.tex}
% ===========================================================

% TikZ
% ===========================================================
	\usepackage{tikz}
	\usepackage{tikz-cd}					% kommutative Diagramme
	\usetikzlibrary{arrows.meta}			% mehr Pfeile!
	\usetikzlibrary{shadows}
	\usetikzlibrary{matrix}
	\usetikzlibrary{positioning}
	\usetikzlibrary{calc}
	\usetikzlibrary{
		circuits.logic.US,
		circuits.logic.IEC,
		circuits.logic.CDH,
		circuits.ee.IEC,
		automata,
		shapes,
		arrows
	}
	\tikzset{>=Latex}						% Standard-Pfeilspitze
% ===========================================================

% Seitenlayout, Kopf-/Fußzeile
% ===========================================================
	\usepackage{scrpage2}
	\pagestyle{scrheadings}
	\clearscrheadfoot 
	\setheadsepline{1pt} 					% Linie in Kopfzeile
	\automark[section]{section}				% Abschnittstitel in Kopfzeile
	\rohead{\rightmark} 
	\lehead{\rightmark} 
	\ofoot[{\Large \pagemark}]{\Large \pagemark}	% Seitenzahl in Fußzeile
	\raggedbottom
	\usepackage{setspace}					
	\onehalfspacing							% Zeilenabstand 1.5-fach
	\setlength{\parindent}{0pt}
	\setlength{\parskip}{0.5\baselineskip}
	\usepackage[all]{nowidow}
% ===========================================================

% Nummerierungen
% ===========================================================
	\usepackage{chngcntr}
	\counterwithin{equation}{section} 	% keine Kapitel in Gleichungsnummern
	\newcounter{counter}				% Zähler für Sätze
	\newcounter{lecture}
	\numberwithin{counter}{lecture}		% Section in Satz-Nummerierung einbeziehen
	\newcommand{\nextlecture}{\stepcounter{lecture} \setcounter{counter}{0}}
% ===========================================================

% Biblatex
% ===========================================================
	\usepackage[%
		backend=biber,
		sortlocale=auto,
		natbib,
		hyperref,
		backref,
		backrefstyle=three+,
		style=alphabetic]{biblatex}
	\setlength{\bibitemsep}{1em}		% Abstand zwischen den Literaturangaben
	\setlength{\bibhang}{2em}			% Einzug nach jeweils erster Zeile
	\addbibresource{literature.bib}		% Literaturdatei einlesen
	\nocite{*}							% Aufführen nicht referenzierter Quellen
% ===========================================================

% Hyperref
% ===========================================================
	\usepackage[%
		hidelinks,
		pdfpagelabels,
		bookmarksopen=true,
		bookmarksnumbered=true,
		linkcolor=black,
		urlcolor=SkyBlue2,
		plainpages=false,
		pagebackref,
		citecolor=black,
		hypertexnames=true,
		pdfauthor={Phil Steinhorst},
		pdfborderstyle={/S/U},
		linkbordercolor=SkyBlue2,
		colorlinks=false,
		backref=false]{hyperref}
	\hypersetup{final}
% ===========================================================

% Marginnotes / ToDo-Notes
% ===========================================================
	\usepackage[fulladjust]{marginnote}
	\renewcommand*{\marginfont}{\itshape\footnotesize}
	\usepackage[textsize=small,color=Red1!80!OrangeRed1!80]{todonotes}
% ===========================================================

% Listen und Tabellen
% ===========================================================
	\usepackage{multicol}
	\usepackage[shortlabels]{enumitem}
	\setlist{itemsep=0pt}
	\setlist[enumerate]{font=\sffamily\bfseries}
	\setlist[itemize]{label=$\triangleright$}
	\usepackage{tabularx}
% ===========================================================

% Inhaltsverzeichnis und Querverweise
% ===========================================================
	\usepackage[tocindentauto]{tocstyle}
	% \setcounter{tocdepth}{3}				% Tiefe des Inhaltsverzeichnisses
	\newtocstyle[KOMAlike][leaders]{alldotted}{}
	\usetocstyle{alldotted}
	\usepackage[nameinlink]{cleveref}
% ===========================================================

% Indexerstellung
% ===========================================================
	\usepackage{makeidx}
	\newcommand{\Index}[1]{\textbf{#1}\index{#1}}
	\makeindex
	\renewcommand{\indexpagestyle}{scrheadings}
% ===========================================================


% ntheorem
% ===========================================================
\usepackage[amsmath,thmmarks,thref,hyperref]{ntheorem}

\theoremstyle{changebreak}
\theorembodyfont{\normalfont}
\theorempreskip{2em}
\theorempostskip{2em}
\newtheorem{satz}[counter]{Satz}
\newtheorem{defn}[counter]{Definition}
\newtheorem{bem}[counter]{Bemerkung}
\newtheorem{bsp}[counter]{Beispiel}
\newtheorem{lemma}[counter]{Lemma}
\newtheorem{folg}[counter]{Folgerung}
\newtheorem{zusatz}[counter]{Zusatz}
\newtheorem{anw}[counter]{Anwendung}
\newtheorem{erl}[counter]{Erläuterung}
\newtheorem{mot}[counter]{Motivation}
\newtheorem{bew}[counter]{Beweis}
\newtheorem{kor}[counter]{Korollar}
\newtheorem{vor}[counter]{Vorbereitung}

%\theoremstyle{change}
%\theorembodyfont{\normalfont}
%\theoremseparator{:}
%\newtheorem{beispiel}[satz]{Beispiel}
%
\theoremstyle{nonumberplain}
\theoremheaderfont{\bfseries\scshape}
\theorembodyfont{\normalfont}
\theoremseparator{:}
\theoremsymbol{\ensuremath{\blacksquare}}
\newtheorem{beweis}{Beweis}

\theoremlisttype{optname}

% Workaround für Tabulatoren im Theorem-Verzeichnis
\makeatletter
\def\thm@@thmline@name#1#2#3#4{%
	\@dottedtocline{-2}{0em}{2.3em}%
	{\makebox[\widesttheorem][l]{#1 \protect\numberline{#2}}#3}%
	{#4}}
\@ifpackageloaded{hyperref}{
	\def\thm@@thmline@name#1#2#3#4#5{%
		\ifx\\#5\\%
		\@dottedtocline{-2}{0em}{2.3em}%
		{\makebox[\widesttheorem][l]{#1 \protect\numberline{#2}}#3}%
		{#4}
		\else
		\ifHy@linktocpage\relax\relax
		\@dottedtocline{-2}{0em}{2.3em}%
		{\makebox[\widesttheorem][l]{#1 \protect\numberline{#2}}#3}%
		{\hyper@linkstart{link}{#5}{#4}\hyper@linkend}%
		\else
		\@dottedtocline{-2}{0em}{2.3em}%
		{\hyper@linkstart{link}{#5}%
			{\makebox[\widesttheorem][l]{#1 \protect\numberline{#2}}#3}\hyper@linkend}%
		{#4}%
		\fi
		\fi}
}
\makeatother
\newlength\widesttheorem
\AtBeginDocument{
	\settowidth{\widesttheorem}{Proposition 15.15\quad}	% Referenzstring für die Breite der ersten Spalte
}

% ===========================================================

% Sonstiges / für Testzwecke
% ===========================================================
	\usepackage{lipsum}
	
	%Koordinate merken
	\newcommand*\savepos[1]{%
		\tikz[remember picture]\path coordinate (#1);%
	}
% ===========================================================