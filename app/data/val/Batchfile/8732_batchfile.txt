@echo off
setlocal

echo exeÉdllð}[WµÜ·B
echo.

rem ILMerge.exeÖÌpX
set ILMERGE_PATH=ILMerge\ILMerge.exe
rem MergeÎÛÌfBNgÆt@C
set WORK_DIR=MonlineBrowser\bin\Release\
set INPUT_FILE=MonlineBrowser.exe

rem ìÆpÌtempfBNgðì¬·é
set TEMP_DIR=__TEMP__\
if NOT EXIST %TEMP_DIR% (
mkdir %TEMP_DIR%
)

rem DLLð}[W·é
set OUTPUT_DIR=%~dp0%TEMP_DIR%
echo }[W...
pushd %WORK_DIR%
rem uFiddlerCore4.dllvÍ.NET Framework 4.0pÈÌÅu/v4vªKv
%~dp0%ILMERGE_PATH% /v4 /wildcards /out:%OUTPUT_DIR%%INPUT_FILE% %INPUT_FILE% *.dll
echo }[WI¹
echo.

rem }[Wµ½t@CðÚ®·é
popd
set PUBLISH_DIR=Publish\
if NOT EXIST %PUBLISH_DIR% (
mkdir %PUBLISH_DIR%
)

set VERSION=1.2.0
set VERSION_DIR=%PUBLISH_DIR%MonlineBrowser_ver%VERSION%
if NOT EXIST %VERSION_DIR% (
mkdir %VERSION_DIR%
)

move %OUTPUT_DIR%%INPUT_FILE% %VERSION_DIR%

rem tempfBNgðí·é
if EXIST %TEMP_DIR% (
rmdir /s /q %TEMP_DIR%
)

