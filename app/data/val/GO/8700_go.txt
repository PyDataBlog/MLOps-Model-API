package httpd

// PerformRequest
//
//

import (
	"encoding/json"
	"net/http"

	"github.com/xpandmmi/biographies/model/user-model"
)

func (h *Handler) postSearchAPI(w http.ResponseWriter, r *http.Request, user *userModel.User) {
	var search interface{}
	decoder := json.NewDecoder(r.Body)
	err := decoder.Decode(&search)
	if err != nil {
		httpError(w, err.Error(), false, http.StatusBadRequest)
		return
	}
	response, err := h.Elasticsearch.PerformRequest("POST", "/biographies/profile/_search", nil, search)
	if err != nil {
		httpError(w, err.Error(), false, http.StatusBadRequest)
		return
	}
	w.Header().Add("content-type", "application/json")
	w.Write(response.Body)
}
