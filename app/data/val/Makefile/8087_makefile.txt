all: scal

CC = gcc
CC_AVR = avr-gcc
CFLAGS = -Wall -Wpadded -std=c99
LFALGS = 
UT_FLAGS = -DUNIT_TEST -g
AVR_FLAGS = -mmcu=avr5 -Os
SRCS = scal.c
HDRS = scal.h

scal:	$(SRCS) $(HDRS)
	$(CC) $(CFLAGS) $(UT_FLAGS) $(LFLAGS) $(SRCS) -o $@ 

avr:	$(SRCS) $(HDRS)
	$(CC_AVR) $(AVR_FLAGS) $(CFLAGS) -c $(SRCS) -o scal-$@.o 

dump:	avr
	avr-objdump -d scal-avr.o | less

clean:
	@rm -f scal scal.exe *.o

# vim: set syn=make noet ts=8 tw=80:
