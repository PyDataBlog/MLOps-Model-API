include $(KROO_BASE_PATH)/comm/makefile.comm.v2

INCLUDE = -I./ -I$(INC_EXPORT_PATH)/ -I$(INC_EXPORT_PATH)/libc2c

CXXFLAG += -g -fPIC

OUTPUT1 = libmqproducer5.$(MACHTYPE).so   
OUTPUT2 = libmqconsumer5.$(MACHTYPE).so  

OBJECT1 = libmqproducer.o
OBJECT2 = libmqconsumer.o

all: $(OUTPUT1) $(OUTPUT2)

$(OUTPUT1): $(OBJECT1)
	g++ -shared -fPIC -o $@ $^ -L../agent/src -L$(LIB_EXPORT_PATH) -lcomponent_msgq_producer_v5

$(OUTPUT2): $(OBJECT2)
	g++ -shared -fPIC -o $@ $^ -L../agent/src -L$(LIB_EXPORT_PATH) -lcomponent_msgq_consumer_v5

.cpp.o:
	$(CXX) $(CXXFLAG) $(INCLUDE) -c $^ 

clean:
	rm -f *.o $(OUTPUT1) $(OUTPUT2)
