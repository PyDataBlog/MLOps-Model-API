#!/bin/bash

# Run like that:
# sudo ./gitcreateinitcopyandcommit.sh "<YOUR-COMMIT-COMMENT-HERE>"

if [ $# -eq 0 ]
  then
    echo "Usage: sudo ./gitcreateinitcopyandcommit.sh \"<YOUR-COMMIT-COMMENT-HERE>\""
  else
    mkdir /home/pi/git;
    cd /home/pi/git;
    rm -rf hestia-openhab;
    mkdir hestia-openhab;
    cd hestia-openhab;
    git init;
    git remote add origin https://github.com/HestiaPi/hestia-openhab.git;
    git pull origin master;
    sudo cp -r /opt/openhab/* ./;
    sudo git add ./;
    sudo git commit -m "$1";
    git push origin master;
    cd ..;
    rm -rf hestia-openhab;
fi
