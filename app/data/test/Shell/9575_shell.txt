#!/bin/bash

# gcc - second pass
pushd ${LFS}/sources &> /dev/null
cd gcc-build
message building gcc - second pass
AR=ar LDFLAGS="-Wl,-rpath,${LFS}/cross-tools/lib" \
  ../gcc-[0-9]*/configure --prefix=${LFS}/cross-tools \
  --build=${LFS_HOST} --host=${LFS_HOST} --target=${LFS_TARGET} \
  --with-sysroot=${LFS} --disable-nls --enable-shared \
  --enable-languages=c --enable-c99 --enable-long-long \
  --with-mpfr=${LFS}/cross-tools --with-gmp=${LFS}/cross-tools \
  --with-mpc=${LFS}/cross-tools --disable-multilib \
  --with-abi=${LFS_ABI} --with-arch=${LFS_ARM_ARCH} \
  --with-mode=${LFS_ARM_MODE} --with-float=${LFS_FLOAT} \
  --with-fpu=${LFS_FPU}
lfs_make gcc2
make install &> /dev/null
cp ${LFS}/cross-tools/${LFS_TARGET}/lib/libgcc_s.so.1 ${LFS}/lib
popd &> /dev/null
