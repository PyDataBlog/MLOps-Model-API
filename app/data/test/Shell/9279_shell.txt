#!/bin/bash
# Installs php oAuth
# /////////////////////////////////////////////////////////////////////////////

sudo apt-get install -y libpcre3-dev
sudo pecl install oauth

PHPINI=/etc/php5/fpm/php.ini
PHPINICLI=/etc/php5/cli/php.ini

# Looks for extension=oauth.so in php.ini and adds it if not present
if grep -Fxq "extension=oauth.so" $PHPINI; then
	echo "extension=oauth.so already exists in $PHPINI"
else
	echo "extension=oauth.so" | sudo tee -a $PHPINI
fi

# Looks for extension=oauth.so in cli/php.ini and adds it if not present
if grep -Fxq "extension=oauth.so" $PHPINICLI; then
	echo "extension=oauth.so already exists in $PHPINICLI"
else
    echo "extension=oauth.so" | sudo tee -a $PHPINICLI
fi

sudo service php5-fpm restart