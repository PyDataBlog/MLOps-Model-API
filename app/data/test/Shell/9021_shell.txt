#!/bin/sh

PrintUsage()
{
    echo "Usage: $0 -i ip -p port -l user -P password -c commonds"
    echo "-i: ip, required"
    echo "-p: port, default 22"
    echo "-l: user, default root"
    echo "-P: password, required"
    echo "-c: commonds, default none"
}

ip=""
port=22
user="root"
password=""
commonds=""

while getopts "i:p:l:P:c:" arg; do
    case $arg in
        i)
            ip=$OPTARG
            ;;
        p)
            port=$OPTARG
            ;;
        l)
            user=$OPTARG
            ;;
        P)
            password=$OPTARG
            ;;
        c)
            commonds=$OPTARG
            ;;
        ?)
            PrintUsage
            exit 0
            ;;
    esac
done

if [ -z $ip ];then
    echo "-i is required!";
    PrintUsage
    exit 0
fi
if [ -z $password ];then
    echo "-P is required!";
    PrintUsage
    exit 0
fi

expect ssh_login.exp $ip $port $user $password "$commonds"
