local moonscript = require('moonscript')
local util = require('moonscript.util')
local errors = require('moonscript.errors')

function print_err(...)
	local msg = table.concat({...}, "\t")
	outputDebugString("[luna] " .. msg, 1)
end

function execute(name, content)
	local chunk, parse_error

	local passed, err = pcall(function()
		chunk, parse_error = moonscript.loadstring(content, name)
	end)

	if not passed then
		print_err(err)
		return false
	end

	if not chunk then
		if parse_error then
			print_err(parse_error)
		else
			print_err("Unknown error")
		end

		return false
	end

	return moonscript_chunk()
end