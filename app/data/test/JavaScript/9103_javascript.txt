import React, { Component } from 'react';

import MePanel from '../components/panels/MePanel';
import { Segment } from 'semantic-ui-react'
import DetailedActivity from './activities/DetailedActivity';
import ActivityGraph from './activities/ActivityGraph';

class ActivityOverview extends Component {

  constructor(props) {
    super(props);
    this.state = {
      selectedActivity: {
        activityId: "N/A",
        averageHeartRate: 0,
        date: null,
        description: "N/A",
        distance: 0,
        maxHeartRate: 0,
        pace: 0,
        time: 0,
        type: "N/A",
        location: null
      }
    };
  }

  renderActivity(activityId) {
    let activity = this.props.activities.filter(activity => activity.activityId === activityId);
    this.setState({ selectedActivity: activity.length > 0 ? activity[0] : null });
  }

  render() {
    return (
      <Segment.Group horizontal>
        <Segment compact basic className="rt-statistics-segment">
          <MePanel me={this.props.me} loading={this.props.loading} />
        </Segment>
        <Segment padded loading={this.props.loading} basic>
          <ActivityGraph
            loading={this.props.loading}
            chartData={this.props.chartData}
            activities={this.props.activities}
            fromDate={this.props.fromDate}
            toDate={this.props.toDate}
            pointOnClickHandler={this.renderActivity.bind(this)}
          />
          <DetailedActivity
            loading={this.props.loading}
            activity={this.state.selectedActivity}
          />
        </Segment>
      </Segment.Group>
    );
  }
}

export default ActivityOverview;
