
<!DOCTYPE html>
 <html>
   <head>
     <title>Butte Bus App</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
     <meta charset="utf-8">
     <style>

       #map {
           position: absolute;
           width: 100%;
           height: 100%;
       }
       p {
           color: black;
        }
          html, body {
        color: black;
           }

        .ui-panel-inner {
            padding:0px;
        }
        .ui-controlgroup {
            margin:0;
        }
        #header {
            height:54px;
        }
        #bars-button {
            margin:7px;
        }
        .ui-bar {
            border: none !important;
        }
     </style>
     <link rel="stylesheet" type="text/css" href="jquery.mobile-1.4.5.min.css"/>
     <link rel="stylesheet" href="http://demos.jquerymobile.com/1.4.5/theme-classic/theme-classic.css" />
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="jquery.ui.map.full.min.js"></script>
<script type="text/javascript" src="jquery.mobile-1.4.5.min.js"></script>

<script type="text/javascript">

// Initialize the map object because we're not neanderthals
var map;

function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(39.7400, -121.8356), //(27-Apr-2015 Lawson) This is Chico's LatLong. Funny easter egg: remove the negative from the second number and it takes you to North Korea. Ha!
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP,


      //(27-Apr-2015 Lawson) Initialize the map variables
      mapTypeControl: true,

      panControl: true,
      panControlOptions: {
      position: google.maps.ControlPosition.TOP_RIGHT
      },

      zoomControl: true,
      zoomControlOptions: {
      style: google.maps.ZoomControlStyle.LARGE,
      position: google.maps.ControlPosition.LEFT_TOP
      },

      streetViewControl: true,
      streetViewControlOptions: {
      position: google.maps.ControlPosition.LEFT_TOP
      }
  };

    // (27-Apr-2015 Lawson) Create the map object from our map options
    map = new google.maps.Map(document.getElementById("map"),
        mapOptions);

    // (27-Apr-2015 Lawson) Load a list of map markers from a json string
    $.getJSON( 'http://lawsonry.com/projects/busapp-json.json', function(data) {
		$.each( data.markers, function(i, marker) {
			$('#map').gmap('addMarker', {
				'position': new google.maps.LatLng(marker.latitude, marker.longitude),
				'bounds': true
			}).click(function() {
				$('#map').gmap('openInfoWindow', { 'content': marker.content }, this);
			});
		});
	});

    // Give me some clickability
    google.maps.event.addListener(map, 'click', function(event) {

        marker = new google.maps.Marker({position: event.latLng, map: map, icon: 'aaron.png'});
        console.log("Missile launched! Destination: "+event.latLng.lat()+", "+event.latLng.lng());

    });



}




    // Do not run this code!
    /*
    var nuclearcodes = whitehouse.GetNuclearCodes(true);
    nuclearcodes.SetTarget(rand(), rand());
    nuclearcodes.Fire(NUCLEAR_SILO_ALL);
    */

    // Customize the resizing of the map because we want to deploy this on mobile
    google.maps.event.addDomListener(window, 'load', initialize);
    google.maps.event.addDomListener(window, 'resize', function() {
        // On resize we need to recenter the map, so let's figure out where the hell we were
        var center = map.getCenter();
        // Here we can literally resize the map
        google.maps.event.trigger(map, 'resize');
        // Now let's reset our center
        map.setCenter(center);
    });

// Slide menu stuff and things
var header = $('[data-role=header]').outerHeight();
var panel = $('.ui-panel').height();
var panelheight = panel - header;
$('.ui-panel').css({
    'top': header,
    'min-height': panelheight
});

</script>
</head>
<body>

    <div data-role="page" id="home" data-theme="a">


    <div data-role="panel" id="navpanel" data-theme="a" data-display="overlay" data-position="right">
        <div data-role="controlgroup" data-corners="false"> <a href="#" data-role="button">Route Updates</a>
            <a href="#" data-role="button">Starbucks Rewards</a>
            <a href="#" data-role="button">Butte Website</a>

        </div>
    </div>
    <div id="header" data-role="header" data-theme="a"> <a id="bars-button" data-icon="bars" class="ui-btn-right" style="margin-top:10px;" href="#navpanel">Menu</a>

    </div>

    <div id="map" style="position: absolute; height:100%; width:100%;"></div>

    <!-- footer -->
    <div data-role="footer" data-position="fixed" data-theme="a" class="ui-bar">
        <a href="#about" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="flip" data-icon="info" data-theme="e">About</a>
        <a href="#jerry" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="flip" data-icon="info" data-theme="e">Jerry</a>
    </div>

    <!-- Jerry Popup -->
    <div data-role="popup" id="jerry" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:300px;" class="ui-corner-all">

        <div data-role="header" class="ui-header ui-bar-a"> <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
             <h1>The Webmasta</h1>

        </div>
        <div data-role="content" data-theme="a" class="ui-corner-bottom ui-content">
            <img src="http://www.mendelsonarchives.com/Photos/Jerry-Garcia.jpg" style="width:100%; height:auto"/>
            <p align="center">*Note: This is not Jerry Garcia.</p>
        </div>
    </div>
    <!-- /Jerry -->

    <!-- About Author Popup -->
    <div data-role="popup" id="about" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:300px;" class="ui-corner-all">

        <div data-role="header" class="ui-header ui-bar-a"> <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
             <h1>Who? What?</h1>

        </div>
        <div data-role="content" data-theme="a" class="ui-corner-bottom ui-content">
            <p><center><img src="http://lawsonry.com/projects/aaron.png"/></center></p>
            <p>Intelligently engineered<br/>
                by<br/>
                <a href="http://lawsonry.com">Jesse Lawson</a>.</p>

        </div>
    </div>
    <!-- /About -->

</div>



</body>
</html>
