\chapter{Cahier des charges}

\section{Introduction}

Le projet \textit{PFCLS} a pour but d’implémenter le jeu \textit{Pierre Feuille Ciseaux Lézard Spock}. Les règles de jeu sont résumées dans la figure~\ref{fig:schema_regles} :

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.3]{img/schema_regles.png}
\caption{Schéma des règles du jeu Pierre Feuille Ciseaux Lézard Spock}
\label{fig:schema_regles}
\end{figure}

\subsection{Objectifs}

Cette partie présente les spécifications des exigences logicielles du projet open source \textit{Pierre Feuille Ciseaux Lézard Spock}.
Il peut être utilisé comme base pour une possible extension du projet actuel. Ce cahier des charges est rédigé sous le standard IEEE 830~\cite{ieee_830}.

\subsection{Conventions du document}

PFCLS a été développé pendant l'écriture de la présente partie, donc certaines exigences stipulées ici ne sont pas encore satisfaites. Il est très important de mettre à jour cette partie avec toutes les futures exigences et de clarifier chaque élément à des fins de cohérence, de sorte que cette partie puisse rester utile.\\

Certaines informations techniques ont été inclues, d'autres non, les lecteurs peuvent se référer au glossaire disponible en début de document pour trouver les définitions des termes spécifiques.

\subsection{Public visé}

Cette partie est destinée :\\

\begin{itemize}
\item[$\circ$] aux développeurs qui peuvent examiner les capacités du projet et plus facilement comprendre où leurs efforts devraient être ciblés pour améliorer ou ajouter des fonctionnalités au projet (il établit les lignes directrices pour un développement futur)
\item[$\circ$] aux testeurs qui peuvent utiliser cette partie comme base pour leur stratégie de tests, certains bugs peuvent être plus faciles à déceler à l'aide du cahier des charges
\item[$\circ$] aux utilisateurs finaux de l'application qui souhaitent en savoir plus sur ce que ce projet peut faire
\end{itemize}

\section{Description générale}

Cette section donnera un aperçu de l’ensemble du système. Le système sera expliqué dans son contexte pour montrer comment le système interagit avec les utilisateurs et les fonctionnalités principales seront introduites. Enfin, les contraintes et les hypothèses pour le système seront présentées.

\subsection{Perspective du produit}

Le système va devoir communiquer avec l’utilisateur afin de récupérer les données, les traiter et enfin afficher les résultats. Il devra être capable de récupérer les coups joués et d’afficher les résultats.
Le jeu \textit{Pierre Feuille Ciseaux Lézard Spock} ne fonctionne pas de façon indépendante. Comme c’est un produit centré sur les données, il devra avoir un endroit pour les stocker. Pour ça une base de données devra être utilisée pour stocker ou récupérer les données de joueurs ou de jeu. Toutes les communications à la base de données se feront par Internet.\\

Le système de notre projet comporte 1 acteur et 2 systèmes qui coopèrent. Le joueur est notre seul acteur. Le système principal (gestion des utilisateurs, système de jeu et IA) et la base de données sont les 2 systèmes qui coopèrent.
Chaque acteur accède au système par Internet et communique avec la base de données via le système principal, voir figure~\ref{fig:cdc_diag_block}.\\
Dans la suite du cahier des charges, les acteurs seront désignés par le terme joueurs et le système de notre projet sera désigné par le terme application.

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.65]{img/cdc_diag_block.png}
\caption{Schéma fonctionnel (block diagram)}
\label{fig:cdc_diag_block}
\end{figure}

\subsection{Fonctions du produit}

L'application doit offrir deux fonctionnalités principales à un joueur : jouer contre un autre joueur et jouer contre le système (IA).\\
Le système principal doit interagir avec le joueur pour récupérer les coups qu'il joue, les transmettre à la base de données et afficher les résultats intermédiaires et finaux. Il doit aussi gérer les cas d'erreurs lors d'une tentative d'accès à une partie non autorisée de l'application et la synchronisation avec la base de données pour toujours être dans un état cohérent. La figure~\ref{fig:cdc_diag_cas_dutilisations} détaille de façon exhaustive les fonctionnalités auxquelles le joueur a accès.

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.6]{img/cdc_diag_cas_dutilisations.png}
\caption{Diagramme des cas d'utilisations}
\label{fig:cdc_diag_cas_dutilisations}
\end{figure}

\subsection{Caractéristiques des utilisateurs}

Ce projet ne se réfère qu'à un seul type d'utilisateur : le joueur. Celui-ci interagit avec l'application via une interface web. Cette interface doit être \textit{\gls{user-friendly}}, intuitive et accessible.

\subsection{Environnement de fonctionnement}

PFCLS est une application indépendante d'un point de vue du système, mais qui a besoin d'un navigateur et d'une connexion Internet pour fonctionner.
L'application a été testée sous les navigateurs suivants :\\

\begin{itemize}
\item[$\circ$] Firefox 33
\item[$\circ$] Chrome 38
\item[$\circ$] Opera 26
\item[$\circ$] Safari 8
\item[$\circ$] Internet Explorer 11
\end{itemize}

Ainsi que sous les navigateurs mobiles suivants :\\

\begin{itemize}
\item[$\circ$] Safari (iOS 8)
\item[$\circ$] Chrome (iOS 8, Android 4.1)
\item[$\circ$] Internet Explorer Mobile (Windows Phone 8.10)
\end{itemize}

Aucune autre condition n'est requise pour faire fonctionner l'application.

\subsection{Contraintes de conception et d’implémentation}

PFCLS est une application indépendante développée en PHP/SQL avec une interface utilisateur écrite en HTML/CSS/JS.\\
Le projet est sous licence \textit{GNU/GPLv3}~\cite{gnugplv3}. Tous ceux qui souhaitent utiliser ou travailler sur le projet doivent accepter pleinement les termes de ce type de licence. \\

L’interface web de l’application impose de fortes contraintes au projet. En effet, comme il existe plusieurs navigateurs, chacun avec ses propres caractéristiques, l’interface ne sera pas exactement la même pour tous les utilisateurs. Des différences d’affichage peuvent survenir.

La connexion Internet est aussi une exigence pour l’application. Comme celle-ci récupère et stocke les données dans une base de données via Internet, il est crucial d’avoir une connexion Internet pour que l’application fonctionne.

\subsection{Hypothèses et dépendances}

Une connexion Internet stable (minimum ADSL) est requise pour que l’application fonctionne correctement. Si la connexion est peu stable, trop faible, il se peut que le joueur rencontre des difficultés à se connecter à l’interface web ou à jouer une partie complète sans être déconnecté.\\

Une autre dépendance est le navigateur web. Si celui-ci n’est pas à jour, il se peut que l’interface web ne soit pas totalement fonctionnelle, qu’elle offre des fonctionnalités réduites ou qu’elle soit complètement non opérationnelle.

\section{Interfaces externes}

\subsection{Interface joueurs (\textit{GUI})}

Lors de sa première utilisation, un joueur devra se connecter pour accéder aux fonctionnalités du système. Si le joueur n'est pas enregistré, il devra s'inscrire.\\

Si ce n'est pas sa première utilisation, c'est-à-dire s'il est connecté, la page par défaut sera la page de choix de jeu. Il doit aussi voir le menu qui liste toutes les actions disponibles, voir figure~\ref{fig:cdc_croquis_main_menu}.\\

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.5]{img/cdc_croquis_main_menu.png}
\caption{Croquis du menu principal}
\label{fig:cdc_croquis_main_menu}
\end{figure}

Chaque joueur doit avoir un profil où il peut modifier ses informations (pseudo, mot de passe, etc.) et supprimer son propre compte. Il peut aussi consulter le classement.\\

Dans la figure~\ref{fig:cdc_croquis_main_menu}, on peut voir le choix possible entre une partie contre l'IA (un joueur) ou contre un autre joueur (deux joueurs). Quand le joueur choisit une partie contre l'IA, il lui ai demandé de saisir un nombre de manches et la partie démarre immédiatement. En revanche, quand le joueur choisit une partie contre un autre joueur, le joueur voit la liste des joueurs en attente d'un adversaire et doit aussi avoir la possibilité de saisir un nombre de manches.

Dans la vue de choix de la figure à jouer lors d'une partie, chaque joueur devra choisir la figure qu'il souhaite en ayant simplement à cliquer dessus. Chaque figure est représentée par une image avec son nom, voir figure~\ref{fig:cdc_croquis_choix_figure}.

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.5]{img/cdc_croquis_choix_figure.png}
\caption{Croquis du choix de la figure à jouer}
\label{fig:cdc_croquis_choix_figure}
\end{figure}

La vue de résultat du coup montrera les deux figures jouées ainsi que la vainqueur de la manche, voir figure~\ref{fig:cdc_croquis_resultat_manche}.

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.5]{img/cdc_croquis_resultat_manche.png}
\caption{Croquis du résultat de la manche}
\label{fig:cdc_croquis_resultat_manche}
\end{figure}

La vue de résultat de la partie affiche le nom du gagnant, le score ainsi qu'un petit message, voir figure~\ref{fig:cdc_croquis_resultat_partie}.

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.5]{img/cdc_croquis_resultat_partie.png}
\caption{Croquis du résultat de la partie}
\label{fig:cdc_croquis_resultat_partie}
\end{figure}

\subsection{Interfaces matérielles}

L’utilisateur peut accéder à l’application à partir d’un ordinateur, d’un smartphone ou d’une tablette.

\subsection{Interfaces logicielles}

Le système principal communique avec la base de données afin d’obtenir des informations sur les joueurs, le classement, le jeu ou les parties pour les représenter sous forme graphique au joueur, voir figure~\ref{fig:cdc_diag_block}. La communication entre la base de données et le système principal se compose d’opérations de lecture et d’écriture des données. Il n’y aucune communication directe entre le joueur et la base de données.

\subsection{Protocoles et interfaces de communications}

La communication entre les deux parties de l’application est importante, car chacune dépend de l’autre. Cependant, la manière dont la communication est réalisée n’est pas importante, car c’est le système principal lui-même qui gère la communication.\\
Comme notre application repose sur la base de données, il y a de très nombreux échanges avec celle-ci. Pour que l’application puisse supporter un nombre conséquent de requêtes simultanées et qu’elle assure sa cohérence à chaque instant, elle doit être suffisamment puissante. C’est donc la puissance du serveur où est hébergé la base de données qui déterminera le nombre de transactions maximales par seconde qu’elle peut traiter ainsi que le nombre maximal de joueurs simultanés possibles sur l’interface web.

\subsection {Fonctionnalités du système}

\subsubsection{Inscription utilisateur}
\label{cdc_fct_sys_inscription}

L'utilisateur doit être en mesure de s'inscrire grâce à l'interface web. Il doit fournir un pseudo, un mot de passe, une adresse e-mail, son sexe et son âge.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} I1
\item[$\circ$] \textbf{Nom :} \og Inscription \fg
\item[$\circ$] \textbf{Type :} Formulaire
  \begin{itemize}
  \item (I11) \og Pseudo \fg : zone de texte
  \item (I12) \og Sexe \fg : bouton radio
  \item (I13) \og Âge \fg : zone de texte (entier)
  \item (I14) \og Mot de passe \fg : zone de texte
  \item (I15) \og Confirmation de mot de passe \fg : zone de texte
  \item (I16) \og E-mail \fg : zone de texte (e-mail)
  \end{itemize}
\item[$\circ$] \textbf{Prérequis :} Ne pas être connecté sur le site 
\item[$\circ$] \textbf{Postrequis :} tous les champs sont bien remplis, les deux mots de passe sont identiques et le pseudo/e-mail n'est pas déjà utilisé 
\end{itemize}

\subsubsection{Connexion utilisateur}
\label{cdc_fct_sys_connexion}

L'utilisateur doit être en mesure de se connecter grâce à l'interface web. Il doit fournir un pseudo et un mot de passe.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} C1
\item[$\circ$] \textbf{Nom :} \og Connexion \fg
\item[$\circ$] \textbf{Type :} Formulaire
  \begin{itemize}
  \item (C11) \og Pseudo \fg : zone de texte
  \item (C12) \og Mot de passe \fg : zone de texte
  \end{itemize}
\item[$\circ$] \textbf{Prérequis :} Ne pas être connecté sur le site 
\item[$\circ$] \textbf{Postrequis :} tous les champs sont bien remplis et correspondent aux données de la base de données
\end{itemize}

\subsubsection{Profil utilisateur}
\label{cdc_fct_sys_voirprofil}

La page du profil utilisateur affiche trois onglets, chacun permettant de voir une partie précise du profil :\\

\begin{itemize}
\item[$\circ$] Onglet \textit{Profil} (O1) affiche les informations personnelles du joueur
\item[$\circ$] Onglet \textit{Statistiques de jeu} (O2) affiche les statistiques de jeu du joueur
\item[$\circ$] Onglet \textit{Historique des parties} (O3) affiche la liste des 10 dernières parties jouées par le joueur
\end{itemize}

Il est à noter que lorsque le joueur arrive sur la page de profil, c'est l'onglet \textit{Profil} (O1) qui s'affiche par défaut.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} O1
\item[$\circ$] \textbf{Nom :} \og Profil \fg
\item[$\circ$] \textbf{Type :} Bouton
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion}
\item[$\circ$] \textbf{Action :} affiche les informations personnelles du joueur, pseudo, sexe, âge, classement, ratio ainsi qu'un lien pour modifier son profil et le supprimer
\item[$\circ$] \textbf{Postrequis :} \textit{N/A}
\end{itemize}

\begin{itemize}
\item[$\circ$] \textbf{ID :} O2
\item[$\circ$] \textbf{Nom :} \og Statistiques de jeu \fg
\item[$\circ$] \textbf{Type :} Bouton
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion}
\item[$\circ$] \textbf{Action :} affiche les statistiques de jeu du joueur, comme les coups qu'ils jouent le plus en premier, etc.
\item[$\circ$] \textbf{Postrequis :} \textit{N/A}
\end{itemize}

\begin{itemize}
\item[$\circ$] \textbf{ID :} O3
\item[$\circ$] \textbf{Nom :} \og Historique des parties \fg
\item[$\circ$] \textbf{Type :} Bouton
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion}
\item[$\circ$] \textbf{Action :} affiche sous forme d'une liste les dernières parties jouées par le joueur, avec le gagnant et le score
\item[$\circ$] \textbf{Postrequis :} \textit{N/A}
\end{itemize}

\label{cdc_fct_sys_modifierprofil}
\textbf{Modifier son profil utilisateur} \\

L'utilisateur doit être en mesure de modifier ses informations personnelles, comme son pseudo, son mot de passe ou son âge. Il doit fournir un pseudo et un e-mail qui ne sont pas déjà utilisé par un autre joueur.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} P1
\item[$\circ$] \textbf{Nom :} \og Modifier profil \fg
\item[$\circ$] \textbf{Type :} Formulaire
  \begin{itemize}
  \item (P11) \og Pseudo \fg : zone de texte
  \item (P13) \og Âge \fg : zone de texte (entier)
  \item (P14) \og Mot de passe \fg : zone de texte
  \item (P16) \og E-mail \fg : zone de texte (e-mail)
  \end{itemize}
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion}
\item[$\circ$] \textbf{Action :} modifie le profil du joueur avec les informations saisies
\item[$\circ$] \textbf{Postrequis :} tous les champs sont bien remplis et le pseudo/e-mail n'est pas déjà utilisé 
\end{itemize}

\label{cdc_fct_sys_supprimerprofil}
\textbf{Supprimer son profil utilisateur} \\

L'utilisateur doit être en mesure de supprimer son profil, c'est-à-dire que toutes les informations de son profil seront supprimées. Il n'aura plus la possibilité de se connecter.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} P2
\item[$\circ$] \textbf{Nom :} \og Supprimer son profil \fg
\item[$\circ$] \textbf{Type :} Bouton
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion}
\item[$\circ$] \textbf{Action :} supprime le profil du joueur de façon définitive
\item[$\circ$] \textbf{Postrequis :} \textit{N/A} 
\end{itemize}

\subsubsection{Classement}
\label{cdc_fct_sys_classement}

L'utilisateur doit être en mesure de voir le classement général du site, sous la forme d'un tableau, classé selon le ratio, de façon décroissante. Chaque élément de la liste représente un joueur, il doit inclure le classement, le pseudo et le ratio. Aucune limite d'affichage n'est requise pour le moment.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} C1
\item[$\circ$] \textbf{Nom :} \og Classement \fg
\item[$\circ$] \textbf{Prérequis :} \textit{N/A}
\item[$\circ$] \textbf{Action :} affiche sous forme de liste le classement des joueurs
\item[$\circ$] \textbf{Postrequis :} \textit{N/A}
\end{itemize}

\subsubsection{Rechercher un adversaire}
\label{cdc_fct_sys_searchadvers}

L'utilisateur doit être en mesure de rechercher un adversaire pour jouer une partie. Dans ce cas, il peut directement choisir son adversaire dans la liste des adversaires en attente ou alors choisir un nombre de manches à jouer et se mettre en attente d'un adversaire. Il ne peut y avoir deux joueurs en attente d'un adversaire avec le même nombre de manches ; si c'est le cas, les deux joueurs sont connectés pour jouer la partie.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} R1
\item[$\circ$] \textbf{Nom :} \og Rechercher adversaire \fg
\item[$\circ$] \textbf{Type :} Bouton
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion} et ne pas être déjà en cours de partie
\item[$\circ$] \textbf{Action :} lance la partie si l'adversaire est trouvé directement ou met en attente d'un adversaire
\item[$\circ$] \textbf{Postrequis :} \textit{N/A}
\end{itemize}

\subsubsection{Jouer une partie contre un autre joueur}
\label{cdc_fct_sys_jouer_autrejoueur}

L'utilisateur doit être en mesure de jouer une partie contre un autre joueur. Quand il a trouvé son adversaire, la partie est lancée et le joueur est invité à chaque tour à choisir la figure qu'il souhaite jouer.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} J1
\item[$\circ$] \textbf{Nom :} \og Jouer contre un joueur \fg
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion} et section~\ref{cdc_fct_sys_searchadvers}
\item[$\circ$] \textbf{Action :} choisir une figure et affiche le résultat à chaque tour
\item[$\circ$] \textbf{Postrequis :} la figure choisie est valide
\end{itemize}

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.45]{img/cdc_diag_etat_trans_jouerpartie.png}
\caption{Diagramme d'états-transitions \textit{Jouer une partie contre un autre joueur}}
\label{fig:cdc_diag_etat_trans_jouerpartie}
\end{figure}

\begin{figure}[ht!]
\centering
\includegraphics[scale=0.5]{img/cdc_diag_activi_jouerpartie.png}
\caption{Diagramme d'activité \textit{Jouer une partie contre un autre joueur}}
\label{fig:cdc_diag_activi_jouerpartie}
\end{figure}

Les diagrammes d'états-transitions (voir figure~\ref{fig:cdc_diag_etat_trans_jouerpartie}) et d'activité (voir figure~\ref{fig:cdc_diag_activi_jouerpartie}) \textit{Jouer une partie contre un autre joueur}, détaillent de façon plus explicite la fonctionnalité~\ref{cdc_fct_sys_jouer_autrejoueur}. Le joueur choisit le nombre de manches puis attend le chargement de la page. Quand le joueur est synchronisé, il peut choisir la figure qu'il va jouer. Le système récupère alors son choix et le compare avec celui de son adversaire, puis il affiche le résultat : gagnant, perdant ou draw. Si c'est un draw, on invite les deux joueurs à choisir à nouveau une figure. Sinon, il signale la manche comme terminée à la base de données. S'il reste encore des manches à jouer ou qu'il n'y a pas de gagnant, on invite le joueur à choisir sa figure, etc. sinon on signale la partie terminée et on enregistre les statistiques dans la base de données.\\

\subsubsection{Jouer une partie contre l'IA}

\label{cdc_fct_sys_jouer_ia}

L'utilisateur doit être en mesure de jouer une partie contre l'IA. Quand la partie est lancée, le joueur est invité à chaque tour à choisir la figure qu'il souhaite jouer.\\

\begin{itemize}
\item[$\circ$] \textbf{ID :} J2
\item[$\circ$] \textbf{Nom :} \og Jouer contre l'IA \fg
\item[$\circ$] \textbf{Prérequis :} section~\ref{cdc_fct_sys_connexion} et pas déjà en cours de partie contre l'IA
\item[$\circ$] \textbf{Action :} choisir une figure et affiche le résultat à chaque tour
\item[$\circ$] \textbf{Postrequis :} la figure choisie est valide
\end{itemize}

\section{Exigences non fonctionnelles}

\subsection{Performance}

\textit{PFCLS} est une application qui n’a besoin que de quelques ressources pour fonctionner. Il a été conçu pour ne pas retarder le fonctionnement des autres processus clés du système. Le temps de réponse du programme dépend uniquement du serveur web et du serveur de base de données, l’application est considérée temps réel.\\

Néanmoins, une forte affluence de requêtes sur une des deux ressources fera automatiquement ralentir l’autre.

\subsection{Exigences de sureté}

L’application doit s’assurer que toutes les données saisies par les utilisateurs soient valides.
De plus l’application doit, dans le cas d’une insertion de données invalides ou d’un accès non autorisé, fournir au joueur des messages d’erreur ou d’aide appropriés.

\subsection{Exigences de sécurité}

\textit{PFCLS} n’introduit aucun niveau de sécurité, en effet les données gérées ne sont pas critiques.  Les utilisateurs de l’application sont tous égaux donc il n’y a pas besoin d’avoir un niveau de permissions pour la gestion d’utilisateurs ou des données.

\subsection{Attributs de la qualité logiciel}

Cette application fournit une interface graphique agréable et \textit{user-friendly} avec des fonctions relativement simples. Tout utilisateur doit être en mesure d’utiliser \textit{PFCLS} sans aucune connaissance ou expérience spécifique. Les utilisateurs doivent seulement fournir des informations simples et en quelques clics, accèdent à toutes les fonctionnalités de l’application.