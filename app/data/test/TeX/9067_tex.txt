% Tikz File 'museum.tex'
\documentclass{standalone}
\usepackage{tikz}
\usepackage{tikz-er2}

\begin{document}

\begin{tikzpicture}
    % RELATIONS

    \node (artobject) {\textbf{ART\_OBJECTS}};
    \node [relation=8,
            below=2em of artobject.west,
            anchor=west] (artobjectsch) {
            \nodepart{one} \ \ \key{IDNo}\ \ \
                \nodepart{two} Year
                    \nodepart{three} Title
                        \nodepart{four} Description
                            \nodepart{five} Origin
                                \nodepart{six} Period
                                    \nodepart{seven} Style
                                        \nodepart{eight} Artist
        };

    \node [below=8em of artobject.west,
            anchor=west] (painting) {\textbf{PAINTING}};
    \node [relation=4,
            below=2em of painting.west,
            anchor=west] (paintingsch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} PaintType
                    \nodepart{three} Material
                        \nodepart{four} Style
        };

    \node [below=5em of painting.west,
            anchor=west] (sculpture) {\textbf{SCULPTURE}};
    \node [relation=5,
            below=2em of sculpture.west,
            anchor=west] (sculpturesch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} Material
                    \nodepart{three} Height
                        \nodepart{four} Weight
                            \nodepart{five} Style
        };

    \node [below=5em of sculpture.west,
            anchor=west] (statue) {\textbf{STATUE}};
    \node [relation=5,
            below=2em of statue.west,
            anchor=west] (statuesch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} Material
                    \nodepart{three} Height
                        \nodepart{four} Weight
                            \nodepart{five} Style
        };

    \node [below=5em of statue.west,
            anchor=west] (other) {\textbf{OTHER}};
    \node [relation=3,
            below=2em of other.west,
            anchor=west] (othersch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} Type
                    \nodepart{three} Style
        };

    \node [below=5em of other.west,
        anchor=west] (permanentcollection) {\textbf{PERMANENT\_COLLECTION}};
    \node [relation=4,
            below=2em of permanentcollection.west,
            anchor=west] (permanentcollectionsch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} DateAcquired
                    \nodepart{three} Cost
                        \nodepart{four} Display\_Status
        };

    \node [below=5em of permanentcollection.west,
            anchor=west] (borrowed) {\textbf{BORROWED}};
    \node [relation=4,
            below=2em of borrowed.west,
            anchor=west] (borrowedsch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} Borrowed\_From
                    \nodepart{three} DateBorrowed
                        \nodepart{four} DateReturned
        };

    \node [below=5em of borrowed.west,
            anchor=west] (exhibitions) {\textbf{EXHIBITIONS}};
    \node [relation=3,
            below=2em of exhibitions.west,
            anchor=west] (exhibitionssch) {
            \nodepart{one} \key{Name}
                \nodepart{two} StartDate
                    \nodepart{three} EndDate
        };

    \node [below=5em of exhibitions.west,
            anchor=west] (displayon) {\textbf{DISPLAY\_ON}};
    \node [relation=2,
            below=2em of displayon.west,
            anchor=west] (displayonsch) {
            \nodepart{one} \key{IDNo}
                \nodepart{two} \key{Exhibition\_Name}
        };

    \node [below=5em of displayon.west,
            anchor=west] (artist) {\textbf{ARTIST}};
    \node [relation=7,
            below=3em of artist.west,
            anchor=west] (artistsch) {
            \nodepart{one} \key{Name}
                \nodepart{two} DateBorn
                    \nodepart{three} DateDied
                        \nodepart{four} CountryOfOrigin
                            \nodepart{five} Period
                                \nodepart{six} MainStyle
                                    \nodepart{seven} Description
        };

    \node [below=5em of artist.west,
            anchor=west] (othercollection) {\textbf{OTHER\_COLLECTION}};
    \node [relation=6,
            below=2em of othercollection.west,
            anchor=west] (othercollectionsch) {
            \nodepart{one} \key{Name}
                \nodepart{two} Type
                    \nodepart{three} Description
                        \nodepart{four} Address
                            \nodepart{five} Phone
                                \nodepart{six} ContactPerson
        };

% FOREIGN KEYS

    \draw[relation_arrow] (paintingsch.one south)
        |- ($(paintingsch.one south) + (-1,-0.5)$)
        |- ($(artobjectsch.one south) + (0.5,-1.4)$)
        -- ($(artobjectsch.one south) + (0.5,0)$);
    \draw[relation_arrow] (sculpturesch.one south)
        |- ($(sculpturesch.one south) + (-1.5,-0.5)$)
        |- ($(artobjectsch.one south) + (0.3,-1.2)$)
        -- ($(artobjectsch.one south) + (0.3,0)$);
    \draw[relation_arrow] (statuesch.one south)
        |- ($(statuesch.one south) + (-2,-0.5)$)
        |- ($(artobjectsch.one south) + (0.1,-1)$)
        -- ($(artobjectsch.one south) + (0.1,0)$);
    \draw[relation_arrow] (othersch.one south)
        |- ($(othersch.one south) + (-2.5,-0.5)$)
        |- ($(artobjectsch.one south) + (-0.1,-0.8)$)
        -- ($(artobjectsch.one south) + (-0.1,0)$);
    \draw[relation_arrow] ($(permanentcollectionsch.one south) + (-0.1,0)$)
        |- ($(permanentcollectionsch.one south) + (-3,-0.5)$)
        |- ($(artobjectsch.one south) + (-0.3,-0.6)$)
        -- ($(artobjectsch.one south) + (-0.3,0)$);
    \draw[relation_arrow] (borrowedsch.one south)
        |- ($(borrowedsch.one south) + (-3.5,-0.5)$)
        |- ($(artobjectsch.one south) + (-0.5,-0.4)$)
        -- ($(artobjectsch.one south) + (-0.5,0)$);

    \draw[relation_arrow] ($(displayonsch.two north) + (0.5,0)$) --
        ++(0,0.8) -|
        ($(exhibitionssch.one south) + (0,-0.33)$) -|
        ($(exhibitionssch.one south) + (0,0)$);
    \draw[relation_arrow] (displayonsch.one south) --
        ++(0,-0.4) -|
        ($(borrowedsch.four south) + (2,0)$) |-
        ($(permanentcollectionsch.one south) + (0.1,-0.4)$) -|
        ($(permanentcollectionsch.one south) + (0.1,0)$);
    \draw[relation_arrow] (artobjectsch.eight south) --
        ++(0,-0.4) -|
        ($(artobjectsch.eight south) + (1,-0.4)$) |-
        ($(artistsch.one north) + (0,0.4)$) -|
        ($(artistsch.one north) + (0,0)$);


% notes
        %\node[blue] (notefordisplaya) [right =of permanentcollectionsch.four east];
        \node[blue] (notefordisplayb) [above right=5em and 0em of permanentcollectionsch.four east, , text width=4cm]{Add a type attribute to illustrate this specialization};
        \draw[blue,->,thick] (notefordisplayb) to [in=90,out=-120] (permanentcollectionsch.four north);
\end{tikzpicture}

\end{document}
