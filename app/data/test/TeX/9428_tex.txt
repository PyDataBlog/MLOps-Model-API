\hypertarget{classEd__connection}{
\section{Ed\_\-connection Class Reference}
\label{classEd__connection}\index{Ed\_\-connection@{Ed\_\-connection}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classEd__connection_a31ae0e49095b5784dcccc495d6e2bcfe}{Ed\_\-connection} (THD $\ast$thd)
\item 
bool \hyperlink{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}{execute\_\-direct} (LEX\_\-STRING sql\_\-text)
\item 
bool \hyperlink{classEd__connection_afd0499324ba204c8a00480a3706c5bfb}{execute\_\-direct} (\hyperlink{classServer__runnable}{Server\_\-runnable} $\ast$server\_\-runnable)
\item 
ulong \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count} () const 
\item 
ulonglong \hyperlink{classEd__connection_a9a52b3741287506751467dc789e43b8a}{get\_\-affected\_\-rows} () const 
\item 
ulonglong \hyperlink{classEd__connection_af9f38dcae86fb044aa86f3561b0faeef}{get\_\-last\_\-insert\_\-id} () const 
\item 
ulong \hyperlink{classEd__connection_a65a9517ea61d1a0c063f77e85415086d}{get\_\-warn\_\-count} () const 
\item 
\hyperlink{classList}{List}$<$ \hyperlink{classMYSQL__ERROR}{MYSQL\_\-ERROR} $>$ $\ast$ \hyperlink{classEd__connection_ae45b1a58fa5d5d87103a236aafd278a8}{get\_\-warn\_\-list} ()
\item 
const char $\ast$ \hyperlink{classEd__connection_a1fd0523739c4ded7cd0ff52e14b35a22}{get\_\-last\_\-error} () const 
\item 
\hypertarget{classEd__connection_aa9e13d5df46c9981352d06aa65dc7494}{
unsigned int {\bfseries get\_\-last\_\-errno} () const }
\label{classEd__connection_aa9e13d5df46c9981352d06aa65dc7494}

\item 
\hypertarget{classEd__connection_abfb6cd733295b3a134b10021f8cb48ef}{
const char $\ast$ {\bfseries get\_\-last\_\-sqlstate} () const }
\label{classEd__connection_abfb6cd733295b3a134b10021f8cb48ef}

\item 
\hyperlink{classEd__result__set}{Ed\_\-result\_\-set} $\ast$ \hyperlink{classEd__connection_ab9b5405ab89c8dc49082adf1a3be3354}{use\_\-result\_\-set} ()
\item 
\hyperlink{classEd__result__set}{Ed\_\-result\_\-set} $\ast$ \hyperlink{classEd__connection_ad80317ac21aa245c7a0d1162ac98b264}{store\_\-result\_\-set} ()
\item 
bool \hyperlink{classEd__connection_a2f88a7474b99c744ccfb9c1a14df7fb8}{has\_\-next\_\-result} () const 
\item 
bool \hyperlink{classEd__connection_aa4c7282bcb1c1fdf2fa966a2106c71bd}{move\_\-to\_\-next\_\-result} ()
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classEd__connection_a9c7f8d2a3f98c0505dc714383b23aecd}{
class \hyperlink{classEd__connection_a9c7f8d2a3f98c0505dc714383b23aecd}{Protocol\_\-local}}
\label{classEd__connection_a9c7f8d2a3f98c0505dc714383b23aecd}

\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{classEd__connection_a31ae0e49095b5784dcccc495d6e2bcfe}{
\index{Ed\_\-connection@{Ed\_\-connection}!Ed\_\-connection@{Ed\_\-connection}}
\index{Ed\_\-connection@{Ed\_\-connection}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{Ed\_\-connection}]{\setlength{\rightskip}{0pt plus 5cm}Ed\_\-connection::Ed\_\-connection (
\begin{DoxyParamCaption}
\item[{THD $\ast$}]{thd}
\end{DoxyParamCaption}
)}}
\label{classEd__connection_a31ae0e49095b5784dcccc495d6e2bcfe}
Construct a new \char`\"{}execute direct\char`\"{} connection.

The connection can be used to execute SQL statements. If the connection failed to initialize, the error will be returned on the attempt to execute a statement.

\begin{DoxyPrecond}{Precondition}
thd must have no open tables while the connection is used. However, \hyperlink{classEd__connection}{Ed\_\-connection} works okay in LOCK TABLES mode. Other properties of THD, such as the current warning information, errors, etc. do not matter and are preserved by \hyperlink{classEd__connection}{Ed\_\-connection}. One thread may have many Ed\_\-connections created for it.
\end{DoxyPrecond}
Create a new \char`\"{}execute direct\char`\"{} connection. 

\subsection{Member Function Documentation}
\hypertarget{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}{
\index{Ed\_\-connection@{Ed\_\-connection}!execute\_\-direct@{execute\_\-direct}}
\index{execute\_\-direct@{execute\_\-direct}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{execute\_\-direct}]{\setlength{\rightskip}{0pt plus 5cm}bool Ed\_\-connection::execute\_\-direct (
\begin{DoxyParamCaption}
\item[{LEX\_\-STRING}]{sql\_\-text}
\end{DoxyParamCaption}
)}}
\label{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}
Execute one SQL statement.

Until this method is executed, no other methods of \hyperlink{classEd__connection}{Ed\_\-connection} can be used. Life cycle of \hyperlink{classEd__connection}{Ed\_\-connection} is:

Initialized -\/$>$ a statement has been executed -\/$>$ look at result, move to next result -\/$>$ look at result, move to next result -\/$>$ ... moved beyond the last result == Initialized.

This method can be called repeatedly. Once it's invoked, results of the previous execution are lost.

A result of \hyperlink{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}{execute\_\-direct()} can be either:


\begin{DoxyItemize}
\item success, no result set rows. In this case \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} returns 0. This happens after execution of INSERT, UPDATE, DELETE, DROP and similar statements. Some other methods, such as \hyperlink{classEd__connection_a9a52b3741287506751467dc789e43b8a}{get\_\-affected\_\-rows()} can be used to retrieve additional result information.
\end{DoxyItemize}


\begin{DoxyItemize}
\item success, there are some result set rows (maybe 0). E.g. happens after SELECT. In this case \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} returns the number of columns in a result set and store\_\-result() can be used to retrieve a result set..
\end{DoxyItemize}


\begin{DoxyItemize}
\item an error, methods to retrieve error information can be used.
\end{DoxyItemize}

\begin{DoxyReturn}{Returns}
execution status 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em FALSE} & success, use \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} to determine what to do next. \\
\hline
{\em TRUE} & error, use \hyperlink{classEd__connection_a1fd0523739c4ded7cd0ff52e14b35a22}{get\_\-last\_\-error()} to see the error number.\\
\hline
\end{DoxyRetVals}
A simple wrapper that uses a helper class to execute SQL statements. \hypertarget{classEd__connection_afd0499324ba204c8a00480a3706c5bfb}{
\index{Ed\_\-connection@{Ed\_\-connection}!execute\_\-direct@{execute\_\-direct}}
\index{execute\_\-direct@{execute\_\-direct}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{execute\_\-direct}]{\setlength{\rightskip}{0pt plus 5cm}bool Ed\_\-connection::execute\_\-direct (
\begin{DoxyParamCaption}
\item[{{\bf Server\_\-runnable} $\ast$}]{server\_\-runnable}
\end{DoxyParamCaption}
)}}
\label{classEd__connection_afd0499324ba204c8a00480a3706c5bfb}
Same as the previous, but takes an instance of \hyperlink{classServer__runnable}{Server\_\-runnable} instead of SQL statement text.

\begin{DoxyReturn}{Returns}
execution status
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em FALSE} & success, use \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} if your code fragment is supposed to return a result set \\
\hline
{\em TRUE} & failure\\
\hline
\end{DoxyRetVals}
Execute a fragment of server functionality without an effect on thd, and store results in memory.

Conventions:
\begin{DoxyItemize}
\item the code fragment must finish with OK, EOF or ERROR.
\item the code fragment doesn't have to close thread tables, free memory, commit statement transaction or do any other cleanup that is normally done in the end of \hyperlink{group__Runtime__Environment_ga3ee16ca35fd31e7babfd4afbe8a5914f}{dispatch\_\-command()}.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em server\_\-runnable} & A code fragment to execute. \\
\hline
\end{DoxyParams}
\hypertarget{classEd__connection_a9a52b3741287506751467dc789e43b8a}{
\index{Ed\_\-connection@{Ed\_\-connection}!get\_\-affected\_\-rows@{get\_\-affected\_\-rows}}
\index{get\_\-affected\_\-rows@{get\_\-affected\_\-rows}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{get\_\-affected\_\-rows}]{\setlength{\rightskip}{0pt plus 5cm}ulonglong Ed\_\-connection::get\_\-affected\_\-rows (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_a9a52b3741287506751467dc789e43b8a}
Get the number of affected (deleted, updated) rows for the current statement. Can be used for statements with \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} == 0.

\begin{DoxySeeAlso}{See also}
Documentation for C API function mysql\_\-affected\_\-rows(). 
\end{DoxySeeAlso}
\hypertarget{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{
\index{Ed\_\-connection@{Ed\_\-connection}!get\_\-field\_\-count@{get\_\-field\_\-count}}
\index{get\_\-field\_\-count@{get\_\-field\_\-count}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{get\_\-field\_\-count}]{\setlength{\rightskip}{0pt plus 5cm}ulong Ed\_\-connection::get\_\-field\_\-count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}
Get the number of result set fields.

This method is valid only if we have a result: \hyperlink{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}{execute\_\-direct()} has been called. Otherwise the returned value is undefined.

\begin{DoxySeeAlso}{See also}
Documentation for C API function mysql\_\-field\_\-count() 
\end{DoxySeeAlso}
\hypertarget{classEd__connection_a1fd0523739c4ded7cd0ff52e14b35a22}{
\index{Ed\_\-connection@{Ed\_\-connection}!get\_\-last\_\-error@{get\_\-last\_\-error}}
\index{get\_\-last\_\-error@{get\_\-last\_\-error}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{get\_\-last\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ Ed\_\-connection::get\_\-last\_\-error (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_a1fd0523739c4ded7cd0ff52e14b35a22}
The following members are only valid if \hyperlink{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}{execute\_\-direct()} or \hyperlink{classEd__connection_aa4c7282bcb1c1fdf2fa966a2106c71bd}{move\_\-to\_\-next\_\-result()} returned an error. They never fail, but if they are called when there is no result, or no error, the result is not defined. \hypertarget{classEd__connection_af9f38dcae86fb044aa86f3561b0faeef}{
\index{Ed\_\-connection@{Ed\_\-connection}!get\_\-last\_\-insert\_\-id@{get\_\-last\_\-insert\_\-id}}
\index{get\_\-last\_\-insert\_\-id@{get\_\-last\_\-insert\_\-id}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{get\_\-last\_\-insert\_\-id}]{\setlength{\rightskip}{0pt plus 5cm}ulonglong Ed\_\-connection::get\_\-last\_\-insert\_\-id (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_af9f38dcae86fb044aa86f3561b0faeef}
Get the last insert id, if any.

\begin{DoxySeeAlso}{See also}
Documentation for mysql\_\-insert\_\-id(). 
\end{DoxySeeAlso}
\hypertarget{classEd__connection_a65a9517ea61d1a0c063f77e85415086d}{
\index{Ed\_\-connection@{Ed\_\-connection}!get\_\-warn\_\-count@{get\_\-warn\_\-count}}
\index{get\_\-warn\_\-count@{get\_\-warn\_\-count}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{get\_\-warn\_\-count}]{\setlength{\rightskip}{0pt plus 5cm}ulong Ed\_\-connection::get\_\-warn\_\-count (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_a65a9517ea61d1a0c063f77e85415086d}
Get the total number of warnings for the last executed statement. Note, that there is only one warning list even if a statement returns multiple results.

\begin{DoxySeeAlso}{See also}
Documentation for C API function mysql\_\-num\_\-warnings(). 
\end{DoxySeeAlso}
\hypertarget{classEd__connection_ae45b1a58fa5d5d87103a236aafd278a8}{
\index{Ed\_\-connection@{Ed\_\-connection}!get\_\-warn\_\-list@{get\_\-warn\_\-list}}
\index{get\_\-warn\_\-list@{get\_\-warn\_\-list}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{get\_\-warn\_\-list}]{\setlength{\rightskip}{0pt plus 5cm}{\bf List}$<${\bf MYSQL\_\-ERROR}$>$$\ast$ Ed\_\-connection::get\_\-warn\_\-list (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_ae45b1a58fa5d5d87103a236aafd278a8}
Get the server warnings as a result set. The result set has fixed metadata: The first column is the level. The second is a numeric code. The third is warning text. \hypertarget{classEd__connection_a2f88a7474b99c744ccfb9c1a14df7fb8}{
\index{Ed\_\-connection@{Ed\_\-connection}!has\_\-next\_\-result@{has\_\-next\_\-result}}
\index{has\_\-next\_\-result@{has\_\-next\_\-result}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{has\_\-next\_\-result}]{\setlength{\rightskip}{0pt plus 5cm}bool Ed\_\-connection::has\_\-next\_\-result (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_a2f88a7474b99c744ccfb9c1a14df7fb8}
If the query returns multiple results, this method can be checked if there is another result beyond the next one. Never fails. \hypertarget{classEd__connection_aa4c7282bcb1c1fdf2fa966a2106c71bd}{
\index{Ed\_\-connection@{Ed\_\-connection}!move\_\-to\_\-next\_\-result@{move\_\-to\_\-next\_\-result}}
\index{move\_\-to\_\-next\_\-result@{move\_\-to\_\-next\_\-result}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{move\_\-to\_\-next\_\-result}]{\setlength{\rightskip}{0pt plus 5cm}bool Ed\_\-connection::move\_\-to\_\-next\_\-result (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_aa4c7282bcb1c1fdf2fa966a2106c71bd}
Only valid to call if \hyperlink{classEd__connection_a2f88a7474b99c744ccfb9c1a14df7fb8}{has\_\-next\_\-result()} returned true. Otherwise the result is undefined. \hypertarget{classEd__connection_ad80317ac21aa245c7a0d1162ac98b264}{
\index{Ed\_\-connection@{Ed\_\-connection}!store\_\-result\_\-set@{store\_\-result\_\-set}}
\index{store\_\-result\_\-set@{store\_\-result\_\-set}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{store\_\-result\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ed\_\-result\_\-set} $\ast$ Ed\_\-connection::store\_\-result\_\-set (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{classEd__connection_ad80317ac21aa245c7a0d1162ac98b264}
Provided \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} is not 0, this never fails. You must free the returned result set. This can be called only once after \hyperlink{classEd__connection_a58f9da6381da4bc1455d7f22d1620d2d}{execute\_\-direct()}. Should be used when you would like to get the results and destroy the connection.

Release ownership of the current result set to the client.

Since we use a simple linked list for result sets, this method uses a linear search of the previous result set to exclude the released instance from the list.

\begin{Desc}
\item[\hyperlink{todo__todo000069}{Todo}]Use double-\/linked list, when this is really used.\end{Desc}


XXX: This has never been tested with more than one result set!

\begin{DoxyPrecond}{Precondition}
There must be a result set. 
\end{DoxyPrecond}
\hypertarget{classEd__connection_ab9b5405ab89c8dc49082adf1a3be3354}{
\index{Ed\_\-connection@{Ed\_\-connection}!use\_\-result\_\-set@{use\_\-result\_\-set}}
\index{use\_\-result\_\-set@{use\_\-result\_\-set}!Ed_connection@{Ed\_\-connection}}
\subsubsection[{use\_\-result\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ed\_\-result\_\-set}$\ast$ Ed\_\-connection::use\_\-result\_\-set (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classEd__connection_ab9b5405ab89c8dc49082adf1a3be3354}
Provided \hyperlink{classEd__connection_a0d4c06d116fd9ab7c0a375071cc1f9c7}{get\_\-field\_\-count()} is not 0, this never fails. You don't need to free the result set, this is done automatically when you advance to the next result set or destroy the connection. Not returning const because of \hyperlink{classList}{List} iterator not accepting Should be used when you would like \hyperlink{classEd__connection}{Ed\_\-connection} to manage result set memory for you. 

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
sql\_\-prepare.h\item 
\hyperlink{sql__prepare_8cc}{sql\_\-prepare.cc}\end{DoxyCompactItemize}
