REM @echo off
rem ¶à°æ±¾MySQL¹ÜÀí,
rem ´ýÉý¼¶£ºinnodb¿âÔÚ²»Í¬°æ±¾ÇÐ»»Ö®ºó»á³öÎÊÌâ

echo. windowsÃüÁîÐÐÆô¶¯mysql·þÎñÆ÷
echo. ¹¦ÄÜ£ºÍ¨¹ýÅú´¦ÀíÎÄ¼þ¹ÜÀímysql·þÎñÆ÷µÄÆô¶¯¡¢¹Ø±Õ¡¢ÖØÆô¡£
echo. author£ºgwang(mail@wanggangzero.cn)
echo. version:
echo.    1.0.0  Created by gwang 2016.09.02.


rem ÉèÖÃ°æ±¾ Ä¬ÈÏÆô¶¯5.6
set ver=-5.5.24
REM set ver=-5.6
REM set ver=-5.7.14-winx64


:: ÉèÖÃ½ø³ÌÃû
set exe=mysqld.exe 
rem Éè¶¨±äÁ¿
set hider=plugin\RunHiddenConsole.exe
set pro=%~dp0MySQL\mysql%ver%\bin\mysqld.exe
set cmd=%hider% %pro%
   
:: ¼ì²éÊÇ·ñ´æÔÚ¶ÔÓ¦½ø³Ì      
set curCount=0
call f_getproccount %exe% curCount


:: Æô¶¯Ç°¼ì²éÏÂÊÇ·ñÒÑ¾­´æÔÚÁË·þÎñÆ÷½ø³Ì£¬ÌáÇ°¹Ø±Õ·þÎñÆ÷½ø³Ì
REM start /b /wait mysql_stop.bat
if %curCount% neq 0 (
    echo ÕýÔÚÍË³ö%exe%½ø³Ì......
    :: ²ÉÓÃ½ø³Ì¹ÜÀíÆ÷Ç¿ÖÆÍË³ö
    plugin\process.exe -k %exe%
) else (
    echo Ã»ÓÐ·¢ÏÖ%exe%½ø³Ì¡£
)
 
  
  
echo ÕýÔÚÆô¶¯MySQL½ø³Ì......

%cmd%  

echo .
echo .
echo .
