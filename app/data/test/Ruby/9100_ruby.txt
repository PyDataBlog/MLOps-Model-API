ActiveRecord::Schema.define do
  create_table :routes, :id => false, :force => true do |t|
    t.string :id
    t.string :name
  end

  add_index :routes, :id, :unique => true
  add_index :routes, [:id, :name], :unique => true

  create_table :directions, :force => true do |t|
    t.string :route_id
    t.string :heading
  end

  add_index :directions, :route_id
  add_index :directions, [:route_id, :heading], :unique => true

  create_table :stops, :force => true do |t|
    t.string :name
    t.float :latitude, :longitude
    t.string :geohash
  end

  add_index :stops, :id, :unique => true
  add_index :stops, :geohash

  create_table :route_stops, :force => true do |t|
    t.string  :route_id
    t.integer :direction_id
    t.integer :stop_id
  end

  add_index :route_stops, :route_id
  add_index :route_stops, :stop_id
  add_index :route_stops, [:route_id, :stop_id]

  create_table :predictions, :force => true do |t|
    t.integer  :route_stop_id
    t.integer  :vehicle_id
    t.integer  :distance
    t.string   :kind
    t.string   :destination
    t.boolean  :delayed
    t.datetime :arrive_at
    t.datetime :created_at
  end
end
