#
# External build for SDL2
#
if(NOT DEFINED SDL2_TARGET)
    set(SDL2_TARGET ${3RDPARTY_INSTALL_PREFIX}/sdl2)
endif()

ExternalProject_Add(SDL2
    URL https://www.libsdl.org/release/SDL2-${SDL2_VERSION}.tar.gz
    URL_HASH MD5=${SDL2_HASH}
    PREFIX ${3RDPARTY_BUILD_PREFIX}/sdl2
    CONFIGURE_COMMAND ../SDL2/configure --prefix ${SDL2_TARGET} --enable-shared
    BUILD_COMMAND make ${3RDPARTY_GLOBAL_MAKE_ARGS}
    UPDATE_COMMAND ""
    INSTALL_COMMAND make install
    INSTALL_DIR ${SDL2_TARGET}
)


list(APPEND SDL2_CMAKE_ARGS
    "-DSDL2_ROOT:PATH=${SDL2_TARGET}"
    "-DSDL2_INCLUDE_DIR:PATH=${SDL2_TARGET}/include"
    "-DSDL2_LIBRARY_DIR:PATH=${SDL2_TARGET}/lib"
)
list(APPEND EXT_CMAKE_ARGS "${SDL2_CMAKE_ARGS}")

# This will export the above variables to a file as 'set()' statements
WRITE_ARGS_TO_FILE("sdl2" ${3RDPARTY_VARIABLE_EXPORT_DIR} "${SDL2_CMAKE_ARGS}")