
include $(KROO_BASE_PATH)/comm/makefile.comm.v2

CFLAGS += #-DSUPPORT_TWO_TCP_SERVER

INCLUDE = \
	-I../include \
	-I../monitorexchange/XXO/exchange/monitorexchange/ \
	-I$(INC_EXPORT_PATH) \
	-I$(INC_EXPORT_PATH)/app_platform \
	-I$(INC_EXPORT_PATH)/libc2c \
	-I$(KROO_BASE_PATH)/comm/ \
	-I$(INC_EXPORT_PATH)/c2cplatform/component/configcenter \

ifeq ($(MACHTYPE), x86_64-suse-linux)
LIB = -L$(LIB_EXPORT_PATH) -lapbase_epoll -llogclient_pl_inner -llibrary_the3_itil -llibrary_the3_tinyxml_stl \
	  -lc2c -llogclient \
	  -lcrypt -ldl -llibrary_xml -lxml2
else
LIB = -L$(LIB_EXPORT_PATH) -lapbase_epoll -llogclient_pl_inner -llibrary_the3_itil -llibrary_the3_tinyxml_stl \
	  -lc2c -llogclient \
	  -lcrypt -ldl -llibrary_xml -lxml2
ifeq ($(MACHTYPE), i686-suse-linux)
LIB = -L$(LIB_EXPORT_PATH) -lapbase_epoll -llogclient_pl_inner -llibrary_the3_itil -llibrary_the3_tinyxml_stl \
	  -lc2c -llogclient \
	  -lcrypt -ldl -llibrary_xml -lxml2
endif
endif

LIB += -L../lib -lcomponent_configcenter_set -llibrary_net

OUTPUT  = platform_monitor_cli 

OBJS    = \
		  pm_cli_main.o \
		  pm_cli_app.o \

SOURCES=`ls *.cpp`

.cpp.o:
	$(CXX) $(CFLAGS) $(INCLUDE) -c $(filter %.cpp, $^)

.o:
	$(CXX) $(CFLAGS) -o $@ $^

all:$(OUTPUT)

$(OUTPUT): $(OBJS)
	$(CXX) $(CFLAGS) -rdynamic -o $@ $^ ${LIB}

clean:
	rm -f *.o *.~ *.bak
	rm -f $(OUTPUT)

dep:
	mkdep $(INCLUDE) $(SOURCES) > .depend

ifneq ($(wildcard .depend),)
include .depend
endif

