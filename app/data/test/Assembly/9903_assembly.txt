#ifndef __VIDEO_ASM__
#define __VIDEO_ASM__

#include "res/palettes.asm"

#define __OUTPUT_VIDEO_BACKGROUND_PORT__ #1
#define __OUTPUT_VIDEO_PALETTES_PORT__ #7
#define __OUTPUT_VIDEO_SPRITE_INDEX_PORT__ #4
#define __OUTPUT_VIDEO_SPRITE_PORT__ #5
#define __OUTPUT_VIDEO_OAM_ADDRESS_PORT__ #2
#define __OUTPUT_VIDEO_OAM_PORT__ #3

video_initialize:
  push fr
  push r0
  push r1
  push r2
  push r3

  /**
   * Output palettes to video's dedicated palette memory.
   */
  loadn r1, __OUTPUT_VIDEO_PALETTES_PORT__
  loadn r2, #palettes   // Palettes address.
  loadn r3, #128         // Number of loop iterations.
  video_initialize_loop_load_palettes:
    loadi r0, r2
    out r0, r1
    inc r2
    dec r3
    jnz video_initialize_loop_load_palettes

  pop r3
  pop r2
  pop r1
  pop r0
  pop fr
  rts

#endif
