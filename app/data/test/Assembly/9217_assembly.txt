;ª®¬¯®­¥­â OptionBox (®á­®¢ ­ ­  Checkbox)
;£à®¬­ ï ¡« £®¤ à­®áâì Maxxxx32, Diamond, Heavyiron ¨ ¤àã£¨¬ ¯à®£à ¬¬¨áâ ¬, ¨ ¨å ¯à®£à ¬¬ ¬, ¡¥§
;ª®â®àëå ï ­¥ á¬®£ ¡ë ­ ¯¨á âì íâ®â ª®¬¯®­¥­â. 
;21.02.2007 ¬®¤¥à­¨§ æ¨ï ¨ ¯®¤¤¥à¦ª  ¤¢ãå à §­ëå ¢ à¨ ­â®¢ á ¨á¯®«ì§®¢ ­¨¥¬ á¨á æ¢¥â®¢ ¨ áâ à®© áå¥¬®©
;19.02.2007 ®¡é¥¥ ã«ãçè¥­¨¥ ª®¤ , ã¬¥­ìè¥­¨¥ à §¬¥à  ¨ ¨á¯®«ì§®¢ ­¨¥ á¨áâ¥¬­ëå æ¢¥â®¢ ¤«ï ®â®¡à ¦¥­¨ï optionkbox
;16.02.2007 ¤ â  á®§¤ ­¨ï ª®¬¯®­¥­â 
;<Lrz>  - ¥¯«®¢ «¥ªá¥©  www.lrz.land.ru

;§ £®«®¢®ª ¯à¨«®¦¥­¨ï
use32		; âà ­á«ïâ®à, ¨á¯®«ì§ãîé¨© 32 à §àï¤­ëå ª®¬ ­¤ë
    org 0x0		; ¡ §®¢ë©  ¤à¥á ª®¤ , ¢á¥£¤  0x0
    db 'MENUET01'	; ¨¤¥­â¨ä¨ª â®à ¨á¯®«­ï¥¬®£® ä ©«  (8 ¡ ©â)
    dd 0x1		; ¢¥àá¨ï ä®à¬ â  § £®«®¢ª  ¨á¯®«­ï¥¬®£® ä ©« 
    dd start		;  ¤à¥á, ­  ª®â®àë© á¨áâ¥¬  ¯¥à¥¤ ñâ ã¯à ¢«¥­¨¥
	                ; ¯®á«¥ § £àã§ª¨ ¯à¨«®¦¥­¨ï ¢ ¯ ¬ïâì
    dd i_end		; à §¬¥à ¯à¨«®¦¥­¨ï
    dd (i_end+0x100) and not 3	; ¡ê¥¬ ¨á¯®«ì§ã¥¬®© ¯ ¬ïâ¨, ¤«ï áâ¥ª  ®â¢¥¤¥¬ 0å100 ¡ ©â ¨ ¢ëà®¢­¨¬ ­  £à­¨æã 4 ¡ ©â 
    dd (i_end+0x100) and not 3	; à á¯®«®¦¨¬ ¯®§¨æ¨î áâ¥ª  ¢ ®¡« áâ¨ ¯ ¬ïâ¨, áà §ã §  â¥«®¬ ¯à®£à ¬¬ë. ¥àè¨­  áâ¥ª  ¢ ¤¨ ¯ §®­¥ ¯ ¬ïâ¨, ãª § ­­®¬ ¢ëè¥
    dd 0x0,0x0		; ãª § â¥«ì ­  áâà®ªã á ¯ à ¬¥âà ¬¨.
                 ;    ¥á«¨ ¯®á«¥ § ¯ãáª  ­¥ à ¢­® ­ã«î, ¯à¨«®¦¥­¨¥ ¡ë«®
                 ;    § ¯ãé¥­® á ¯ à ¬¥âà ¬¨ ¨§ ª®¬ ­¤­®© áâà®ª¨

		     ;    ãª § â¥«ì ­  áâà®ªã, ¢ ª®â®àãî § ¯¨á ­ ¯ãâì,
                 ;    ®âªã¤  § ¯ãé¥­® ¯à¨«®¦¥­¨¥
;------------------
	include	'..\..\..\..\macros.inc'
	include 'optionbox.inc'	;¢ª«îç¨âì ä ©« opeck.inc

      version_op              ;¢ à¨ ­â, ¯à¨ ª®â®à®¬ ¨á¯®«ì§ãîâáï æ¢¥â , ª®â®àë¥ § ¤ ¥â ¯®«ì§®¢ â¥«ì
;	version_op1             ;æ¢¥â  ¡¥àãâáï ¨§ á¨áâ¥¬ë
	use_option_box		;¨á¯®«ì§ãï ¬ ªà®áë,¢­¥áâ¨ ¯à®æ¥¤ãàë ¤«ï à¨á®¢ ­¨ï optionbox
align 16
;¡« áâì ª®¤ 
start:				;®çª  ¢å®¤  ¢ ¯à®£à ¬¬ã
	mov  eax,48             ;¯®«ãç¨âì á¨áâ¥¬­ë¥ æ¢¥â 
	mov  ebx,3
	mov  ecx,sc
	mov  edx,sizeof.system_colors
	mcall

	mov	eax,40		;ãáâ ­®¢¨âì ¬ áªã ¤«ï ®¦¨¤ ¥¬ëå á®¡ëâ¨©
	mov 	ebx,0x25          ;á¨áâ¥¬  ¡ã¤¥â à¥ £¨à®¢ âì â®«ìª® ­  á®®¡é¥­¨¥ ® ¯¥à¥à¨á®¢ª¥,­ ¦ â  ª­®¯ª , ®¯à¥¤¥«ñ­­ ï à ­¥¥, á®¡ëâ¨¥ ®â ¬ëè¨ (çâ®-â® á«ãç¨«®áì - ­ ¦ â¨¥ ­  ª­®¯ªã ¬ëè¨ ¨«¨ ¯¥à¥¬¥é¥­¨¥; á¡à áë¢ ¥âáï ¯à¨ ¯à®çâ¥­¨¨)
        mcall
red_win:
    call draw_window 		;¯¥à¢®­ ç «ì­® ­¥®¡å®¤¨¬® ­ à¨á®¢ âì ®ª­®
still:				;®á­®¢­®© ®¡à ¡®âç¨ª 
     mov  eax,10 		      ;¦¨¤ âì á®¡ëâ¨ï
     mcall      		;®¦¨¤ âì á®¡ëâ¨¥ ¢ â¥ç¥­¨¥ 2 ¬¨««¨á¥ªã­¤
  
    cmp al,0x1    ;¥á«¨ ¨§¬¥­¨«®áì ¯®«®¦¥­¨¥ ®ª­ 
    jz red_win
    cmp al,0x3    ;¥á«¨ ­ ¦ â  ª­®¯ª  â® ¯¥à¥©â¨
    jz button
     mouse_option_boxes option_boxes,option_boxes_end  ;¯à®¢¥àª  ç¥ª ¡®ªá       
    jmp still    ;¥á«¨ ­¨ç¥£® ¨§ ¯¥à¥ç¨á«¥­­®£® â® á­®¢  ¢ æ¨ª«
button:
;    mov eax,17		;¯®«ãç¨âì ¨¤¥­â¨ä¨ª â®à ­ ¦ â®© ª« ¢¨è¨
;    mcall
;    test ah,ah		;¥á«¨ ¢ ah 0, â® ¯¥à¥©â¨ ­  ®¡à ¡®âç¨ª á®¡ëâ¨© still
;    jz  still
    or eax,-1       ;¢ eax,-1 - 5 ,¡ ©â®¢ ã ­ á ¦¥ â®«ìª® 3  ¢ë©â¨ 
    mcall ;¤ «¥¥ ¢ë¯®«­ï¥âáï ¢ëå®¤ ¨§ ¯à®£à ¬¬ë

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
draw_window:		;à¨á®¢ ­¨¥ ®ª­  ¯à¨«®¦¥­¨ï
    mov eax,12		;¢ à¥£¨áâà ¢­¥áâ¨ §­ ç¥­¨¥ = 12
    mov ebx,1 		;¯à¨á¢®¨âì 1
    mcall

    xor  eax,eax		;®¡­ã«¨âì eax
    mov  ebx,50*65536+180	;[ª®®à¤¨­ â  ¯® ®á¨ x]*65536 + [à §¬¥à ¯® ®á¨ x]
    mov  ecx,30*65536+200	;[ª®®à¤¨­ â  ¯® ®á¨ y]*65536 + [à §¬¥à ¯® ®á¨ y]
    mov  edx,[sc.work] 	         ; color of work area RRGGBB,8->color gl
    or   edx,0xb3000000
    mov  edi,hed
    mcall			;­ à¨á®¢ âì ®ª­® ¯à¨«®¦¥­¨ï

draw_option_boxes option_boxes,option_boxes_end ;à¨á®¢ ­¨¥ ç¥ª¡®ªá®¢

    mov eax,12 			;ã­ªæ¨ï 12 - ­ ç âì/§ ª®­ç¨âì ¯¥à¥à¨á®¢ªã ®ª­ .
    mov ebx,2			;®¤äã­ªæ¨ï 2 - § ª®­ç¨âì ¯¥à¥à¨á®¢ªã ®ª­ .
    mcall
    ret

;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
;DATA ¤ ­­ë¥ 
;®à¬ â ¤ ­­ëå ç¥ª ¡®ªá :
;10 - ª®®à¤¨­ â  ç¥ª ¡®ªá  ¯® å 
;30 - ª®®à¤¨­ â  ç¥ª ¡®ªá  ¯® ã
;0 
;0 - æ¢¥â à ¬ª¨ ç¥ª ¡®ªá 
;0 - æ¢¥â â¥ªáâ  ­ ¤¯¨á¨
;op_text.1 - ãª § â¥«ì ­  ­ ç «® áâà®ª¨
;option_group1 - íâ® ¯à¨§­ ª £àã¯¯ë, â.¥. íâ®â ª®¤ ¬®¦¥â ®¡à ¡ âë¢ âì ¬­®£® £àã¯¯ ¨§ optibox
;op_text.e1-op_text.1 - ¤«¨­  áâà®ª¨
;
align 16
option_boxes:
;op1 option_box1 option_group1,10,15,op_text.1,op_text.e1-op_text.1
;op2 option_box1 option_group1,10,30,op_text.2,op_text.e2-op_text.2
;op3 option_box1 option_group1,10,45,op_text.3,op_text.e3-op_text.3
;op11 option_box1 option_group2,10,80,op_text.1,op_text.e1-op_text.1
;op12 option_box1 option_group2,10,95,op_text.2,op_text.e2-op_text.2
;op13 option_box1 option_group2,10,110,op_text.3,op_text.e3-op_text.3
;
;struc option_box point_gr,left,top,color,border_color,text_color,text,text_length
op1 option_box option_group1,10,15,0xffffff,0,0,op_text.1,op_text.e1-op_text.1
op2 option_box option_group1,10,30,0xFFFFFF,0,0,op_text.2,op_text.e2-op_text.2
op3 option_box option_group1,10,45,0xffffff,0,0,op_text.3,op_text.e3-op_text.3
op11 option_box option_group2,10,80,0xffffff,0,0,op_text.1,op_text.e1-op_text.1
op12 option_box option_group2,10,95,0xffffff,0,0,op_text.2,op_text.e2-op_text.2
op13 option_box option_group2,10,110,0xffffff,0,0,op_text.3,op_text.e3-op_text.3

option_boxes_end:

op_text:		; ®¯à®¢®¦¤ îé¨© â¥ªáâ ¤«ï ç¥ª ¡®ªá®¢
.1 db 'Option_Box #1' 
.e1:
.2 db 'Option_Box #2'
.e2:
.3 db 'Option_Box #3'
.e3:

option_group1	dd op1  ;ãª § â¥«¨, ®­¨ ®â®¡à ¦ îâáï ¯® ã¬®«ç ­¨î, ª®£¤  ¢ë¢®¤¨âáï 
option_group2	dd op11 ;¯à¨«®¦¥­¨¥

hed db 'Optionbox [21.02.2007]',0	;§ £®«®¢®ª ¯à¨«®¦¥­¨ï
sc     system_colors
i_end:			;ª®­¥æ ª®¤ 