
	.NOLIST				; Disable listfile generation.
	.include "tn85def.inc"		; Èñïîëüçóåì HAL Ìèêðîêîíòðîëëåðà.
	.include "macrobaselib.inc"	; Áèáëèîòåêà áàçîâûõ Ìàêðîîïðåäåëåíèé.
	.include "macroapp.inc"		; Ïðèêëàäíûå Ìàêðîîïðåäåëåíèÿ, èñïîëüçóåìûå ïðè ðåàëèçàöèè ëîãèêè ïðèëîæåíèÿ.
	.LIST				; Reenable listfile generation.
	;.LISTMAC			; Turn macro expansion on?	(Ïðè îòëàäêå, îòîáðàæàòü òåëà âíåäð¸ííûõ Ìàêðîñîâ â äèçàññåìáëèðîâàííîì êîäå - îáû÷íî, íå ñëåäóåò âêëþ÷àòü, ò.ê. ãåíåðèðóåò ìíîãî ìóñîðà.)

	.include "data.inc"		; Äàííûå ïðîãðàììû: 
					;	Êîíñòàíòû è ïñåâäîíèìû Ðåãèñòðîâ; 
					;	Ñåãìåíò SRAM è Ïåðåìåííûå; 
					;	Ñåãìåíò EEPROM.


;***************************************************************************
;*
;*  FLASH (ñåãìåíò êîäà)
;*
;***************************************************************************
			.CSEG

		.ORG	0x0000		; (RESET) 
		RJMP	RESET
		.include "ivectors.inc"	; Òàáëèöà âåêòîðîâ íà îáðàáîò÷èêè ïðåðûâàíèé


;***** BEGIN Interrupt handlers section ************************************

;---------------------------------------------------------------------------
;
; Ïðåðûâàíèå: îòñ÷¸ò ïîëóñåêóíä
;
;---------------------------------------------------------------------------

TIMER0_OVERFLOW_HANDLER:
		PUSHF	; Ñîõðàíèòü ðåãèñòðû SREG è TEMP[1] â Ñòåêå...
		PUSH	temp2
		;...

	Exit__TIMER0_OVERFLOW_HANDLER:
		POP temp2
		POPF
		RETI


;***** END Interrupt handlers section 


;***** ÈÍÈÖÈÀËÈÇÀÖÈß *******************************************************
RESET:
		;WDTOFF		; Disable Watchdog timer permanently (ensure)
		STACKINIT	; Èíèöèàëèçàöèÿ ñòåêà
		RAMFLUSH	; Î÷èñòêà ïàìÿòè
		GPRFLUSH	; Î÷èñòêà ÐÎÍ


;***** BEGIN Internal Hardware Init ****************************************

; Èíèöèàëèçàöèÿ Ïîðòîâ...

; Èíèöèàëèçàöèÿ Ñ÷¸ò÷èêîâ...

;***** END Internal Hardware Init 


;***** BEGIN External Hardware Init ****************************************
;***** END External Hardware Init 


;***** BEGIN "Run once" section (çàïóñê ôîíîâûõ ïðîöåññîâ) *****************

		SEI  ; Ðàçðåøàåì ãëîáàëüíûå ïðåðûâàíèÿ

;***** END "Run once" section 


;***** BEGIN "Main" section ************************************************
MAIN:
		NOP		; Âñ¸ äåëàåòñÿ â ïðåðûâàíèÿõ...
		RJMP	MAIN


;***** END "Main" section 

;***** BEGIN Procedures section ********************************************

	; Âíèìàíèå! Â îòëè÷èå îò Ìàêðîñîâ, Êîä ïðîöåäóð, âñåãäà è ïîëíîñòüþ, 
	; âêëþ÷àåòñÿ â ñåãìåíò äàííûõ ïðîãðàììû - çàíèìàåò ìåñòî! 
	; Ïîýòîìó, çäåñü äîëæíû áûòü âêëþ÷åíû òîëüêî òå ïðîöåäóðû, êîòîðûå 
	; ðåàëüíî èñïîëüçóþòñÿ. (Îñòàëüíûå - ñëåäóåò /* çàêîììåíòèðîâàòü */.)

	;.include "genproclib.inc"	; Áèáëèîòåêà ñòàíäàðòíûõ Ïîäïðîãðàìì.




;***** END Procedures section 
; coded by (c) Celeron, 2013  http://inventproject.info/
