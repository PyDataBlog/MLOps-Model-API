import { Component, AfterViewInit, OnInit } from '@angular/core';
import * as electron from 'electron';
const ipc = electron.ipcRenderer;

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css']
})
export class AppComponent implements OnInit, AfterViewInit{

    private trayBtn ;
 trayOn = false
    ngAfterViewInit(): void {
        this.trayBtn = document.getElementById('put-in-tray')
        this.RegisterTrayButtonEvents();
    }
    ngOnInit(): void {
        
    }
    title = 'app';
  constructor(){
  }

  private RegisterTrayButtonEvents(){
      this.trayBtn.addEventListener('click', () => {
        if (this.trayOn) {
            this.trayOn = false;
            ipc.send('remove-tray');
        } else {
            this.trayOn = true
            
            ipc.send('put-in-tray')
        }
    });
    
      // Tray removed from context menu on icon
    ipc.on('tray-removed', function () {
        ipc.send('remove-tray')
        this.trayOn = false
    
    })

  }




}
