<?php

class WPBakeryShortCode_tab_links extends WPBakeryShortCode {

	/*
	 *
	 * @param $atts - shortcode attributes
	 * @param @content - shortcode content
	 *
	 * @access protected
	 * vc_filter: VC_SHORTCODE_CUSTOM_CSS_FILTER_TAG vc_shortcodes_css_class - hook to edit element class
	 * @return string
	 */
	protected function content( $atts, $content = null ) {

		extract( shortcode_atts( array(
			'links' => 'tab_1|layers-1|Tab Link Title|Buy products online from our awesome shop or you can visit us at our real shop om San Francisco'
		), $atts ) );

		// $width_class = '';
		// $css_class = apply_filters( VC_SHORTCODE_CUSTOM_CSS_FILTER_TAG, $width_class, $this->settings['base'], $atts );

		$links_list = explode(',', $links);

		ob_start(); ?>

		<ul class='theshop_tabs_wraper'>
		    <?php foreach ($links_list as $link): $item = explode('|', $link);?>
		    	<li>
		    		<a href="#<?php echo esc_attr($item[0]); ?>"></a>
		    		<div class="icon_tab">
		    			<span><i class="icon icon-<?php echo esc_attr($item[1]); ?>"></i></span>
		    		</div>
		    		<div class="content_tab">
		    			<h2><?php echo esc_html($item[2]); ?></h2>
		    			<p><?php echo esc_html($item[3]); ?></p>
		    		</div>
		    	</li>
		    <?php endforeach ?>
		  </ul>

		<?php
		$output = ob_get_contents();
		ob_end_clean();
		return $output;
	}
}

vc_map( array(
	"base" => "tab_links",
	"name" => __( "Tab Links", "js_composer" ),
	"class" => "",
	"icon" => "icon icon-information",
	"category" => 'AVAThemes',
	"content_element" => true,
	"params" => array(
		array(
			'type' => 'exploded_textarea',
			'heading' => __( 'Links', 'js_composer' ),
			'param_name' => 'links',
			'description' => __( 'Enter values for link - ID, icon, title and description. Divide value sets with linebreak "Enter" (Example: tab_1|layers-1|Tab Link Title|Buy products online from our awesome shop or you can visit us at our real shop om San Francisco).', 'js_composer' ),
		),
	)
) );

