<?php

namespace App\Repository;

/**
 * Class BaseRepository
 *
 * @package App\Repository
 */
abstract class BaseRepository
{
    /** @var string */
    protected $basePath;

    public function __construct($dataFolder)
    {
        $this->basePath = __DIR__.'/../../../'.$dataFolder;
    }

    /**
     * @return array
     */
    protected function getData()
    {
        if (!file_exists($this->getDataPath())) {
            return [];
        }

        return json_decode(file_get_contents($this->getDataPath()), true)[$this->getDataName()];
    }

    /**
     * @return string
     */
    private function getDataPath()
    {
        return $this->basePath.'/'.$this->getDataName().'.json';
    }

    /**
     * @return string
     */
    abstract protected function getDataName();
}
